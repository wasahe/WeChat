{template 'common/header'}
<div class="main">
<h3>全局变量$_W:</h3>
<div class="panel-group" id="accordion">
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse1">
					config信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse1" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="100px;">参数值</th>
									<th width="400px;">辅助信息</th>
								</thead>
								<tbody>
									{loop $w['config'] $key $value}
										<tr>
											<td>{$key}</td>
											<td>{$value}</td>
											<td>
												{if is_array($value)}
													<pre>
														{php print_r($value);}
													</pre>
													
												{/if}
											</td>	
										</tr>
									{/loop}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>

		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse3">
					setting信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse3" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="100px;">参数值</th>
									<th width="400px;">辅助信息</th>
								</thead>
								<tbody>
									{loop $w['setting'] $key $value}
										<tr>
											<td>{$key}</td>
											<td>{$value}</td>
											<td>
												{if is_array($value)}
													<pre>
														{php print_r($value);}
													</pre>
													
												{/if}
											</td>	
										</tr>
									{/loop}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse4">
					user信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse4" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="200px;">参数值</th>
								</thead>
								<tbody>
									{loop $w['user'] $key $value}
										<tr>
											<td>{$key}</td>
											<td>{$value}</td>
											
										</tr>
									{/loop}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse5">
					acount信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse5" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="100px;">参数值</th>
								</thead>
								<tbody>
									{loop $w['account'] $key $value}
										<tr>
											<td>{$key}</td>
											<td>{$value}</td>
												
										</tr>
									{/loop}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse6">
					uniaccount信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse6" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="100px;">参数值</th>
								</thead>
								<tbody>
									{loop $w['uniaccount'] $key $value}
										<tr>
											<td>{$key}</td>
											<td>{$value}</td>
										</tr>
									{/loop}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse7">
					page信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse7" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="100px;">参数值</th>
									<th width="400px;">辅助信息</th>
								</thead>
								<tbody>
									{loop $w['page'] $key $value}
										<tr>
											<td>{$key}</td>
											<td>{$value}</td>
											<td>
												{if is_array($value)}
													<pre>
														{php print_r($value);}
													</pre>
													
												{/if}
											</td>	
										</tr>
									{/loop}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse8">
					其他信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse8" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="100px;">参数值</th>
								</thead>
								<tbody>
									{php unset($w['config']);unset($w['setting']);unset($w['user']);unset($w['account']);unset($w['uniaccount']);unset($w['page']);}
									{loop $w $key $value}
										<tr>
											<td>{$key}</td>
											<td>{$value}</td>
										</tr>
									{/loop}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
		
	</div>	

<h3>全局变量$_SESSION:</h3>
<div class="panel-group" id="accordion">
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse9">
					session信息<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse9" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<table class="table table-striped">
								<thead>
									<th width="100px;">参数名</th>
									<th width="100px;">参数值</th>
									<th width="400px;">辅助信息</th>
								</thead>
								<tbody>
									{if empty($_SESSION)}
									<tr>
										<td colspan="3"><span class="help-block">无信息</span></td>
									</tr>
									
									{else}
										{loop $_SESSION $key $value}
											<tr>
												<td>{$key}</td>
												<td>{$value}</td>
												<td>
													{if is_array($value)}
														<pre>
															{php print_r($value);}
														</pre>
														
													{/if}
												</td>	
											</tr>
										{/loop}
									{/if}
								</tbody>
								
							</table>
						</div>
						
					</div>
					
				</div>
			</div>
		</div>
<h3>Access_token:</h3>
<div class="panel-group" id="accordion">
		<!--全局变量w-->
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4 class="panel-title">
				<a data-toggle="collapse" data-parent="#accordion"
					href="#collapse10">
					获取指定公众号的access_token<i class="fa fa-chevron-circle-down"></i>
				</a>
				</h4>
			</div>
			<div id="collapse10" class="panel-collapse collapse">
				<div class="panel-body">
					<div class="form-horizontal form">
						<div class="form-group">
							<label class="col-xs-12 col-sm-3 col-md-2 control-label">公众号:</label>
							<div class="col-sm-9 col-xs-12">
								<select name="acid" class="form-control">
									{loop $acidarr $ac}
									<option value="{$ac['acid']}"{if $ac['acid'] == $_GPC['acid']} selected="selected"{/if} {if $ac['level'] != 4 && $ac['level'] != 3}disabled{/if}>{$ac['name']} {if $ac['level'] != 4 && $ac['level'] != 3}[权限不足]{/if}</option>
									{/loop}
								</select>
							</div>
						</div>
						<div class="form-group">
							<label name="accessTip" class="col-xs-12 col-sm-3 col-md-2 control-label">access_token:</label>
							<label name="accessToken" value=""></label>
							
						</div>
						<div class="form-group">
							<label class="col-xs-12 col-sm-3 col-md-2 control-label"></label>
							<button name="getAccessToken" class="btn btn-primary">获取</button>
							
						</div>
					</div>
					
				</div>
			</div>
		</div>

</div>
<script>
require(['jquery','util'],function($,util){
	$('button[name=getAccessToken]').click(function(){
		help.getAccessToken();
	});
	
	var help = {
		getAccessToken:function(){
			$.ajax({
				url: "{php echo wurl('site/entry/params',array('m'=>'dev_help','op'=>'ajax','handler'=>'getaccesstoken'));}",
				type: 'POST',
				data: {acid: $('select[name=acid]').val()},
				success:function(res){
					if(res){
						$('label[name=accessToken]').text(res);
						util.clip($('label[name=accessTip]'),res);
						$('label[name=accessTip]').text($('label[name=accessTip]').text()+'(点我复制)');
					}else{
						util.message('消息提示: 获取AccessToken失败','', 'error');
					}
				},
				error:function(){
					alert('ajax error');
				}
			});
		}
	}
});
</script>
{template 'common/footer'}