<!doctype html><html><head>	<meta charset="utf-8">	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>	<meta name="apple-mobile-web-app-capable" content="yes">	<meta name="apple-mobile-web-app-status-bar-style" content="black">	<meta name="format-detection" content="telephone=no">	<title>问题内容</title>	<link rel="stylesheet" type="text/css" href="{MODULE_URL}assets/styles/task/css/style.css" /><!--样式-->	<link href="{MODULE_URL}assets/styles/font-awesome.css" rel="stylesheet" type="text/css">	<link href="{MODULE_URL}assets/styles/ionicons-2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css">	<link href="{MODULE_URL}assets/styles/menus.css" rel="stylesheet" type="text/css">	<link rel="stylesheet" type="text/css" href="{MODULE_URL}assets/styles/task/css/animate.min.css" /><!--样式-->	<script type="text/javascript" src="{MODULE_URL}assets/styles/task/js/jquery-2.2.4.min.js"></script><!--jQ库-->	<script type="text/javascript" src="{MODULE_URL}assets/styles/task/js/swiper-3.3.1.jquery.min.js"></script><!--手机轮播库-->	<script type="text/javascript" src="{MODULE_URL}assets/styles/task/js/auto-size.js"></script><!--设置字体大小-->	<script type="text/javascript" src="{MODULE_URL}assets/scripts/raty/jquery.raty.js"></script>	<script type="text/javascript" src="{MODULE_URL}assets/scripts/elink-framework.js"></script>	<script type="text/javascript" src="{MODULE_URL}assets/scripts/noty/packaged/jquery.noty.packaged.js"></script>    <script src="http://res.wx.qq.com/open/js/jweixin-1.1.0.js"></script>	<style type="text/css">*{font-family:"Microsoft YaHei",Arial,Helvetica,sans-serif,"宋体";}</style>    <script>        var jssdkconfig = {php echo json_encode($_W['account']['jssdkconfig']);} || {};        // 是否启用调试        jssdkconfig.debug = false;        jssdkconfig.jsApiList = [            'checkJsApi',            'onMenuShareTimeline',            'onMenuShareAppMessage',            'onMenuShareQQ',            'onMenuShareWeibo',            'hideMenuItems',            'showMenuItems',            'hideAllNonBaseMenuItem',            'showAllNonBaseMenuItem',            'translateVoice',            'startRecord',            'stopRecord',            'onRecordEnd',            'playVoice',            'pauseVoice',            'stopVoice',            'uploadVoice',            'downloadVoice',            'chooseImage',            'previewImage',            'uploadImage',            'downloadImage',            'getNetworkType',            'openLocation',            'getLocation',            'hideOptionMenu',            'showOptionMenu',            'closeWindow',            'scanQRCode',            'chooseWXPay',            'openProductSpecificView',            'addCard',            'chooseCard',            'openCard',			'translateVoice',            'openAddress'        ];        wx.config(jssdkconfig);        var _TUTOR_URL = "{php echo $this->createMobileUrl('tutor')}";        var _follow = "{php echo intval($_W['fans']['follow'])}";        var _openid = "{php echo $_W['openid']}";        var _qrcode = "{php echo $_W['account']['qrcode']}";    </script>    <script src="{MODULE_URL}public/js/voice.js?t={php echo time()}"></script>    </head><body>    {php $footerbars = M('quickmenu')->getall();}	<div id="footer-fixed" class="footer-menu footer-light">        {php $count = count($footerbars);}        {loop $footerbars $footer}		<a style="height:50px;width:{php echo 100/$count}%" href="{php echo $footer['link']}" class="{if $_GPC['do']==$footer['ido']}active-footer-item{/if} footer-mobile"><i class="{php echo $footer['icon']}"></i>{$footer['title']}</a>		{/loop}	</div>	<style type="text/css">	.back:after{		border-top:3rem solid #71C796;	}	.footer-menu{		margin-bottom:-5px;	}	</style>	{php $time = M('common')->tranTime($question['create_time'])}	{php $mark = $question['status']=='2' || $time<=0}	{php $answers = M('answer')->getall(array('status'=>'1','question_id'=>$question['id']),'create_time asc')}	<div class="mobile_wrap Center">        <div class="back" style='background:#71C796;'>        	<div class="Reply">                <div class="right">					<span>						<em><img style="border-radius:30px;width:30px;height:30px;margin-top:0px;" src="{php echo $member['avatar']}" alt="img">&nbsp;{$member['nickname']}{$time}提问：					</span>                    <span style='float:right;padding-top:0.13rem;'>{if $question['credit']>0}{$question['credit']}元&nbsp;&nbsp;&nbsp;{/if}{if intval($question['listen_num'])>0}{php echo intval($question['listen_num'])}人已{php echo $this->template['learnName']}{/if}</span>                	<p>{$question['title']}</p>					{if !empty($question['src']) && intval($question['timelong'])>0}                    <div class="Voice">                    	<p style='line-height:0.8rem;font-size:15px;' data-timelong="{$question['timelong']}" data-id="{$question['id']}" data-type="question" class="listen">						<span style='left:-4.2rem;' class="bubble-tail"></span>						<i class="playStatus ion-wifi"></i><d>点击播放语音&nbsp;&nbsp;&nbsp;{$question['timelong']}''</d></p>                    </div>					{/if}					{if !empty($question['images'])}					<div class="lookImage pic_list">						{php $images = unserialize($question['images'])}						{loop $images $image}						<span><img class='imagesShowArea' src="{php echo tomedia($image)}" alt=""></span>						{/loop}					</div>					{/if}                </div>            </div>        </div>		{php $listen_log = M('listen_log')->getOpenid($question['id'],$_W['openid'])}		{php $now = M('member')->getInfo($_W['openid'])}		{php $payMark = $now['admin']!='1' && $question['isfree']!='1' && $this->pro['listen_price']!='0'&& (empty($listen_log) || $listen_log['status'] == 0) && $question['to_openid']!=$_W['openid'] && $question['openid']!=$_W['openid']}		{if $payMark}		<div class="Answer" id='canShowDiv'>			<div class="portfolio-filter">				<div> 					<h5>{php echo $this->template['authname']}已经作出回答，支付后即可查看所有内容</h5>					<a id="payBtn" data-qid="{$question['id']}" style='border-radius:50px;' class="button-green button-center"><i class="fa fa-check"></i> 支付{php echo $this->pro['listen_price']}元{php echo $this->template['learnName']}答案</a>				</div>			</div>		</div>		{/if}		{if empty($answers) && $question['to_openid']!=$_W['openid']}		{php $user = M('member')->getInfo($question['to_openid'])}		<div class="Answer" id='canShowDiv'>			<div class="portfolio-filter">				<div> 					<h5>请耐心等待{php echo $user['realname']}{php echo $this->template['authname']}的解答...</h5>					<a class="button-blue button-center">等待解答</a>				</div>			</div>		</div>		{/if}		{if !($question['score']>0) && ($question['to_openid']==$_W['openid'] || (!empty($answers) && $question['openid']==$_W['openid']))}		{php $leftTime = M('answer')->getLeftAskTime($question['id'])}		{php $reask = $this->pro['openReask']>0 && $leftTime>0}        <div id='ansForm' class="Answer">												<input type="hidden" name="MAX_FILE_SIZE" value="2000000">			<input type="hidden" id="ans_mode" value="voice">		        	<div class="tabs-two">            	<ul>					{if $question['to_openid']==$_W['openid']}						<li data-mode='voice' class="answer-mode acti">语音解答</li>						<li data-mode='text' class="answer-mode">图文解答</li>					{else}						{if $reask && $this->pro['openFeedback']=='1'}							<li style='width:33.3%' data-mode='voice' class="answer-mode acti">语音追问</li>							<li style='width:33.3%' data-mode='text' class="answer-mode">图文追问</li>							<li style='width:33.3%' data-mode='feedback' class="answer-mode">评价解答</li>						{else if !$reask && $this->pro['openFeedback']=='1'}							{php $pmark = true}							<li style='width:100%' data-mode='feedback' class="answer-mode acti">评价解答</li>						{else if $reask && $this->pro['openFeedback']!='1'}							<li data-mode='voice' class="answer-mode acti">语音追问</li>							<li data-mode='text' class="answer-mode">图文追问</li>						{/if}					{/if}            	</ul>            </div>            <div id='voice' class="mode cg_box cg_pub">				{if $question['to_openid']==$_W['openid']}					<a id="record1" style="margin-left:10px;margin-right:0px;width:93%" href="#" class="button button-blue button-round"><i class="fa fa-microphone"></i> 用60秒语音解答问题</a>				{else} 					<a id="record1" style="margin-left:10px;margin-right:0px;width:93%" href="#" class="button button-blue button-round"><i class="fa fa-microphone"></i> 还可以追问{$leftTime}次</a>				{/if}                <p>                	<a id="record2" style='display:none;' href="#" class="a2"><i class="ion-refresh"></i>重录</a>                    <a id="record3" style='display:none;' href="#" class="a3"><i class="ion-checkmark"></i>提交</a>                </p>            </div>            <div id='text' class="mode cg_box1 cg_pub" style='display:none'>            	<strong>文字说明<span>150字以内</span></strong>                <textarea name="contents" id="contents" placeholder="请输入解答内容，进行文字补充说明..."></textarea>                <strong>图片说明<span>上传图片进行补充说明</span></strong>                <ul id="imagesUpload">                    <li class="imagesUploadIcon add"><a>+添加</a></li>                </ul>                <a id="save" class="okbut">写好了</a>            </div>            <div id='feedback' class="mode cg_box1 cg_pub" style='display:none'>            	<strong>请为{php echo $this->template['authname']}的解答评价：<span><div style="display:inline;" id="star"></div></span></strong>				<script>				$('#star').raty();				</script>				<textarea name="feedbackArea" id="feedbackArea" placeholder="请输入评价内容,评价后将结束问题。"></textarea>                <a id="save2" class="okbut">写好了</a>            </div>        </div>		{/if}				{if !$payMark}        <div class="list dt">        	<ul>				{loop $answers $answer}				{php $user = M('member')->getInfo($answer['openid'])}				{php $time = M('common')->tranTime($answer['create_time'])}				{php $info = M('thumbup')->getSpecInfo('answer',$answer['id'])}				{php $isPro = $question['to_openid']==$answer['openid']}        		<li>					{php $url = $this->createMobileUrl('tutor',array('openid'=>$user['openid']))}                	<div class="box">						{if $isPro}                        <img onclick="window.location.href='{$url}'" class="pict" src="{php echo $user['avatar']}" ></img>						{if $user['isrecommend']=='1'}<i class="icon icon_vip"></i>{/if}						<div onclick="window.location.href='{$url}'" class="text">                            <h2>{$user['realname']}</h2>                            <p>{$user['tags']}</p>                        </div>						{else}                        <img class="pict" src="{php echo $user['avatar']}" ></img>						<div class="text">							<h2>{$user['nickname']}</h2>							<p>普通用户</p>						</div>						{/if} 						{if $isPro}							<a class="Top1">回答</a>						{else if $question['openid']==$answer['openid']}							<a style='color:#27ae60;border:1px solid #27ae60;' class="Top1">追问</a>						{/if}					</div>					<!--回答-->					{if $answer['mode']=='0'}                    <div class="Voice">                    	<p data-id="{$answer['id']}" data-timelong="{$answer['timelong']}" class="listen">						<span class="bubble-tail"></span>						<i class="playStatus ion-wifi"></i><d>						{if $question['isfree'] ==1}							{php echo $this->template['limitFree']}{php echo $this->template['learnName']}						{else if ($question['openid']==$_W['openid'] || $question['to_openid'] == $_W['openid'])}							点击播放语音						{else}							点击播放语音 						{/if}						&nbsp;&nbsp;&nbsp;{$answer['timelong']}''</d></p>                    </div>					{else}                    <div class="box1">                    	<p>							{$answer['contents']}							{if !empty($answer['weblink'])}								<a href="{$answer['weblink']}"><i class="fa fa-link" aria-hidden="true"></i> 查看相关链接</a>							{/if}						</p>						{if !empty($answer['images'])}                        <div class="lookImage pic_list">							{php $images = unserialize($answer['images'])}							{loop $images $image}                        	<span><img class='imagesShowArea' src="{php echo tomedia($image)}" alt=""></span>							{/loop}                        </div>						{/if}                    </div>					{/if}					{if $isPro}                    <div class="box2">						{if !empty($info['item'])}                    	<a class="activeUp thumbUpBtn" style='color:#3498db' data-answerid="{$answer['id']}"><i class="ion-ios-heart"></i>赞同 <e id='nums{$answer['id']}'>{$info['nums']}</e></a>                    	{else}						<a class="thumbUpBtn" data-answerid="{$answer['id']}"><i class="ion-ios-heart-outline"></i>赞同 <e id='nums{$answer['id']}'>{$info['nums']}</e></a>						{/if}						<a><i class="ion-ios-star-outline"></i>粉丝 {php echo intval($answer['follow'])+intval(M('follow')->getTotal($answer['openid']))}</a>                    	{php $check = M('follow')->check($answer['openid'])}						{if empty($check)}						<a class="focus" act='follow' data-openid="{$answer['openid']}"><i class="ion-ios-plus-empty"></i>加关注</a>						{else}                    	<a href="{php echo $this->createMobileUrl('making',array('openid'=>$answer['openid']))}" ><i class="ion-ios-chatbubble-outline"></i>提问</a>						{/if}                    	<a><i class="ion-ios-clock-outline"></i>{$time}</a>                    </div>					{else}                    <div class="box2">						{if !empty($info['item'])}                    	<a class="activeUp thumbUpBtn" style='color:#3498db' data-answerid="{$answer['id']}"><i class="ion-ios-heart"></i>赞同 <e id='nums{$answer['id']}'>{$info['nums']}</e></a>                    	{else}						<a class="thumbUpBtn" data-answerid="{$answer['id']}"><i class="ion-ios-heart-outline"></i>赞同 <e id='nums{$answer['id']}'>{$info['nums']}</e></a>						{/if}                    	<a><i class="ion-ios-clock-outline"></i>{$time}</a>                    </div>					{/if}                </li>				{/loop}					{if $question['score']>0}				{php $member = M('member')->getInfo($question['openid'])}        		<li>                	<div class="box">                        <img class="pict" src="{php echo $member['avatar']}" ></img>						<div class="text">                            <h2>{$member['nickname']}</h2>							<p>普通用户</p>                        </div>						<a style='color:#EC3516;border:1px solid #EC3516;' class="Top1">评价</a>					</div>                    <div class="box1">                    	<p style='display:inline;'>评价星级：<div class='stars' style="display:inline-block;" id="s1"></div></p>						<p>	评价内容：{$question['feedback']}</p>                    </div>                    <div class="box2" style='border-top:0px;margin-top:0px;padding-top:0px;'></div>					<script>					$('#s1').raty({ readOnly: true, score: "{$question['score']}" });					</script>                </li>				{/if}        	</ul>        </div>		{/if}    </div>	<audio id="player" autoplay preload src=""></audio>	<input type="hidden" name="share_title" value="{php echo $question['title']}"/>	<input type="hidden" name="share_image" value="{php echo tomedia($member['avatar'])}"/>	<input type="hidden" name="share_desc" value="{php echo $question['title']}"/>	<input type="hidden" name="share_link" value=""/>	<script>	var images = {		localId: [],		serverId: []	};		{if $pmark}	$('.mode').hide();	$('#feedback').show();		$('#ans_mode').val('feedback');	{/if}		$("#imagesUpload").delegate(".imagesUploadIcon,.imagesUploadArea","click",function(){		var that =$(this);		// 删除已上传的图片		if(that.data('edit')=='1'){			that.parent().remove();			$(".imagesUploadIcon").show();			return false;		}				images.localId = [];		var canChooseCount = 5;		$('.imagesUploadArea').each(function(){			if($(this).data('edit')=='1') canChooseCount--;		});		wx.chooseImage({			count: canChooseCount,			sizeType: ['original', 'compressed'],			sourceType: ['album', 'camera'],			success: function (res) {			images.localId = res.localIds;			if (images.localId.length == 0) {				warn('请先使用 chooseImage 接口选择图片');				return;			}			if(images.localId.length > 5) {				warn('最多支持5张照片,请重新选择');				images.localId = [];				return;			}			var i = 0, length = images.localId.length;			images.serverId = [];			$('.imagesUploadDesc').hide();			function upload() {				wx.uploadImage({					localId: images.localId[i],					success: function (res) {							$(".imagesUploadIcon").css('width','1rem');									$('.imagesUploadIcon').before('<li style="width:1rem;"><div data-sid="'+res.serverId+'" data-edit="1" class="imagesUploadArea pict"><img src="'+images.localId[i]+'" alt=""></div><a class="images-content">删除</a></li>');														i++;						if (i < length) {							upload();						}						var count = 0;						$('.imagesUploadArea').each(function(){							if($(this).data('edit')=='1'){								count++;							}						});						if(count>=5){							$(".imagesUploadIcon").hide();						}					},					fail: function (res) {						warn(JSON.stringify(res));					}				});			}			upload();		  }		});	});	    $('#canShowBtn').click(function(){		$('#canShowDiv').hide();		$('#ansForm').show();    });		$('.focus').click(function(){		var _that = $(this);		var openid = _that.data('openid');		var act = _that.attr('act');		$.post("{php echo $this->createMobileUrl('members')}",{act:act,openid:openid},function(data){			if(data.status == 1){				bingo(data.message);				if('follow'==act){					_that.attr('act','unfollow');					_that.html('<i class="ion-ios-plus-empty"></i>已关注');				}else if('unfollow'==act){					_that.attr('act','follow');					_that.html('<i class="ion-ios-plus-empty"></i>加关注');				}			}else{				warn(data.message);			}		},'json');	});	    $('.thumbUpBtn').click(function(){		var _b = $(this);		post.act = 'up';		post.type = 'answer';		post.itemid = _b.data('answerid');		$.post("{php echo $this->createMobileUrl('thumbup')}",post,function(data){			if(data.status == 1){				var child = $('#nums'+post.itemid);				if(_b.hasClass('activeUp')){					_b.removeClass('activeUp');					child.html(parseInt(child.html())-1);					child.parent().css('color','#C2C8CC');					child.prev().removeClass('ion-ios-heart');					child.prev().addClass('ion-ios-heart-outline');				}else{					_b.addClass('activeUp');					child.html(parseInt(child.html())+1);					child.parent().css('color','#3498db');					child.prev().removeClass('ion-ios-heart-outline');					child.prev().addClass('ion-ios-heart');				}			}else{				warn(data.message);			}			posting = false;		},'json');    });    $('.answer-mode').click(function(){		$('.answer-mode').removeClass("acti");        $(this).addClass("acti");		$('.mode').hide();		$('#'+$(this).data('mode')).show();			$('#ans_mode').val($(this).data('mode'));    });		$(".imagesShowArea").click(function(){        var imgArray = [];        var curImageSrc = $(this).attr('src');        var oParent = $(this).parent().parent();        if (curImageSrc) {			oParent.find("img").each(function(i){ 				imgArray.push($(this).attr('src'));			});            wx.previewImage({                current: curImageSrc,                urls: imgArray            });        }	});		$("#record1").click(voice.start);		// 语音模式    $('#record3').click(function(){		_b = $(this);		_b.attr({"disabled":"disabled"});        posting = true;        wx.ready(function(){            if(!post.localId){                warn("请先录音");                return '';            }            wx.uploadVoice({                localId: post.localId,                isShowProgressTips: 1,                success: function (res) {                    post.serverId = res.serverId;                    post.act = 'reanswer';					post.mode = $("#ans_mode").val();                    if(!post.serverId){                       warn("请先录音");                        return '';                    }					_b.addClass("disabled");					_b.html("数据发射中...");					console.log(post);                    $.post("{php echo $this->createMobileUrl('answer_detail',array('id'=>$question['id']))}",post,function(data){                        if(data.status == 1){                            bingo(data.message,function(){                                window.location.href = "{php echo $this->createMobileUrl('question',array('id'=>$question['id']))}";                            });                        }else{							_b.removeClass("disabled");							_b.html("提交");                            error(data.message,2000,'cancel');                        }                        posting = false;                    },'json');                }            });        });    });			// 图文模式    $('#save').click(function(){		_b = $(this);        post.act = 'reanswer';		post.mode = $("#ans_mode").val();		post.weblink = $("#weblink").val();		post.contents = $("#contents").val();        if(!post.contents){            warn("请先填写解答内容");            return '';        }        post.images = [];		$('.imagesUploadArea').each(function(){			if($(this).data('edit')=='1'){				post.images = post.images.concat($(this).data('sid'));			}		});		_b.addClass("disabled");		_b.html("数据发射中...");		$.post("{php echo $this->createMobileUrl('answer_detail',array('id'=>$question['id']))}",post,function(data){			if(data.status == 1){				bingo(data.message,function(){					window.location.href = "{php echo $this->createMobileUrl('question',array('id'=>$question['id']))}";				});			}else{				_b.removeClass("disabled");				_b.html("提交");				warn(data.message);			}		},'json');    });	// 评价模式    $('#save2').click(function(){		_b = $(this);        post.act = 'reanswer';		post.mode = $("#ans_mode").val();		post.feedback = $("#feedbackArea").val();		post.score = $("input[name='score']").val();        if(!post.score){            warn("请先为解答打分");            return '';        }        if(!post.feedback){            warn("请先输入评价内容");            return '';        }		_b.attr("disabled", "disabled");		_b.html("数据发射中");		console.log(post);		$.post("{php echo $this->createMobileUrl('answer_detail',array('id'=>$question['id']))}",post,function(data){			if(data.status == 1){				bingo(data.message,function(){					window.location.href = "{php echo $this->createMobileUrl('question',array('id'=>$question['id']))}";				});			}else{				_b.removeAttr("disabled", "disabled");				_b.html("提交");				warn(data.message);			}		},'json');    });	    var player = document.getElementById('player');	var timer;    function playData(data){        player.src = data.src;        player.play();		        var timelong = parseInt(data.timelong) * 1000;		var count = data.timelong;		var playStatus = $(data.target).find('.playStatus');		timer = window.setInterval(function(){			if((count--)>1){				playStatus.removeClass('fa-play').addClass('fa-pause');				playStatus.next().html(" 语音播放中..."+count+"''");			}else{				clearInterval(timer);				playStatus.removeClass('fa-pause').addClass('fa-play');				playStatus.next().html(" 再放一次 "+data.timelong+"''");			}		},1000);    }	    $('#payBtn').click(function(){		var dd = {};        var target = $(this);		target.html('正在开启支付...');        $.get("",{id:$(this).data('qid'),act:'repay'},function(data){            wx.ready(function(){                wx.chooseWXPay({                    timestamp: data.timeStamp,                    nonceStr: data.nonceStr,                    package: data.package,                    signType: data.signType,                    paySign: data.paySign,                    success: function (res) {                        if(res.errMsg == 'chooseWXPay:ok') {                            data.act == 'paySuccess';                            $.post("",{act:'paySuccess',listen_id:data.listen_id},function(d){                                if(d.status == 1){									window.location.reload();                                }else{                                    warn('支付失败！',function(){});                                }                            },'json');                        }else{                            warn('微信支付未配置成功！');                        }                    }, cancel:function(res){						target.html("重新尝试支付");					}, error:function(res){						target.html("重新尝试支付");					}                });            });        },'json');    });	    $('.listen').click(function(){		clearInterval(timer);		var dd = {};        var target = $(this);        var timelong = $(this).data('timelong');        $.get("{php echo $this->createMobileUrl('question',array('id'=>$question['id']))}",			{answer_id:target.data('id'),act:'src',type:target.data('type')},function(data){            if(data.status == 0){				dd.status = 1;                dd.target = target;                dd.src = data.src;                dd.timelong = timelong;                return '';            }            if(data.status == 8){				dd.status = 2;                warn(data.message,function(){});                return '';            }            if(!data.listen_id){				dd.status = 2;                warn('listen_id为空');                return '';            }            if(!data.answer_id){				dd.status = 2;				warn('answer_id为空');                return '';            }            wx.ready(function(){                wx.chooseWXPay({                    timestamp: data.timeStamp,                    nonceStr: data.nonceStr,                    package: data.package,                    signType: data.signType,                    paySign: data.paySign,                    success: function (res) {                        if(res.errMsg == 'chooseWXPay:ok') {                            data.act == 'paySuccess';                            $.post("",{act:'paySuccess',listen_id:data.listen_id,answer_id:data.answer_id},function(d){                                if(d.status == 1){									dd.status = 1;                                    dd.target = target;                                    dd.src = d.src;                                    dd.timelong = timelong;                                    return '';                                }else{									dd.status = 2;                                    warn('系统错误',function(){});                                }                            },'json');                        }else{							dd.status = 2;                            window.location.href = "{php echo $_W['siteurl']}";                        }                    }, cancel:function(res){						target.find('.playStatus').next().html("重试一下");					}                });            });        },'json');		target.find('.playStatus').next().html("数据搬运中...");        player.play();		var timer1 = window.setInterval(function(){			if(dd.status>0){				clearInterval(timer1);				if(dd.status==1){					playData(dd);				}else{					target.find('.playStatus').next().html("重试一下");				}			}		},1000);    });	initshare();	function initshare(){		var title = $('input[name="share_title"]').val();		var imgUrl = $('input[name="share_image"]').val();		var desc = $('input[name="share_desc"]').val();		var link = $('input[name="share_link"]').val();		wx.ready(function(cb1,cb2){			wx.onMenuShareTimeline({				title: title, // 分享标题				link: link, // 分享链接				imgUrl: imgUrl, // 分享图标				success: function () {					// 用户确认分享后执行的回调函数					cb1();				},				cancel: function () {					// 用户取消分享后执行的回调函数					cb2();				}			});			wx.onMenuShareAppMessage({				title: title, // 分享标题				desc: desc, // 分享描述				link: link, // 分享链接				imgUrl: imgUrl, // 分享图标				type: '', // 分享类型,music、video或link，不填默认为link				dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空				success: function () {					// 用户确认分享后执行的回调函数					cb1()				},				cancel: function () {					// 用户取消分享后执行的回调函数					cb2();				}			});			wx.onMenuShareQQ({				title: title, // 分享标题				desc: desc, // 分享描述				link: link, // 分享链接				imgUrl: imgUrl, // 分享图标				success: function () {					// 用户确认分享后执行的回调函数					cb1();				},				cancel: function () {					// 用户取消分享后执行的回调函数					cb2();				}			});			wx.onMenuShareWeibo({				title: title, // 分享标题				desc: desc, // 分享描述				link:link, // 分享链接				imgUrl: imgUrl, // 分享图标				success: function () {					// 用户确认分享后执行的回调函数					cb1();				},				cancel: function () {					// 用户取消分享后执行的回调函数					cb2();				}			});			wx.onMenuShareQZone({				title: title, // 分享标题				desc: desc, // 分享描述				link: link, // 分享链接				imgUrl: imgUrl, // 分享图标				success: function () {					// 用户确认分享后执行的回调函数					cb1();				},				cancel: function () {					// 用户取消分享后执行的回调函数					cb2()				}			});		});	}	</script>{template 'common/remind'}</html>