function getWinHeight(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}function bindEvent(a,d,b){document.addEventListener?a.addEventListener(d,b,!1):a.attachEvent(d,b)}function delEvent(a,d,b){document.removeEventListener?a.removeEventListener(d,b,!1):a.detachEvent(d,b)}function hasClass(a,d){d=d||"";return 0==d.replace(/\s/g,"").length?!1:(new RegExp(" "+d+" ")).test(" "+a.className+" ")}
function addClass(a,d){var b=new RegExp("\\b"+d+"\\b");if(1<a.length)for(var e=0;e<a.length;e++)b.test(a[e].className)||(a[e].className=a[e].className?a[e].className+(" "+d):d);else b.test(a.className)||(a.className=a.className?a.className+(" "+d):d);return a}function removeClass(a,d){var b=new RegExp("\\b"+d+"\\b","g");if(1<a.length)for(var e=0;e<a.length;e++)a[e].className=a[e].className.replace(b,"").replace(/\s+/g," ");else a.className=a.className.replace(b,"").replace(/\s+/g," ");return a}
function translate(a,d,b){var e=navigator.userAgent.toLowerCase(),f=a&&a.style;f.webkitTransitionDuration=f.MozTransitionDuration=f.msTransitionDuration=f.OTransitionDuration=f.transitionDuration=b+"ms";f.webkitTransitionTimingFunction=f.MozTransitionTimingFunction=f.msTransitionTimingFunction=f.OTransitionTimingFunction=f.transitionTimingFunction="ease-in-out";-1!=e.indexOf("gt-")?f.webkitTransform="translateY("+d+"px)":f.webkitTransform="translate3d(0, "+d+"px, 0)";f.msTransform=f.MozTransform=
f.OTransform="translateY("+d+"px)";setTimeout(function(){a.parentNode.style.display="none"},b)}var Swiper=function(a,d){this.wrap=a;this.currentNum=d.startIndex||0;this.speed=d.speed||300;this.callback=d.callback||null;this.circular=d.circular||!1;this.items=this.wrap.children;this.len=this.items.length;0!=this.len&&(this.direction=this.curY=this.Y=this.curX=this.X=this._height=this._width=0,this.isValidSlide=this.isScrolling=this.firstInit=!1,this.init())};
Swiper.prototype={init:function(){this._height=getWinHeight();this.wrap.style.height=this._height+"px";this.firstInit=!0;this.gotoPage(this.currentNum);this.addEvent()},touchX:function(a){return a.touches?a.touches[0].pageX:a.pageX},touchY:function(a){return a.touches?a.touches[0].pageY:a.pageY},setAnimation:function(){var a=this.len,d=this.speed,b=this.items,e=this._height,f=this.currentNum,g=this.round(-1),h=this.round(1);if(this.firstInit){for(var c=0;c<a;c++)c==f?(this.translate(b[c],0,0),b[c].style["z-index"]=
10,b[c].querySelector(".animate")&&removeClass(b[c].querySelector(".animate"),"hide"),removeClass(b[c],"hide")):c==g?(this.translate(b[c],-e,0),b[c].style["z-index"]=9,b[c].querySelector(".animate")&&addClass(b[c].querySelector(".animate"),"hide"),removeClass(b[c],"hide")):c==h?(this.translate(b[c],e,0),b[c].style["z-index"]=9,b[c].querySelector(".animate")&&addClass(b[c].querySelector(".animate"),"hide"),removeClass(b[c],"hide")):(this.translate(b[c],0,0),b[c].style["z-index"]=1,b[c].querySelector(".animate")&&
addClass(b[c].querySelector(".animate"),"hide"),addClass(b[c],"hide"));this.firstInit=!1}else for(c=0;c<a;c++)c==f?(this.translate(b[c],0,d),b[c].style["z-index"]=10,b[c].querySelector(".animate")&&removeClass(b[c].querySelector(".animate"),"hide"),removeClass(b[c],"hide")):c==g?(this.translate(b[c],-e,d),b[c].style["z-index"]=9,b[c].querySelector(".animate")&&addClass(b[c].querySelector(".animate"),"hide"),removeClass(b[c],"hide")):c==h?(this.translate(b[c],e,d),b[c].style["z-index"]=9,b[c].querySelector(".animate")&&
addClass(b[c].querySelector(".animate"),"hide"),removeClass(b[c],"hide")):(this.translate(b[c],0,d),b[c].style["z-index"]=1,b[c].querySelector(".animate")&&addClass(b[c].querySelector(".animate"),"hide"),addClass(b[c],"hide"))},translate:function(a,d,b){var e=navigator.userAgent.toLowerCase();a=a&&a.style;a.webkitTransitionDuration=a.MozTransitionDuration=a.msTransitionDuration=a.OTransitionDuration=a.transitionDuration=b+"ms";a.webkitTransitionTimingFunction=a.MozTransitionTimingFunction=a.msTransitionTimingFunction=
a.OTransitionTimingFunction=a.transitionTimingFunction="ease-in-out";-1!=e.indexOf("gt-")?a.webkitTransform="translateY("+d+"px)":a.webkitTransform="translate3d(0, "+d+"px, 0)";a.msTransform=a.MozTransform=a.OTransform="translateY("+d+"px)"},slide:function(a){for(var d=this.len,b=this.items,e=this._height,f=this.currentNum,g=this.round(-1),h=this.round(1),c=0;c<d;c++)c==f?this.translate(b[c],a,0):c==g?this.translate(b[c],a-e,0):c==h?this.translate(b[c],a+e,0):this.translate(b[c],0,0)},round:function(a){return 0>
this.currentNum+a?this.currentNum+a+this.len:this.currentNum+a>this.len-1?this.currentNum+a-this.len:this.currentNum+a},addEvent:function(){var a=this.wrap,d=this;bindEvent(a,"touchstart",function(a){d._touchstart(a)});bindEvent(a,"touchmove",function(a){d._touchmove(a)});bindEvent(a,"touchend",function(a){d._touchend(a)})},_touchstart:function(a){this.X=this.touchX(a);this.Y=this.touchY(a);this.isScrolling=void 0},_touchmove:function(a){a.preventDefault();this.curX=this.touchX(a);this.curY=this.touchY(a)},
_touchend:function(a){var d=a=0;0==this.curX&&(this.curX=this.X);0==this.curY&&(this.curY=this.Y);a=this.curX-this.X;d=this.curY-this.Y;this.curY=this.curX=this.Y=this.X=0;if(Math.abs(d)>Math.abs(a)&&!hasClass(this.items[this.currentNum],"prevent"))if(10<Math.abs(d)?(this.isValidSlide=!0,this.direction=0<d?1:0):this.isValidSlide=!1,this.isValidSlide)if(this.circular)a=1==this.direction?this.round(-1):this.round(1),this.gotoPage(a);else{if(0>d&&this.currentNum<this.len-1||0<d&&0<this.currentNum)a=
1==this.direction?this.round(-1):this.round(1),this.gotoPage(a)}else this.setAnimation()},gotoPage:function(a){-1!=a&&(this.currentNum=a,this.setAnimation(),this.callback&&this.callback(this.items[a],a,this.direction))}};
function preLoad(){var a=document.getElementById("loading"),d=document.getElementById("columnar"),b=document.getElementById("percent"),e=a.children[0],f=a.children[1],g=imgSrcArray.length,h=0;if(0<g)for(a=0;a<g;a++){var c=new Image;c.src=imgSrcArray[a];c.onload=function(){h++;if(h<g){var a=Math.floor(h/g*100);d.style.height=a+"%";b.innerHTML=a+"%"}else d.style.height="100%",b.innerHTML="100%",setTimeout(function(){translate(e,-e.offsetHeight,500);translate(f,f.offsetHeight,500);swipeInit()},1E3)}}else d.style.height=
"100%",b.innerHTML="100%",setTimeout(function(){translate(e,-e.offsetHeight,500);translate(f,f.offsetHeight,500);swipeInit()},1E3)}function swipeInit(){var a=document.getElementById("wrapper");swipe=new Swiper(a,{circular:!0})}
function music(){var a=document.getElementById("music_play"),d=a.getAttribute("data-audiourl"),b=null,b=document.createElement("audio");b.src=d;b.loop="loop";d=navigator.userAgent;/ipad|iphone|mac/i.test(d)&&-1==d.indexOf("MicroMessenger")?(removeClass(a,"active"),b.isplay=!1):(b.play(),addClass(a,"active"),b.isplay=!0);bindEvent(a,"click",function(){hasClass(this,"active")?(b.pause(),removeClass(a,"active"),b.isplay=!1):(b.play(),addClass(a,"active"),b.isplay=!0)})}
setTimeout(function(){preLoad();music()},300);