var youkuUrl = "http://player.youku.com/embed/{1}";
var qqUrl = "http://v.qq.com/iframe/player.html?vid={1}&tiny=0&auto=0";
var tudouUrl1 = "http://www.tudou.com/programs/view/html5embed.action?type=1&code={2}&lcode={1}&resourceId=0_06_05_99";
var tudouUrl2 = "http://www.tudou.com/programs/view/html5embed.action?type=0&code={1}&lcode=&resourceId=0_06_05_99";
var youkuSub = "v.youku.com/v_show/id_";
var qqSubCoverRegex = /.html\?vid=([^]+)/;
var qqSubPageRegex = /\/([^]{11}).html/;
var youkunRegex = /\/id_([^]+).html/;
var youkunRegex1 = /\/id_([^]+)==/;
var tudouRegex1 = /tudou.com\/[^]+\/([^]+)\/([^]+).html/;
var tudouRegex2 = /tudou.com\/[^]+\/view\/([^]+)/;
var qqSub = "qq.com/";
var tudouSub = "tudou.com/";
function getUrlFromRegex(url, iframeUrl, regex) {
    var r = url.match(regex);
    if (r != null ) {
        for (var i = 1; i < r.length; i++) {
            iframeUrl = iframeUrl.replace("{" + i.toString() + "}", r[i])
        }
        return iframeUrl
    } else {
        return ""
    }
}
function getUrl(url) {
    if (url.indexOf(youkuSub) >= 0) {
        var str = getUrlFromRegex(url, youkuUrl, youkunRegex1);
        if (str && str.length > 0) {
            return str
        } else {
            return getUrlFromRegex(url, youkuUrl, youkunRegex)
        }
    } else {
        if (url.indexOf(qqSub) >= 0) {
            var urlqq = getUrlFromRegex(url, qqUrl, qqSubCoverRegex);
            if (urlqq == "" || urlqq == undefined || urlqq == null ) {
                urlqq = getUrlFromRegex(url, qqUrl, qqSubPageRegex)
            }
            return urlqq
        } else {
            if (url.indexOf(tudouSub) >= 0) {
                var result = getUrlFromRegex(url, tudouUrl1, tudouRegex1);
                if (result == "") {
                    result = getUrlFromRegex(url, tudouUrl2, tudouRegex2)
                }
                return result
            }
        }
    }
}
;