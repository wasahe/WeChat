!function(){function t(t,a){var e=$("#__shadow");"function"==typeof t&&(a=t,t=0),e.length?(e.show(),$.send(F.EventCenter.PLAYER_HIDE)):(e=$('<div id="__shadow" style="opacity: 0.2; width: 100%;height: 100%;background-color: #000;position: fixed;top: 0;left: 0;" class="z-act-pop"></div>'),e.appendTo("body"),$.send(F.EventCenter.PLAYER_HIDE));var i=$(document).height(),o=$(window).height(),n=Math.max(i,o);return e.height(n).css("top",t).off(F.EventCenter.CLICK).on(F.EventCenter.CLICK,function(t){return t.preventDefault(),t.stopPropagation(),a&&a(),e.hide(),$.send(F.EventCenter.PLAYER_SHOW),!1}),e}function a(t){clearTimeout(n);var a=$("#__loading");if(!a.length){var e=['<div id="__loading" class="spinner z-loading">','<div class="rect1"></div>','<div class="rect2"></div>','<div class="rect3"></div>','<div class="rect4"></div>','<div class="rect5"></div>',"</div>"].join("");a=$(e),a.appendTo("body")}t?n=setTimeout(function(){a.show()},t):a.show()}function e(){clearTimeout(n),$("#__loading").hide()}function i(t,a,e){function i(){o.hide(),n.width(0)}var o=$("#_progress_wrap"),n=null;if(!o.length){var r=['<div class="progress-wrap z-root" id="_progress_wrap">','<div class="progress" id="_progress"></div>',"</div>"].join("");o=$(r),o.appendTo("body")}n=$("#_progress"),t?(o.show(),n.animate({width:100*t+"%"},a,function(){1==t&&i(),e&&e()})):(i(),e&&e())}function o(t,a){function e(){n=$("<div></div>"),n.addClass("tip_error z-root").html("<span>"+t+"</span>").on("click",i).appendTo("body"),r=setTimeout(i,a)}function i(){clearTimeout(r),n.animate({opacity:0},300).off("click"),r=setTimeout(o,500)}function o(){clearTimeout(r),n.remove()}var n=null,r=null;a=a||3e3,t&&e()}F.shadow=F.shadow||{show:t,hide:function(){$("#__shadow").hide()}};var n=0;F.loading=F.loading||{show:a,hide:e},F.progress=F.progress||i,F.showTip=F.showTip||o}(),!function(){var t={};t.cl=F.platform.isIpad?"ipad":"mweb",F.config=F.config||{},F.config.pParam=t,F.pData=F.pData||{};var a=!1,e=!1,i=[],o=function(){$.each(i,function(t,a){var e=a[0],i=a[1];e(i)}),e=!1,a=!0},n=function(){var t=F.config.po+"/v7/config/channel"+(F.config.pParam?"?"+$.param(F.config.pParam):""),a=F.util.hex_sha1(t),e=F.htmlstore.get(a);e?(F.pData.channels=e.channels,o()):F.request(t,function(t){t&&200==t.retcode&&(F.htmlstore.set(a,t,86400),F.pData.channels=t.channels,o())},{error:o,timeout:3e3})};F.getParamsReady=function(t,o){if(a)return void t(o);if(i.push([t,o]),!e){e=!0;var r=F.cookie.get("uc");r?(F.config.pParam.uc=r,n()):F.request(F.config.po+"/v5/config/init",F.config.pParam,function(t){t&&200==t.retcode&&(F.cookie.set("uc",t.uc,7),F.config.pParam.uc=t.uc,n())},{error:n,timeout:3e3})}}}(),function(){function t(t){if(s.length)try{$.each(s,function(t,a){a.abort()})}catch(e){}s=[],o(100),$("[data-tpl-ajax]").each(function(t,e){if("off"!=$(e).data("refresh")){var i=a(e,null,!1),o=$(e).data("delay");i&&!o&&s.push(i)}}),$.when.apply($,s).always(function(){F.loading&&F.loading.hide(),t&&t()})}function a(t,a,i,o){if(a&&!$.isFunction(a))return void e(t,a,i,o);if(i=a,o=i,a=null,t&&$(t).length){var s=$(t).data("tpl-ajax"),l=($(t).data("ajax-domain")||"po").replace(r,n),d=$(t).data("cache");if(s){0!=s.indexOf("http:")&&(s=F.config[l]+s),s=s.replace(r,n);var c=~s.indexOf(F.config.api)?"":$.param(F.config.pParam);c&&(s=(s+"&"+c).replace(/[&?]{1,2}/,"?")),void 0===o&&(o=!0);var h=F.util.hex_sha1(s),a=F.htmlstore.get(h);return a?void e(t,a,i,o):F.request(s,function(a){a&&200==(a.retcode||a.status)?d&&F.htmlstore.set(h,a,60*(parseInt(d)||1)*60):a={empty:"nodata"},e(t,a,i,o)},{error:function(){e(t,{empty:"error"},i,o)}})}}}function e(t,a,e,i){var o=$(t).data("var"),s=$(t).data("refresh"),l=$(t).data("tpl-sel"),d=l?$(l).html():$(t).next('script[type="text/html"]').html();o&&a&&200==(a.retcode||a.status)&&(F.pData[o]=a),d&&(d=d.replace(r,n),$(t).html(F.tpl.render(d)(a)),i&&F.page.lazyLoadImage(),s||$(t).data("refresh","off"),e&&e(a))}function i(){$("[data-tpl]").each(function(t,a){e(a,window)})}function o(t){F.loading&&F.loading.show(t)}function n(){if(!arguments[1])return"";for(var t=arguments[1].split("."),a="",e=window;t.length>0;)if(a=t.shift(),""!=a)try{e=e[a]}catch(i){return""}return(void 0===e||null===e)&&(e=""),e}F.pData=F.pData||{};var r=/###([a-zA-Z\._]+)###/g,s=[];F.tplItemAjax=a,F.tplAjax=t,F.tplCommon=i,$(function(){F.getParamsReady?(o(100),F.getParamsReady(function(){F.tplCommon(),F.tplAjax(F.execute)})):(F.tplCommon(),F.tplAjax(F.execute))})}(),function(){function t(t,a){window.__tabs_scroll=window.__tabs_scroll||{};var e=window.__tabs_scroll;e["__scroll_"+t]=a}function a(t){var a=window.__tabs_scroll||{};return a["__scroll_"+t]||null}function e(){return window.__tabs_scroll||{}}function i(){var t=$("[data-tab-wrap]"),a="current";t.length&&$.each(t,function(){var t=$(this),e=t.attr("data-tab-wrap");if(1!=t.attr("data-bind-scroll")){switch(e){case"swipe":var i=0,o=0,n=null,r=null,s=t.find("[data-tab-scroll]"),l=s.attr("data-tab-scroll"),d=$("[data-tab-item]",t);if(!d.length)return;d.each(function(t){if(r=$(this),r.width(r.width()),i+=r.width(),"retrieve_"==F.config.ctrlname){var e=r.find("[data-filter-code]"),s=e.data("filter-code"),l=e.data("filter-id");F.url.getQueryValue(s)==l&&(o=t,n=this,d.find("[data-filter-code]").removeClass(a),e.addClass(a))}else r.hasClass(a)?(o=t,n=this):r.find("."+a).length&&(o=t,n=this)}),s.width(i);var c=new IScroll(this,{scrollX:!0,scrollY:!1,eventPassthrough:!0,preventDefault:!1});F.tabs.set(l,c),this.scrollInstance=c,o>0&&c.scrollToElement(n,null,!0,!0);break;case"switch":t.on(F.EventCenter.CLICK,"[data-tab-item]",function(a){a.stopPropagation(),a.preventDefault();var e=$(this),i="current",o=e.attr("data-tab-item");$("[data-tab-item]",t).removeClass(i),e.addClass(i),$("[data-tab-switch]",t).hide(),$('[data-tab-switch="'+o+'"]',t).show().trigger(F.EventCenter.TAB_SHOW),F.page.lazyLoadImage()})}t.attr("data-bind-scroll",1)}})}F.tabs=F.tabs||{set:t,get:a,all:e,init:i}}(),function(){function t(t){if(t=$(t)[0],t&&t.children[0]){var e=$("[data-list-item]",t),i=0;e.each(function(){i+=$(this).width()+(parseInt($(this).css("margin-right"))||0)}).parent().width(i);var o=new IScroll(t,{scrollY:!1,scrollX:!0,eventPassthrough:!0,preventDefault:!1}),n=$(".current",t)[0];return n&&o.scrollToElement(n,0,!0,!0),a(t),o.on("scrollStart",function(){a(t,$(t).width())}),o.on("scrollEnd",function(){a(t)}),t.iScroll=o,o}}function a(t,a){a=a||0;var e=$(t).offset().left+a-200,i=e+$(t).width()+200;$("img",t).each(function(){if($(this).attr("data-src")){var t=$(this).offset().left;i>t&&t+$(this).width()>e&&$(this).lazyLoad()}})}function e(t){t&&(t.destroy(),$(t.scroller).removeAttr("style"))}F.scroll=F.scroll||{swipe:t,destroy:e}}(),F.ready(function(){function t(){var t=$("#_noHistory"),a=$("#_yesHistory"),e=$("#_yesHisWrap"),i=$("#i_clear_btn"),o="h5v_history_watch_v2",n="";if($("#i_h_wrap").length){var r=F.htmlstore.get(o);r&&r.length?($.each(r,function(t,a){var e=F.util.formatTime(a.time)||"00:00";F.platform.isIpad&&$("body").hasClass("ipad")?(0==t&&(n+='<div class="f-cb" data-swipe-slide="h">'),n+='<div class="list" data-list-item="1"><a href="'+a.url+'"><img src="'+a.pic+'">'+a.vtitle+"</a><b>看到"+e+"</b></div>",t==r.length-1&&(n+="</div>")):n+='<div class="list"><a href="'+a.url+'">'+a.vtitle+"</a><b>看到"+e+"</b></div>"}),e.html(n),a.show(),t.hide(),F.platform.isIpad&&F.scroll.swipe(e)):(t.show(),a.hide()),i.off("click").on("click",function(){a.hide(),t.show(),F.htmlstore.remove(o)})}}$("[data-head-back]").on(F.EventCenter.CLICK,function(){window.history&&$.isFunction(history.back)&&history.back()}),$("[data-ajax-len]").each(function(){$(this).attr("data-ajax-len")>3&&$(this).removeClass("f-none")}),$("body").on("click",'[data-btn-expand="1"]',function(){var t=$(this),a=t.parent(),e=+t.attr("data-ajax-count")||10;if(1!=t.attr("data-btn-expand"))return!0;var i=a.find("[data-list-item].f-none");if($.each(i,function(t){e>t&&$(this).removeClass("f-none")}),F.page.lazyLoadImage({preloadHeight:100}),!a.find("[data-list-item].f-none").length&&"javascript:;"===t.attr("href")){var o=a.attr("data-more-url");o?t.attr("href",o).attr("data-btn-expand",0).text("更多"):t.hide()}return!1}),F.tabs.init(),$("[data-plugin-item]").on(F.EventCenter.CLICK,'[data-btn-expand="plugin"]',function(){var t=$(this),a=t.parent(),e=a.find("[data-info-full]"),i=a.find("[data-info-part]");a.hasClass("ml")?(e.hide(),i.show(),a.removeClass("ml"),t.find("span").text("展开"),t.find("i").removeClass("i-up").addClass("i-down")):(a.addClass("ml"),e.show(),i.hide(),t.find("span").text("收起"),t.find("i").removeClass("i-down").addClass("i-up"))});var a={history:t};!function(t,a){function e(t,a){var e=t.attr("data-h-cls");a?e&&t.removeClass(e):($("[data-h-toggle]").each(function(){var t=$(this),a=t.attr("data-h-cls");a&&t.hasClass(a)&&t.removeClass(a)}),e&&t.addClass(e))}var i=null,o="f-none";$("[data-h-toggle]").on("click",function(){var t=$(this),n=t.attr("data-h-toggle"),r=$('[data-h-wrap="'+n+'"]'),s=t.attr("data-h-cls"),l=t.attr("data-h-fun"),d=$(".i-arr",r),c=$(t.attr("data-h-offset")||".g-hd");if("search_"==F.config.ctrlname&&"__h_search"==n)return!1;if(F.platform.isIpad){var h=~~(t.offset().left+t.width()/2-4);d.css("left",h)}if(r.hasClass(o)){for(var p={layer_id:""},f=["search","history","todo"],u=t.data("h-toggle"),g=-1,m=0;m<f.length;m++)if(-1!=u.indexOf(f[m])){g=m;break}g>-1&&(p.layer_id=f[g]),$.send(F.EventCenter.HEARBAR_SHOW,p),r.removeClass(o),e(t,!1),a[l]&&a[l](),i=F.shadow.show(c.offset().top+c.height(),function(){r.addClass(o),s&&t.removeClass(s)}),$.send(F.EventCenter.PLAYER_HIDE),$("img[data-ignore]",r).removeAttr("data-ignore"),F.page.lazyLoadImage()}else r.addClass(o),e(t,!0),i&&i.hide(),$.send(F.EventCenter.PLAYER_SHOW)}),$.add([F.EventCenter.SIDEBAR_SHOW,F.EventCenter.HEARBAR_SHOW].join(" "),function(){$("[data-h-wrap]").addClass(o),F.shadow.hide()}),$.add(F.EventCenter.HIDE_LAYER,function(){$("[data-h-wrap]").addClass(o),$.send(F.EventCenter.PLAYER_SHOW),F.shadow.hide()})}(this,a),$("[data-btn-login]").on("click",function(){var t=$(this).attr("href")||$(this).attr("data-redirect-url"),a=window.location;return t?(a.href="/account/login?location="+a.pathname,!1):!0})}),function(){function t(t,a){var e=window.location.host,i=t.indexOf(e),o="";o=0>i?t:t.substring(i+e.length),_czc.push(["_trackPageview",o,a]),F.log.pv.send({noCachePvid:!0,referurl:a}),$.send(F.EventCenter.PAGE_REFRESH)}F.ajaxReport=F.ajaxReport||t}(),function(){function e(a){a=$(a),a.attr({href:t(),bc:"installBtn"}),(F.platform.isIos||F.platform.isWeChat)&&a.attr({target:"_blank"}),F.cookie.get("app_install")?a.addClass("installed"):a.hasClass("installed")&&a.removeClass("installed")}function i(e){var i=$(e.currentTarget),o={mid:i.data("app-mid"),vid:i.data("app-vid"),type:i.data("app-type")},n=a(o);if(F.debug("__appOpenUrl",n),!n)return!0;var r=t(),s=+new Date;if(F.platform.isAndroid||navigator.userAgent.match(/(iPhone\sOS)\s[1-8]_/i)){var l=document.createElement("iframe");l.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;",l.src=n,document.body.appendChild(l)}else window.location=n;return F.cookie.set("app_install",1,-1),F.platform.isFunshionApp?!1:(setTimeout(function(){var t=+new Date;1550>t-s?(l&&l.parentNode.removeChild(l),F.platform.isIos&&!window.document.webkitHidden&&(window.location=r),F.cookie.del("app_install")):$(".j-install-btn").addClass("installed")},1500),F.platform.isAndroid&&(location.href=r),!1)}$(document).on("click",".j-install-btn",i),F.namespace("app.download.bind",e)}(),$(function(){function t(){if(!$(".j-app-intercept").length)return!1;if(F.platform.isQQ||F.platform.isSinaWeibo||F.platform.isWeChat||F.platform.isIpad)return!1;if(~["2242","2195","2248","2285","2286","2349"].indexOf(String(F.config.malliance)))return!1;if(location.pathname.indexOf("partner")>-1)return!1;var t="intercept";if(F.cookie.get(t))return!1;var a="test";return F.cookie.set(a,"1"),F.cookie.get(a)?(F.cookie.del(a),!0):!1}F.namespace("app.showIntercept",t())}),function(){var t={root:window,target:".j-pg-content",loading:".j-pg-loading",currentPage:1,totalPage:1,preLoadHeight:100,requestParams:null,requestUrl:"",beforeLoad:null,afterLoad:null,tpl:""},a=function(a){this.options=$.extend({},t,a),this.root=$(this.options.root),this.target=$(this.options.target),this.loading=$(this.options.loading),this.loading.css("opacity",1),this.loading.html('<i class="loading"></i>加载中...'),this.isLoading=!1,this.lastScrollTop=$(window).scrollTop(),this.tpl=$(this.options.tpl).html()||"",this.root.length&&this.target.length&&(this.isLastPage()||$(this.root).off("scroll",$.proxy(this.loadNextPage,this)).on("scroll",$.proxy(this.loadNextPage,this)))};a.prototype.dispose=function(){this.loading.hide(),$(this.root).off("scroll",$.proxy(this.loadNextPage,this))},a.prototype.loadNextPage=function(){if(!($(this.root).scrollTop()<this.lastScrollTop||this.isLoading||this.isLastPage())){var t=!1,a=this.root;if(t=a[0]==window?$(document).height()-(a.scrollTop()+a.height())>this.options.preLoadHeight:a[0].scrollHeight-(a.scrollTop()+a.offset().height)>this.options.preLoadHeight,!t){var e=this;e.isLoading=!0,e.lastScrollTop=$(this.root).scrollTop(),this.options.beforeLoad&&"function"==typeof this.options.beforeLoad&&this.options.beforeLoad(this)===!1||e.loading.show(),e.options.currentPage=this.options.currentPage+1;var i=e.options.requestUrl,o=$.extend({},F.config.pParam,e.options.requestParams,{pg:e.options.currentPage});"function"==typeof e.options.requestUrl&&(i=e.options.requestUrl()),F.request(i,o,function(t){e.isLastPage()&&$(this.root).off("scroll",$.proxy(e.loadNextPage,e)),e.isLoading=!1,e.options.afterLoad&&"function"==typeof e.options.afterLoad&&e.options.afterLoad(this)===!1||(e.target.append(F.tpl.render(e.tpl)(t)),e.isLastPage()?(e.loading.html("抱歉，没有更多内容了"),e.loading.animate({opacity:0},3e3,"",function(){e.loading.hide()})):e.loading.hide()),F.page.lazyLoadImage()},{timeout:3e3,error:function(){e.options.currentPage-=1,e.isLoading=!1,e.loading.hide()}})}}},a.prototype.isLastPage=function(){return Math.ceil(this.options.totalPage)<=this.options.currentPage},F.dropDownLoad=a}(),$(function(){function t(){$("body").width(Math.max($(window).width(),300))}F.platform.isIos&&window!=top&&(t(),$(window).on("resize",t))}),F.ready(function(){window.scrollTo(0,0);var t=$(".j-history-back"),a="/";window.history&&history.length>1&&(a="javascript:history.back()"),t.attr("href",a)}),function(){var t=0;F.pageScroll=function(a){var e=function(t,a,e,i){return e*(t/=i)*t*t+a},i=window.pageYOffset,o=0,n=Math.max(0,a)-i,r=10,s=function(){window.scrollTo(window.pageXOffset,e(o,i,n,r)),o++,o>r&&clearInterval(t)};clearInterval(t),t=setInterval(s,10)}}(),$(function(){window._czc&&window._czc.push(["_trackEvent","websocket",$.type(window.WebSocket)])});!function(){function e(){var e=F.url.getQueryValue("os");this.platform=e?e:F.platform.isAndroid?"android":F.platform.isIphone?"iphone":""}function t(){}function a(e){function t(e){var t=e[0]&&e[0].ad_list,i=[];return t&&$.isArray(t)&&(i=a(t)),i}function a(e){var t,a=e.length,i=null,r=[];for(t=0;a>t;t++)i=e[t],i&&r.push(i);return r}function i(e){var t=e[0];return t&&$.isPlainObject(t)?t.ap:""}this.json=t(e),this.realType=i(e),this.adType=n[this.realType],this.parsed=null}function i(e,t,a){var i=this;i.adType=t,i.format=e.format,i.material=e,i.direction=a,i.tplHtmlMap={f:['<li class="item" data-deliver-item="f">','<a href="<%link%>" target="_blank" class="pic">','<img class="pic" src="http://img.funshion.com/img/blank.gif" data-url="<%material%>" />','<i class="i-ad-flag">广告</i>',"</a>","</li>"],b:['<div data-deliver-item="b" class="m-a-banner-wrap f-mgb" style="width:100%;height:<%height%>;">','<a href="<%link%>" target="_blank"><img src="<%material%>"/><i class="i-ad-flag">广告</i></a>',"</div>"],s:['<div data-deliver-item="s" class="material" style="width:100%;height:<%height%>;">','<a href="<%link%>" target="_blank"><img src="<%material%>" /><i class="i-ad-flag">广告</i></a>',"</div>"],o:[],nup:['<a data-deliver-item="nup" class="f-mgb" id="vipGuide" href="javascript:;" style="display:none;">','<img src="<%material%>" style="width:100%;height:<%height%>;">',"</a>"],i:['<a data-deliver-item="i" href="<%link%>" class="btn mall" block="funMall">','<img src="<%material%>" alt="">',"</a>"]},i.tplFrameMap={f:[],b:['<div data-deliver-item="b" class="m-a-banner-wrap f-mgb" style="width:100%;height: <%height%>;">',"__FRAME__",'<i class="i-ad-flag">广告</i>',"</div>"],s:['<div data-deliver-item="s" class="material" style="width:100%;height: <%height%>;">',"__FRAME__",'<i class="i-ad-flag">广告</i>',"</div>"],o:['<a class="j-item torr-item m-cd-i" href="javascript:;" data-list-item="1">',"__FRAME__",'<i class="i-ad-flag">广告</i>',"</a>"],nup:[],i:[]};var r=i.parseAdType(i.adType,i.direction).type;i.htmlTpl=i.tplHtmlMap[r].join(""),i.frameTpl=i.tplFrameMap[r].join("")}function r(){var a=$("[data-deliver]"),i=new e,r={},n=null,o="";$.each(a,function(e,a){n={ap:i.mapAdType(a)},o=$(a).attr("data-deliver-ver"),o&&(n.deliver_ver=o),n.ap&&!r[n.ap]&&(r[n.ap]=1,(new t).getMaterials(n))})}var n={h:{f:{iphone:"m_ipe_fpf_v1",android:"m_afpf_v1"},b:{iphone:"m_ipe_fbn_v1",android:"m_afbn_v1"}},p:{b:{iphone:"m_ipe_pbn_v1",android:"m_apbn_v1"},s:{iphone:"m_ipe_afl_v1",android:"m_afl_v1"},o:{iphone:"m_ip_original",android:"m_ap_original"},js:"m_p_icon"},t:{b:{iphone:"m_i_co",android:"m_a_co"},nup:"m_nup"},all:{i:"m_icon"}};e.prototype.parseAdType=function(e){var t=/mw_(\w+)_(\w+)/,a={};return t.test(e)&&(a.page=RegExp.$1,a.type=RegExp.$2),a},e.prototype.mapAdType=function(e){var t=$(e).attr("data-deliver"),a=null,i=null,r={index_:"h",channel_:"c",mplay_:"p",vplay_:"p",xz_:"t",client_new:"t"},o=F.config.ctrlname;if(t=t.replace("###F.config.ctrlname###",o),t.indexOf(o)){a=t.replace(o,r[o]);var l=this.parseAdType(a);if(!n[l.page])return t;var p=n[l.page][l.type];if(i="string"==typeof p?p:p[this.platform],!i)return;n[a]=i,n[i]=a,$(e).attr("data-deliver",a)}return i},e.prototype.loadImage=function(e,t){var a=e.material;this.send(a,function(){var a=this;return a.complete&&a.width&&a.height?(e.width=a.width,e.height=a.height,void t(e,!0)):void(a.onload=function(){e.width=a.width,e.height=a.height,t(e,!0),a.onload=null})})},e.prototype.send=function(e,t){if(e){var a=document.createElement("img");"function"==typeof t&&t.call(a),a.src=e}},e.prototype.debug=function(e){if(e){e="+ "+e+" +";for(var t=e.length,a=new Array(t+1).join("+"),i=[a,e,a],r=i.length,n=0;r>n;n++)console.log(i[n]+(n==r-1?"":"\n"))}},t.prototype=new e,t.prototype.constructor=t,t.prototype.getMaterials=function(e){var t=this,i=F.config.pub+"/interface/deliver",r=t.params(e),n=+new Date;F.request(i,r,function(i){i&&(t.debug('Request for "'+e.ap+'" coasts '+(+new Date-n)+"ms"),new a(i).handleJson())},{noAjax:!0});var o=1660==F.cookie.get("malliance")?"xiaomi":"other";window._czc&&window._czc.push(["_trackEvent","adRequest",e.ap,o])},t.prototype.params=function(e){var t={ap:"",deliver_ver:"v1",client:this.platform+"_web",oc:F.cookie.get("malliance")||"mweb",player_wh:"16:9",browser:"",vchannel:F.url.getQueryValue("channel")||0,mid:F.url.getQueryValue("mid")||0,plid:0,videoid:F.url.getQueryValue("vid")||0,isvip:0,url:encodeURIComponent(location.href),refer:encodeURIComponent(document.referrer),uid:0,fudid:F.cookie.get("fck")||"",dev:"",os:this.platform||"",osver:"",screen:""};return $.extend(t,e),t},a.prototype=new e,a.prototype.constructor=a,a.prototype.handleJson=function(){var e=this.parseAdType(this.adType),t=this[e.type+"Handler"];t&&(this.parsed=e,t.call(this))},a.prototype.formatMaterial=function(e){e.format=(e.format||"").toLowerCase();var t=this.parseAdType(this.adType)||{};return e.width="100%",e.height="t"==t.page?"auto":~~($(window).width()*e.mat_h/e.mat_w)+"px",e},a.prototype.getMaterialSize=function(e,t){switch(this.formatMaterial(e),e.format){case"jpg":case"png":case"gif":e.width&&e.height?t(e):this.loadImage(e,t);break;case"html":case"htm":t(e)}},a.prototype.report=function(e,t){var a=this,i=null,r=$(t).attr("data-deliver-item");i="string"==typeof r?[$(t)]:$("[data-deliver-item]",t),$.each(i,function(t,i){var r=$(i),n=r.attr("data-deliver-bind");if(1!=n){r.attr("data-deliver-bind",1);var o=e.monitor;if(["html","htm"].indexOf(e.format)<0){var l=o.click;if(l){var p=r.find("a");p=p.length?p:r,p.off("click").on("click",function(e){e.preventDefault(),e.stopPropagation(),$.each(l,function(e,t){a.send(t.url)}),window.open($(this).attr("href"),"_blank")})}}var d=o.view;d&&$.each(d,function(e,t){if(0==t.point){var i=t.url;"funshion"==t.provider&&(i.indexOf("&t=")<0?i+="&t=0":i=i.replace(/&t=[^&]*/,"&t=0")),a.send(i)}})}})},a.prototype.getLocation=function(e,t){var a=parseInt(e.location);return isNaN(a)||a>t||0>=a?{valid:!1,index:t-1}:{valid:!0,index:a-1}},a.prototype.fHandler=function(){var e=this,t=e.json,a=e.adType,r=$("[data-deliver="+a+"]")[0],n=$("li",r),o=$("li",r).length/3,l=[];$.each(t,function(t,p){var d=e.getLocation(p,o),c=d.index,s=new i(p,a).getHtml();d.valid?$(n[c+o-t]).before(s):$(n[2*o]).before(s),l.push(p.location),e.report(p,r)}),$.send(F.EventCenter.FOCUS_AD_LOADED,{total:t.length,locations:l})},a.prototype.bHandler=function(){var e=this,t=e.json,a=e.adType,r=$('[data-deliver="'+a+'"]');$.each(t,function(t,n){e.getMaterialSize(n,function(t){var n,o,l=e.getLocation(t,r.length),p=l.index,d=l.valid;n=r.eq(p),n&&(o=d?n.before(new i(t,a).getHtml()).prev():n.after(new i(t,a).getHtml()).next(),e.report(t,o))})})},a.prototype.nupHandler=function(){var e=this,t=e.json,a=e.adType,r=$('[data-deliver="'+a+'"]');$.each(t,function(t,n){e.getMaterialSize(n,function(t){var n,o,l=e.getLocation(t,r.length),p=l.index,d=l.valid;n=r.eq(p),n&&(o=d?n.before(new i(t,a).getHtml()).prev():n.after(new i(t,a).getHtml()).next(),e.report(t,o))})}),$.send(F.EventCenter.CLIENT_NEW_ENTRY_LOADED)},a.prototype.jsHandler=function(){{var e=this,t=e.json;e.adType}$.each(t,function(e,t){if("txt"==t.format&&"js"==t.ad_type&&t.material){var a=decodeURIComponent(t.material);$("body").append(a)}})},a.prototype.sHandler=function(){function e(e,t){if(1==e.closebt){var a='<div class="close" data-deliver-close="1"></div>';t.append(a),t.find("[data-deliver-close]").on("click",function(){t.hide()})}}var t=this,a=t.json,r=t.adType,n=$('[data-deliver="'+r+'"]');$.each(a,function(a,o){t.getMaterialSize(o,function(a){n.append(new i(a,r).getHtml()),e(o,n),t.report(a,n)})})},a.prototype.oHandler=function(){var e=this,t=e.json,a=e.adType,r=$('[data-deliver="'+a+'"]'),n="[data-list-item]",o="f-none";$.each(t,function(t,l){e.getMaterialSize(l,function(t){var l,p=$(n,r),d=e.getLocation(t,p.length),c=d.index,s=d.valid,h=p.eq(c);h&&(t.iframeHeight=h.height(),l=s?h.before(new i(t,a).getHtml()).prev():h.after(new i(t,a).getHtml()).next(),e.report(t,l)),$.each($(n,r),function(e){6>e?$(this).removeClass(o):$(this).addClass(o)})})})},a.prototype.iHandler=a.prototype.bHandler,i.prototype=new e,i.prototype.constructor=i,i.prototype.getHtml=function(){var e=this,t=e.material,a=t.format,i="";switch(a){case"pic":case"jpg":case"png":case"gif":i=e.drawHtml(t);break;case"html":case"htm":i=e.drawFrame(t)}return i},i.prototype.drawHtml=function(e){return F.tpl.compile(this.htmlTpl)(e)},i.prototype.drawFrame=function(e){var t=this.frameTpl,a="__FRAME__",i='<iframe width="100%" height="<%if iframeHeight%><% iframeHeight %><% else %>100%<%/if%>" frameborder="0" scrolling="no" allowtransparency="true" hspace="0" vspace="0" marginwidth="0" marginheight="0" src="<%material%>"></iframe>';return t=t.replace(a,F.tpl.compile(i)(e)),F.tpl.compile(t)(e)},F.ready(function(){setTimeout(r,200)})}();$(function(){function e(){var e=$("[data-hd-icons]"),r=F.user.userInfo&&F.user.userInfo.user_icon,u=r&&(r.orig||r.small),n=["<%if userId %>","<%if userIcon %>",'<a class="icon-avatar f-pdlr-12" href="/home"><img src="<%userIcon%>" alt=""></a>',"<%else%>",'<a class="i-avatar f-pdlr-12" href="/home"></a>',"<%/if%>","<%else%>",'<a class="i-avatar f-pdlr-12" href="/account/login"></a>',"<%/if%>"].join("");$(F.tpl.render(n)({userId:F.user.userId,userIcon:u})).appendTo(e)}function r(e){return e=e||{},$.extend({},{app_code:F.url.getQueryValue("app_code")||"mweb",timestamp:parseInt((new Date).getTime()/1e3)},e)}function u(e){return e=e||{},$.extend({},{cl:F.url.getQueryValue("app_code")||"mweb",ve:F.url.getQueryValue("version")||"",uc:F.url.getQueryValue("uc")||F.config.uc,si:F.config.malliance,ctime:parseInt((new Date).getTime()/1e3)},e)}F.user=F.user||{},F.user.update=function(r){try{var u=F.cookie.get("vipInfo"),n=F.cookie.get("user"),o=F.cookie.get("accInfo");u&&(u=JSON.parse(u)),n&&(n=JSON.parse(n)),o&&(o=JSON.parse(o)),F.user.userId=0,F.user.vipInfo=null,F.user.userInfo=null,!n||!r&&u&&o&&n.user_id==o.user_id?(F.user.userId=o.user_id,F.user.vipInfo=u,F.user.userInfo=$.extend(o,n),$.send(F.EventCenter.LOGIN_STATE_CHANGE),e()):F.user.verifyLogin(n)}catch(s){}},F.user.verifyLogin=function(e){F.request(F.config.pu+"/is_login",r(e),function(n){if(200!=n.code)return!1;var o=[];o.push(F.request(F.config.pu+"/user/getuserinfo",r(e))),o.push(F.request(F.config.pvip+"/v1/vip/userinfo",u(e))),$.when.apply($,o).done(function(e,r){return F.cookie.set("accInfo",JSON.stringify(e[0]),-1),F.cookie.set("vipInfo",JSON.stringify(r[0].data),-1),F.user.update(),!0}).always(function(e){return 200!=e.code?!1:void 0})})},F.user.loginOut=function(){F.cookie.del("user"),F.cookie.del("accInfo"),F.cookie.del("vipInfo"),F.user.update()},F.user.update()});!function(){function t(t){var t=decodeURIComponent(t),e="search_recent",i=F.htmlstore.get(e)||[];$.each(i,function(e,s){s.title==t&&i.splice(e,1)}),i.unshift({title:t}),i.splice(5,i.length-5),F.htmlstore.set(e,i)}F.namespace("search.store",t)}(),F.ready(function(){function t(t){var t=t||"";t=t?encodeURIComponent(t):"",t&&(window.location.href=e+"/search/?word="+t)}var e=F.platform.isIpad?"http://w3w3w.3fu3n.t3v3":"",i=$(".j-so-history-wrap"),s=$(".j-so-history-con"),a=["<% each data%>","<li class='item'><a href='"+e+"/search/?word=<% $value.title %>'><% $value.title %></a></li>","<% /each %>"].join(""),n="search_recent",h=F.htmlstore.get(n)||[],o=F.tpl.compile(a)({data:h});s.html(o),$(".j-so-his-clear").on("click",function(){s.html(""),F.htmlstore.remove(n),i.hide()}),h.length>0?i.show():i.hide(),$.each($(".j-search-input-wrap"),function(e,i){if(!i.instance){i.instance=1;var s=$(".j-input",i),a=$(".j-close",i),n=s.parent(),h=$(".submit",i),o=function(){s.val()?(a.show(),n.addClass("show-close")):(a.hide(),n.removeClass("show-close"))};s.on("keyup",function(e){"13"!=e.keyCode?o():t(s.val())}),s.on("click",function(){o()}),a.on("click",function(){s.val("").focus(),o()}),h.on("click",function(){t(s.val())})}}),F.platform.isIpad&&$(document).on("click",'a[href*="/search/"]',function(){var t=$(this).attr("href"),i=F.url.getQueryValue("word",t);return F.search.store(i),-1==t.indexOf("http://")?(window.location.href=e+t,!1):!0})}),F.ready(function(){var t=function(t){var e=this,i=0,s=200,a={},n=function(t,i){a[i]?e.callback(a[i]):F.request(t,F.config.pParam,function(t){e.callback(t),a[i]=t})};this.callback=t,this.search=function(t,e){clearTimeout(i),i=setTimeout(function(){n(t,e)},s)}},e=function(e){var i=F.config.ps+"/v5/search/suggestions",s=this;this.target=$(e);var a=function(t){return s.target.data(t)||""};this.input=$(a("input"),this.target),this.close=$(a("close"),this.target),this.suggestwrap=$(a("suggestwrap"),this.target),this.wrap=$(a("wrap"),this.target),this.replacewrap=$(a("replacewrap"),this.target),this.tplId="",a("tpl")&&(this.tplId=a("tpl"));var n=F.platform.isIpad?"http://":"";this.tpl=["<% each keys%>","<% if $index < 4 %>","<li class='item'><a href='"+n+"/search/?word=<% $value %>'><% $value %></a></li>","<% /if %>","<% /each %>"].join(""),this.onInputEvent=function(){var t=this.input.val();t?(i=F.config.ps+"/v5/search/suggestions?q="+t,s.ajax.search(i,t)):s.showHot()},this.init=function(){(this.input||!this.wrap)&&(this.input.on("input",$.proxy(this.onInputEvent,this)),this.input.on("focus",$.proxy(this.onInputEvent,this)),$.add(F.EventCenter.HEARBAR_SHOW,function(t){var e=t._args||{};"search"!=e.layer_id?s.hideAll():s.suggestwrap&&s.suggestwrap.show()}),$.add(F.EventCenter.SIDEBAR_SHOW,function(){s.hideAll()}))},this.showHot=function(){this.suggestwrap&&this.suggestwrap.show(),this.wrap&&this.wrap.hide(),this.replacewrap&&this.replacewrap.show(),this.checkShadow()},this.showAuto=function(){this.suggestwrap&&this.suggestwrap.show(),console.log(this.wrap),this.wrap&&this.wrap.show(),this.replacewrap&&this.replacewrap.hide(),this.checkShadow()},this.hideAll=function(){this.suggestwrap&&this.suggestwrap.hide()},this.checkShadow=function(){if("search_"===F.config.ctrlname){var t=this.suggestwrap.offset()||{top:0};t.top+=1,F.shadow.show(t.top,function(){s.hideAll()})}};var h=function(t){if(t&&t.keys&&t.keys.length>0){s.showAuto();var e="";e=s.tplId?F.tpl.renderFile(s.tplId,t):F.tpl.compile(s.tpl)(t),s.wrap&&s.wrap.html(e)}else s.input.val()?s.hideAll():s.showHot()};this.ajax=new t(h),this.init()};$.each($(".j-search"),function(t,i){new e(i)})});$(function(){var o=$("#m_gotop");if(o.length){var t=function(){$(window).scrollTop()>320?$(o).show():$(o).hide()};t(),$(window).off("scroll",t).on("scroll",t),o.off("click").click(function(o){o.stopPropagation()}),$("#refresh_btn").off("tap").tap(function(o){o.preventDefault(),o.stopPropagation(),location.reload()}),$("#gotop_btn").off("tap").tap(function(o){o.preventDefault(),o.stopPropagation(),F.pageScroll(0)})}});$(function(){var a=function(a){var e=$(".prev",a),r=$(".next",a),t=$(".back",a),c=$(".end",a),p=$(a),l=p.data("curpage"),s=p.data("totalpage"),d=p.data("pageurl"),n=p.data("keyword")||"",o="disable",i=function(a){a.removeClass(o),a.addClass(o)},f=function(a){a.removeClass(o)};1>=l&&i(e),l>=s&&i(r),l>1&&s>l&&(f(e),f(r));var h=Math.max(l-1,1),g=Math.min(l+1,s);e.hasClass("disable")?e.attr("href","javascript:;"):e.attr("href",d.replace("{page}",h).replace("{keyword}",n)),r.hasClass("disable")?r.attr("href","javascript:;"):r.attr("href",d.replace("{page}",g).replace("{keyword}",n)),t.attr("href",d.replace("{page}",1).replace("{keyword}",n)),c.attr("href",d.replace("{page}",s).replace("{keyword}",n))};$.each($(".m-spager"),function(e,r){new a(r)}),$("[data-pager-item]").on("click",function(){"curr"!==$(this).attr("data-pager-item")&&$(window).scrollTop(0)})});!function(){function e(e,i){if(!$(e).length)return!1;var t={lower:"http://3gimg.qq.com/html5/js/qb.js",higher:"http://jsapi.qq.com/get?api=app.share"};return this.config=i,this.target=$(e),this.ucAppList={sinaWeibo:["kSinaWeibo",11,"新浪微博"],weixin:["kWeixin",1,"微信好友"],weixinFriend:["kWeixinFriend","8","微信朋友圈"],QQ:["kQQ","4","QQ好友"],QZone:["kQZone","3","QQ空间"]},this.share=function(e){var i=s(this.config),t=i.title,n=i.url,a=i.desc,r=i.img,o=i.img_title,p=i.from;if(a=a||"来风行网看海量高清视频",~["sinaWeibo"].indexOf(e)?n=c(n,{malliance:2243}):~["weixin","weixinFriend"].indexOf(e)?n=c(n,{malliance:2244}):~["QQ","QZone"].indexOf(e)&&(n=c(n,{malliance:2245})),y){if(e=""==e?"":F.platform.isIphone?this.ucAppList[e][0]:this.ucAppList[e][1],"QZone"==e){var l="mqqapi://share/to_qzone?src_type=web&version=1&file_type=news&req_type=1&image_url="+r+"&title="+t+"&description="+a+"&url="+n+"&app_name="+p,h=document.createElement("div");h.style.visibility="hidden",h.innerHTML='<iframe src="'+l+'" scrolling="no" width="1" height="1"></iframe>',document.body.appendChild(k),setTimeout(function(){h&&h.parentNode&&h.parentNode.removeChild(k)},5e3)}"undefined"!=typeof ucweb?ucweb.startRequest("shell.page_share",[t,a,n,e,"","@"+p,""]):"undefined"!=typeof ucbrowser&&ucbrowser.web_share(t,a,n,e,"","@"+p,"")}else if(q&&!F.platform.isWeChat){e=""==e?"":this.ucAppList[e][1];var d={url:n,title:t,description:a,img_url:r,img_title:o,to_app:e,cus_txt:"请输入此时此刻想要分享的内容"};d=""==e?"":d,"undefined"!=typeof browser?"undefined"!=typeof browser.app&&q==g.qq.higher&&browser.app.share(d):"undefined"!=typeof window.qb&&q==g.qq.lower&&window.qb.share(d)}},this.html=function(){var e='<span data-app="sinaWeibo" class="j-share-btn weibo"><i></i>新浪微博</span><span data-app="weixin" class="j-share-btn weixin"><i></i>微信好友</span><span data-app="weixinFriend" class="j-share-btn weixin_timeline"><i></i>微信朋友圈</span><span data-app="QQ" class="j-share-btn qq"><i></i>QQ好友</span><span data-app="QZone" class="j-share-btn qzone"><i></i>QQ空间</span>';this.target.html(e)},this.isloadqqApi=function(){if(q){var e=v.qq<5.4?t.lower:t.higher,i=document.createElement("script"),n=document.getElementsByTagName("body")[0];i.setAttribute("src",e),n.appendChild(i)}},this.init=function(){this.isloadqqApi(),this.html();var e=this,i=$(".j-share-btn",this.target);$.each(i,function(i,t){$(t).off("tap").tap(function(){return e.share($(this).data("app")),window._czc&&window._czc.push(["_trackEvent","mshare",$(this).data("app")]),!1})}),$(".j-share-cancel",e.target).off("tap").tap(function(){e.target.hide()})},this.init(),this}function i(e){var i=e.split("."),t=parseFloat(i[0]+"."+i[1]);return t}function t(e,i){this.target=$(e),this.target.length&&($.extend(this,i),this.init())}function n(i,n){this.html(),$(document).on("click",i,function(){return $("body").addClass("share-state-show"),F.shadow.show(0,function(){$("body").removeClass("share-state-show")}),!1}),this.cancelBtn.on("click",a),$.add(F.EventCenter.PAGE_REFRESH,a);var s=Q?e:t;new s(this.btnWrap,n)}function a(){$("body").removeClass("share-state-show"),F.shadow.hide(),$.send(F.EventCenter.PLAYER_SHOW)}function o(e){return encodeURIComponent(e)}function p(e,i){if(!e||!i)return e;var t={}.toString.call(i).toLowerCase();return t.indexOf("array")>-1&&(i=i.join("|")),e.replace(new RegExp("("+i+")=([^&]+)","g"),"").replace(/(\?&+)/g,"?").replace(/(&+|\?)$/g,"").replace(/($)+/g,"$1")}function l(e,i){var t=d(e).split("&");if(t)for(var n=0;n<t.length;n++){var a=t[n].split("=");if(decodeURIComponent(a[0])==i)return!0}return!1}function c(e,i){if(!i)return e;var t=[];for(var n in i)l(n)&&p(n),t.push(n+"="+i[n]);return(e+"&"+t.join("&")).replace(/[&?]{1,2}/,"?")}function h(e){var i=/(?:\/([^?]*))/,t=i.exec(e);return null!=t&&t.length>1?t[1]:""}function d(e){return~e.indexOf("#")&&(e=e.substr(0,e.indexOf("#"))),~e.indexOf("?")?e.substr(e.indexOf("?")+1):""}function u(){if(window.wx){var e="",i=encodeURIComponent(location.href.split("#")[0]);x&&x.abort(),x=F.request(F.config.api+"/api/get_weixin_signa?url="+i,function(i){if(i&&200==i.status){var t=i.data,n=F.url.getQueryValue("debug")?!0:!1;e=t.appId;try{window.wx.config({debug:n,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),window.wx.showMenuItems({menuList:["menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:favorite","menuItem:share:QZone "]}),w()}catch(a){}}})}}function f(){var e=s(),i=c(e.url,{malliance:2244});return{title:e.title,desc:e.desc,link:i,imgUrl:e.img,type:e.type||"video",dataUrl:i}}function m(){if(F.platform.isWeChat){var e=document.createElement("script");$(e).on("load error",function(){u()}),e.src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js",document.head.appendChild(e)}}function w(){var e=f();window.wx&&wx.ready(function(){wx.onMenuShareTimeline(e),wx.onMenuShareAppMessage(e),wx.onMenuShareQQ(e),wx.onMenuShareWeibo(e)})}var b=navigator.appVersion,g={qq:{forbid:0,lower:1,higher:2},uc:{forbid:0,allow:1}},v={uc:"",qq:""},q=b.split("MQQBrowser/").length>1?g.qq.higher:g.qq.forbid,y=b.split("UCBrowser/").length>1?g.uc.allow:g.uc.forbid,Q=!1;v.qq=q?i(b.split("MQQBrowser/")[1]):0,v.uc=y?i(b.split("UCBrowser/")[1]):0,q&&v.qq<5.4&&F.platform.isIos||q&&v.qq<5.3&&F.platform.isAndroid?q=g.qq.forbid:q&&v.qq<5.4&&F.platform.isAndroid?q=g.qq.lower:y&&(v.uc<10.2&&F.platform.isIos||v.uc<9.7&&F.platform.isAndroid)&&(y=g.uc.forbid),Q=y||q,t.prototype.share=function(e){var i=s(this.config),t=i.url,n=o(i.title+" - 风行网"),a=o(i.img);switch(e){case"sinaWeibo":var r=window.screen,p="http://service.weibo.com/share/share.php?appkey=3704997029&ralateUid=1704741001&url=";p+=o(c(t,{malliance:2243}))+"&time="+ +new Date+"&title="+n+"&content=utf-8&pic="+a,window.open(p,"_self","width=640,height=580,toolbar=no,menubar=no,scrollbars=no,location=yes,resizable=no,status=no,left="+parseInt((r.width-640)/2)+",top="+parseInt((r.height-580)/2));break;case"QQ":var l="http://openmobile.qq.com/api/check?page=shareindex.html&action=shareToQQ",h=o(c(t,{malliance:2245})),d="&page_url="+h+"&targetUrl="+h+"&summary="+o(i.desc)+"&title="+n+"&imageUrl="+a+"&site="+o(i.from)+"&appId=100247639&status_os=0&sdkv=0&sdkp=0&style=9"+(i.desc?"&desc="+o(i.desc):"");l+=d,window.open(l,"_self","scrollbars=no,width=600,height=450,left=320,top=180,status=no,resizable=yes");break;case"QQweibo":var u=o(c(t,{malliance:2245})),f="6df7d7131d5c4d5b817ac1f06637b80b",m="http://v.t.qq.com/share/share.php?";m+="title="+n+"&url="+u+"&appkey="+f+"&pic="+a,window.open(m,"_self","转播到腾讯微博","width=700, height=580, top=180, left=320, toolbar=no, menubar=no, scrollbars=no, location=yes, resizable=no, status=no");break;case"QZone":var l="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=",d=o(c(t,{malliance:2245}))+"&title="+o(i.title+" - 风行网")+"&pics="+o(i.img)+(i.desc?"&summary="+o(i.desc):"");l+=d,window.open(l,"_blank","scrollbars=no,width=600,height=450,left=320,top=180,status=no,resizable=yes");break;case"weixin":var w=$("#wechatTipshadow");if(!w.length){var b='<section id="wechatTipshadow" class="m-vx-shadow z-root"><p class="f-cb"><i class="i-guide"></i></p><div class="con"><p class="tit">分享到微信，请点击右上角 <i class="i-wx-top-btn"></i></p><p>选择 <i class="i-forward"></i>【发送给朋友】</p><p>或 <i class="i-pengyouquan"></i>【分享到朋友圈】</p></div></section>',g='<section id="wechatTipshadow" class="m-vx-shadow bro z-root"><div class="con"><p class="tit">分享到微信</p><p><i class="num">1</i>先点击浏览器的分享按钮</p><p><i class="num">2</i>再选择<i class="i-forward"></i>发给微信指定的【朋友】</p><p><i class="num" style="visibility:hidden"></i>或 <i class="i-pengyouquan"></i>分享到微信【朋友圈】</p></div></section>',v=F.platform.isWeChat?b:g;w=$(v),w.appendTo("body")}w.show(),$.send(F.EventCenter.PLAYER_HIDE),w.off("click").click(function(e){e.preventDefault(),e.stopPropagation(),w.hide(),$.send(F.EventCenter.PLAYER_SHOW)})}},t.prototype.init=function(){this.html();var e=$(".j-share-btn",this.target),i=this;$.each(e,function(e,t){$(t).off("click").click(function(){return i.share($(this).data("app")),window._czc&&window._czc.push(["_trackEvent","mshare",$(this).data("app")]),!1})})},t.prototype.html=function(){var e=(F.platform.isWeChat?'<span data-app="weixin" class="j-share-btn weixin"><i></i>微信好友</span><span data-app="weixin" class="j-share-btn weixin_timeline"><i></i>微信朋友圈</span>':"")+'<span data-app="sinaWeibo" class="j-share-btn weibo"><i></i>新浪微博</span><span data-app="QZone" class="j-share-btn qzone"><i></i>QQ空间</span>'+(F.platform.isAndroid?'<span data-app="QQ" class="j-share-btn qq"><i></i>QQ好友</span>':'<span data-app="QQweibo" class="j-share-btn qqweibo"><i></i>腾讯微博</span>');this.target.html(e)},n.prototype.html=function(){this.root=$('<div id="#shareListWrap" class="m-share-list z-act clearfix"><p class="title">分享到</p><div class="btns"></div><a class="cancel j-share-cancel">取消</a></div>'),$("body").append(this.root),this.btnWrap=$(".btns",this.root),this.cancelBtn=$(".j-share-cancel",this.root)},F.namespace("share",n);var x=null;m(),$.add(F.EventCenter.PAGE_REFRESH,w),F.namespace("updateWxShare",w)}();!function(){var e="#GROUP#",t="#N#",a=function(a,s){if(this.target=$(a),this.options=$.extend({pageReverse:0,pageSize:10,pageStyle:t,pageItems:[],current:"current"},s),this.pageItems=$(this.options.pageItems),this.target.length&&this.pageItems.length){if(this.options.pageStyle!=e){if(this.pageSize=this.options.pageSize,this.pageNum=Math.ceil(this.pageItems.length/this.pageSize),this.pageNum<=1)return}else{var i=[],r="";if(this.pageItems.each(function(e,t){r=$(t).attr("data-group"),-1==$.inArray(r,i)&&i.push(r)}),this.pageGroupArr=i,i.length<=1)return}this.renderPage(),this.updateCurPage()}};a.prototype.renderPage=function(){var t=this.options.pageStyle,a=this.options.pageReverse,s=[];if(t==e)for(var i=0,r=this.pageGroupArr.length;r>i;i++){var p='<a data-pgn="'+this.pageGroupArr[i]+'">'+this.pageGroupArr[i]+"</a>";s.push(p)}else if(t.indexOf("#N#")>-1&&t.indexOf("#M#")>-1)for(var g=this.pageItems.length,o=this.options.pageSize,i=0,r=this.pageNum;r>i;i++){var h=$.trim($(this.pageItems[Math.max(0,Math.min(i*o,g-1))]).text()),n=$.trim($(this.pageItems[Math.max(0,Math.min((i+1)*o-1,g-1))]).text()),p='<a data-pgn="'+(i+1)+'">'+t.replace("#M#",h).replace("#N#",n)+"</a>";s.push(p)}else for(var i=1,r=this.pageNum;r>=i;i++){var p='<a data-pgn="'+i+'">'+t.replace("#N#",(a?r-i+1:i)+"")+"</a>";s.push(p)}this.target.html('<div class="m-pager">'+s.join("")+"</div>");var u=this;$("a",u.target).click(function(e){var t=$(e.target),a=t.data("pgn")||0;a&&u.gotoPage(a,!0)})},a.prototype.updateCurPage=function(){if(!(this.pageNum<=1))if(this.options.pageStyle!=e){var t=this.pageItems.filter(this.options.current).index();this.gotoPage(Math.ceil((t+1)/this.pageSize))}else{var a=this.pageItems.filter(this.options.current).data("group")||this.pageGroupArr[0];this.gotoPage(a)}},a.prototype.gotoPage=function(t,a){var s=this,i=this.options.pageStyle==e;i||(t=Math.max(1,Math.min(parseInt(t),s.pageNum)));var r=$("[data-pgn]",s.target).removeClass("current").filter('[data-pgn="'+t+'"]');if(r.addClass("current"),!a){var p=r.parents(".m-pager");p.scrollLeft(parseInt(r.position().left)+p.scrollLeft()-(p.width()-r.width())/2)}for(var g=0,o=s.pageItems.length;o>g;g++){var h=$(s.pageItems[g]);!i&&g>(t-1)*s.pageSize-1&&g<t*s.pageSize?h.hasClass("f-none")||h.show():i&&$(s.pageItems[g]).data("group")==t?h.hasClass("f-none")||h.show():h.hasClass("f-none")||h.hide()}s.currentPage=t,F.page.lazyLoadImage()},a.prototype.dispose=function(){F.debug("pager dispose")},F.namespace("pager",a)}();!function(){"use strict";window.fullScreenApi={enabled:!1,screenChange:"",isFullScreen:!1,request:function(){},exit:function(){},toggle:function(){}};var e="undefined"!=typeof module&&module.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,l=function(){for(var e,n,l=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],r=0,t=l.length,u={};t>r;r++)if(e=l[r],e&&e[1]in document){for(r=0,n=e.length;n>r;r++)u[l[0][r]]=e[r];return u}return!1}(),r={request:function(e){var r=l.requestFullscreen;e=e||document.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[r]():e[r](n&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){document[l.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},raw:l};return l?(Object.defineProperties(r,{isFullScreen:{get:function(){return!!document[l.fullscreenElement]}},element:{enumerable:!0,get:function(){return document[l.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!document[l.fullscreenEnabled]}},screenChange:{enumerable:!0,get:function(){return l.fullscreenchange}}}),void(e?module.exports=r:window.fullScreenApi=r)):void(e&&(module.exports=!1))}(),document.mozEcName=document.mozEcName||[],document.mozEcName.push("f83");!function(){function t(t){t&&(t.stopPropagation(),t.preventDefault())}function e(t){if(!t)return 0;var e=t.split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}function i(){var t=[].slice.call(arguments);t.unshift("mplayer_new"),t.unshift("_trackEvent"),window._czc&&window._czc.push(t)}var n=0,o={send:function(t){t&&((new Image).src=t)}},r={LOAD:"pre_ad_item_load",START:"pre_ad_item_start",END:"pre_ad_item_end",PLAY:"pre_ad_item_play",PAUSE:"pre_ad_item_pause",ERROR:"pre_ad_item_error",TIME_UPDATE:"pre_ad_item_time_update",SCREENCHANGE:"pre_ad_item_SCREENChange"},s=["mp4","img"],a=function(t,e){this.target=t,this.root=this.target.parent(),this.adData=$.extend({material:"",time:0,duration:"",link:"",format:"",click_text:"了解详情",monitor:{click:[],view:[],error:[]}},e),this.elementID=n++,this._initMaterial(),this._listenUser()};a.prototype.play=function(t){if(!this.target||!this.adData.material||-1==$.inArray(this.adData.format,s))return void this._onAdItemError();if("Next"==window.playNewVideo&&this.adData.format==s[1])return this._onAdItemError();switch(this.adData.format){case s[0]:this.video[0].play(),F.platform.isQQBrowser&&F.platform.isIphone&&this.video.show();break;case s[1]:this.imgLoad?this._imgPlay():this.isPlay=!0,t||this.video[0].play(),F.debug("img play videoAutoStart",t)}clearTimeout(this.endTimer);var e=this;this.endTimer=setTimeout(function(){e._onAdItemError()},1e3*(this.adData.duration-this.adData.time)*15)},a.prototype.pause=function(){switch(this.adData.format){case s[0]:this.video[0].pause();break;case s[1]:clearInterval(this.imgTimer)}},a.prototype.dispose=function(){F.debug("adItem dispose"),clearTimeout(this.endTimer),clearInterval(this.imgTimer),this._unListenUser(),this._disposeMaterial(),this.target.html(""),$.send(F.EventCenter.PLAYER_SHOW)},a.prototype._initMaterial=function(){switch($(this.target).html(this._tpl().replace(/#elementID#/gi,this.elementID)),this.container=$("#m-h5v-qt-"+this.elementID),this.soundBtn=$("#m-h5v-qt-sound-"+this.elementID),this.timeBtn=$("#m-h5v-qt-time-"+this.elementID),this.fullBtn=$("#m-h5v-qt-full-"+this.elementID),this.detailBtn=$("#m-h5v-qt-detail-"+this.elementID),this.video=this.root.find("video"),this.img=$("#m-h5v-qt-img-"+this.elementID),F.platform.isIos&&(this.soundBtn.hide(),this.fullBtn.hide()),this.adData.format==s[1]&&this.soundBtn.hide(),this.video[0]&&this.video[0].muted?this.soundBtn.addClass("sound-mute-btn"):this.soundBtn.removeClass("sound-mute-btn "),this.root.hasClass("m-h5v-fullscreen")?this.fullBtn.addClass("unfull-btn"):this.fullBtn.removeClass("unfull-btn"),this._pointArr=[],this.adData.format){case s[0]:this._listenVideo(),this.video[0]||this._onAdError(),this.video[0].src=this.adData.material,this.video[0].load(),this.curTime=0,this.adStart=!1,this.timePoints=[];break;case s[1]:this._listenImg(),this.img.attr("src",this.adData.material)}$(document).on(fullScreenApi.screenChange,$.proxy(this._onAdItemScreenChange,this))},a.prototype._disposeMaterial=function(){switch(this.adData.format){case s[0]:this._unlistenVideo();break;case s[1]:this._unListenImg()}$(document).off(fullScreenApi.screenChange,$.proxy(this._onAdItemScreenChange,this))},a.prototype._tpl=function(){var t=['<div id="m-h5v-qt-#elementID#" class="m-h5v-qt">',"img"==this.adData.format?'<img id="m-h5v-qt-img-#elementID#" class="img-wrap"/>':"",'<div class="top">','<span id="m-h5v-qt-sound-#elementID#" class="btn sound"><i></i></span>','<span class="btn time-wrap">广告 <b id="m-h5v-qt-time-#elementID#" class="time">15</b></span>',"</div>",'<div class="bottom">','<span id="m-h5v-qt-full-#elementID#" class="btn full-btn"><i></i></span>','<span id="m-h5v-qt-detail-#elementID#" class="btn detail f-pdlr-10"><b class="detail-btn">了解详情<i>></i></b></span>',"</div>","</div>"].join("");return t},a.prototype._listenVideo=function(){if(!this.video)return this._onAdItemError();var t=this.video;t.on("loadedmetadata",$.proxy(this._videoEventHandler,this)),t.on("play",$.proxy(this._videoEventHandler,this)),t.on("pause",$.proxy(this._videoEventHandler,this)),t.on("volumechange",$.proxy(this._videoEventHandler,this)),t.on("timeupdate",$.proxy(this._videoEventHandler,this)),t.on("ended",$.proxy(this._videoEventHandler,this)),t.on("error",$.proxy(this._videoEventHandler,this))},a.prototype._unlistenVideo=function(){if(this.video){var t=this.video;t.off("loadedmetadata",$.proxy(this._videoEventHandler,this)),t.off("play",$.proxy(this._videoEventHandler,this)),t.off("pause",$.proxy(this._videoEventHandler,this)),t.off("volumechange",$.proxy(this._videoEventHandler,this)),t.off("timeupdate",$.proxy(this._videoEventHandler,this)),t.off("ended",$.proxy(this._videoEventHandler,this)),t.off("error",$.proxy(this._videoEventHandler,this))}},a.prototype._videoEventHandler=function(t){var e=this,i=this.video;if(i[0]&&t)switch(F.debug("adItem _videoEventHandler:"+t.type),t.type){case"loadedmetadata":isNaN(parseInt(i[0].duration))||e._onAdItemLoad();break;case"play":e._onAdItemPlay();break;case"pause":e._onAdItemPause();break;case"volumechange":e._onAdItemVolumeChange();break;case"timeupdate":if(Math.abs(i[0].currentTime-this.curTime)>0){e.adStart||($.send(F.EventCenter.PLAYER_SHOW),clearTimeout(e.endTimer),e.adStart=!0,e.adData.duration=Math.ceil(i[0].duration),e._onAdItemStart());var n=parseInt(i[0].currentTime,10);-1==$.inArray(n,e.timePoints)&&(e.timePoints.push(n),e.adData.time=n,e._onAdItemTimeUpdate())}this.curTime=i[0].currentTime;break;case"ended":e._onAdItemEnd();break;case"error":i[0].src&&i[0].error&&1!=i[0].error.code&&e._onAdItemError()}},a.prototype._listenImg=function(){this.img.on("load",$.proxy(this._imgEventHandler,this)),this.img.on("error",$.proxy(this._imgEventHandler,this))},a.prototype._unListenImg=function(){this.img.off("load",$.proxy(this._imgEventHandler,this)),this.img.off("error",$.proxy(this._imgEventHandler,this))},a.prototype._imgEventHandler=function(t){switch(this._unListenImg(),t.type){case"load":this._onAdItemLoad(),this.img.css({background:"url("+this.img.attr("src")+") center center no-repeat","background-size":"100% auto"}),this.img.attr("src","http://img.funshion.com/img/blank.gif"),this.imgLoad=!0,this.isPlay&&this._imgPlay();break;case"error":this._onAdItemError()}},a.prototype._imgPlay=function(){this._onAdItemStart();var t=this;clearInterval(t.imgTimer),this.imgTimer=setInterval(function(){return t.adData.time>=t.adData.duration?(clearInterval(t.imgTimer),void t._onAdItemEnd()):(t.adData.time++,void t._onAdItemTimeUpdate())},1e3)},a.prototype._listenUser=function(){this.soundBtn.on("click",$.proxy(this._onUserVolumeChange,this)),this.fullBtn.on("click",$.proxy(this._onUserScreenChange,this)),this.detailBtn.on("click",$.proxy(this._onUserClick,this)),this.container.on("click",$.proxy(this._onUserContainerClick,this))},a.prototype._unListenUser=function(){this.soundBtn&&this.soundBtn.off("click",$.proxy(this._onUserVolumeChange,this)),this.fullBtn&&this.fullBtn.off("click",$.proxy(this._onUserScreenChange,this)),this.detailBtn&&this.detailBtn.off("click",$.proxy(this._onUserClick,this)),this.container&&this.container.off("click",$.proxy(this._onUserContainerClick,this))},a.prototype._onUserScreenChange=function(e){t(e),this.root.hasClass("m-h5v-fullscreen")?this.fullBtn.removeClass("unfull-btn"):this.fullBtn.addClass("unfull-btn"),$(this).trigger(r.SCREENCHANGE)},a.prototype._onUserClick=function(e){return t(e),this.adData.link?(window.open(this.adData.link),void this._sendClickLog()):!1},a.prototype._onUserVolumeChange=function(e){t(e),this.video[0]&&(this.video[0].muted=!this.video[0].muted)},a.prototype._onUserContainerClick=function(e){switch(t(e),this.adData.format){case s[0]:this.play();break;case s[1]:this._onUserClick()}},a.prototype._onAdItemLoad=function(){clearTimeout(this.endTimer),$(this).trigger(r.LOAD)},a.prototype._onAdItemStart=function(){clearTimeout(this.endTimer),F.debug("AdItem material",this.adData.material),this.adData.format==s[1]&&$.send(F.EventCenter.PLAYER_HIDE),this._sendStartLog(),this.timeBtn.html(this.adData.duration),this.container.show(),$(this).trigger(r.START)},a.prototype._onAdItemEnd=function(){this.adData.format==s[1]&&$.send(F.EventCenter.PLAYER_SHOW),this._sendEndLog(),this.dispose(),$(this).trigger(r.END)},a.prototype._onAdItemError=function(){this._sendErrorLog(),this.dispose(),$(this).trigger(r.ERROR)},a.prototype._onAdItemPlay=function(){$(this).trigger(r.PLAY)},a.prototype._onAdItemPause=function(){clearTimeout(this.endTimer),$(this).trigger(r.PAUSE)},a.prototype._onAdItemTimeUpdate=function(){var t=this.adData;return t.duration-t.time<=0?void this._onAdItemEnd():(this.timeBtn.html(t.duration-t.time),this._sendPointLog(parseInt(this.adData.time)),void $(this).trigger(r.TIME_UPDATE))},a.prototype._onAdItemVolumeChange=function(){this.video[0]&&(this.video[0].muted?this.soundBtn.addClass("sound-mute-btn"):this.soundBtn.removeClass("sound-mute-btn "))},a.prototype._onAdItemScreenChange=function(){fullScreenApi.supportsFullScreen&&(fullScreenApi.isFullScreen()?self.fullBtn.addClass("unfull-btn"):self.fullBtn.removeClass("unfull-btn"))},a.prototype._sendClickLog=function(){F.debug("adItem _sendClickLog");for(var t=this.adData.monitor.click,e=0,i=t.length;i>e;e++)o.send(t[e].url)},a.prototype._sendStartLog=function(){F.debug("adItem _sendStartLog"),this._sendPointLog(0)},a.prototype._sendEndLog=function(){F.debug("adItem _sendEndLog"),this._sendPointLog(-1)},a.prototype._sendErrorLog=function(){F.debug("adItem _sendErrorLog")},a.prototype._sendPointLog=function(t){if(!(this._pointArr.indexOf(t)>-1)){this._pointArr.push(t);var e=this.adData.monitor.view.filter(function(e){return e.point===t?!0:!1});if(e.length){if(F.debug("adItem _sendPointLog"),-1===t){try{t=parseInt(this.adData.duration,10)}catch(i){}t||(t=this.adData.time)}for(var n="",r=0,s=e.length;s>r;r++)n=e[r].url,"funshion"==e[r].provider&&(n+=(n.indexOf("?")>0?"&":"?")+"t="+1e3*t),o.send(n)}}};var d={deliver_ver:"v1",ap:F.platform.isIphone?"m_ipe_opr_v1":"m_aopr_v1",client:(F.platform.isIphone?"iphone":"android")+"_web",player_wh:"16:9",browser:"",vchannel:0,mid:0,plid:0,videoid:0,isvip:0,url:encodeURIComponent(location.href),refer:encodeURIComponent(document.referrer),uid:0,fudid:F.cookie.get("fck")||"",dev:"",os:"",osver:"",screen:"",oc:F.cookie.get("malliance")||"mweb"},h=function(t,e){this.target=t,this.option=$.extend({},d,e),F.platform.isUc&&(this.option.browser="uc"),this.target&&(this.elementID=n++,this.isPlay=!1,this.adStart=!1,this.xhr=null,this._loadAd())};h.prototype._loadAd=function(){var t=this,e=F.config.pubPlayer+"/interface/deliver";this.xhr=F.request(e,t.option,function(e){return e&&e.length&&e[0].ad_list.length?(t.adConfigLoaded=!0,t.adList=e[0].ad_list,t.adItemIndex=0,void t._initAd()):t._onAdError()},{timeout:3e3,error:$.proxy(t._onAdError,t)})},h.prototype._initAd=function(){var t=this.adList[this.adItemIndex];switch(this.adData=t,t.ad_type){case"vast":case"vast_jesgoo":if(!t.partnerurl)return this._onAdError();var e=this,i=$(e.target).parent(),n={};"vast_jesgoo"==t.ad_type&&(n.w=i.width(),n.h=i.height(),n.os=F.platform.isIos?"ios":"android",n.title=document.title,n.keywords=$('meta[name="keywords"]').attr("content")||""),this.xhr=F.request(t.partnerurl,n,function(i){var n=e._formatVast(i);return n?(o.send(t.vast_receive),void e._initAdItem(n)):void e._onAdError()},{dataType:"xml",timeout:3e3,error:function(){e._onAdError()}});break;case"funshion":default:t.time&&!t.duration&&(t.duration=t.time,t.time=0),$.inArray(t.format,["jpg","png","gif"])>-1&&(t.format=s[1]),this._initAdItem(t)}},h.prototype._initAdItem=function(t){F.debug("adPlayer _initAdItem"),this.adItem=new a(this.target,t),this._listenAdItem(),this.isPlay&&this.adItem.play(this.videoAutoStart),i("adInterfaceValid",this.adData.ad_type),this.adFormat=t.format},h.prototype._formatVast=function(t){var i=$("VAST > Error");if(i.length)return null;var n=$("Ad InLine Creative Linear",t);try{var o=n.find("MediaFile")[0].childNodes[0].nodeValue,r=n.find("Duration")[0].childNodes[0].nodeValue,a=n.find("ClickThrough")[0].childNodes[0].nodeValue,d=n.find("ClickTracking"),h=n.find("Tracking"),l=n.find("MediaFile").attr("type"),m="",p=this.adData.monitor||{view:[],click:[]};return d.each(function(t,e){p.click.push({url:e.childNodes[0].nodeValue,provider:"vast"})}),h.each(function(t,i){var n=0,o=$(i).attr("event"),r=$(i).attr("offset");-1!=$.inArray(o,["start","progress","complete"])&&(n="start"==o?0:"complete"==o?-1:e(r),p.view.push({point:n,url:i.childNodes[0].nodeValue,provider:"vast"}))}),"video/mp4"==l?m=s[0]:~l.indexOf("image/")&&(m=s[1]),{material:o,duration:e(r),link:a,format:m,monitor:p}}catch(u){return null}},h.prototype._listenAdItem=function(){$(this.adItem).on(r.START,$.proxy(this._onAdStart,this)),$(this.adItem).on(r.END,$.proxy(this._onAdEnd,this)),$(this.adItem).on(r.ERROR,$.proxy(this._onAdError,this)),$(this.adItem).on(r.PLAY,$.proxy(this._onAdPlay,this)),$(this.adItem).on(r.PAUSE,$.proxy(this._onAdPause,this)),$(this.adItem).on(r.SCREENCHANGE,$.proxy(this._onAdScreenChange,this))},h.prototype._unListenAdItem=function(){$(this.adItem).off(r.START,$.proxy(this._onAdStart,this)),$(this.adItem).off(r.END,$.proxy(this._onAdEnd,this)),$(this.adItem).off(r.ERROR,$.proxy(this._onAdError,this)),$(this.adItem).off(r.PLAY,$.proxy(this._onAdPlay,this)),$(this.adItem).off(r.PAUSE,$.proxy(this._onAdPause,this))},h.prototype._onAdStart=function(){0==this.adItemIndex&&(F.debug("adPlayer _onAdStart"),this.adStart=!0,$(this).trigger(F.EventCenter.PRE_AD_START),i("adStart",this.adData.ad_type))},h.prototype._onAdError=function(){return this.adItem&&this.adItemIndex!=this.adList.length-1?void this._playNextAd():(F.debug("adPlayer _onAdError"),void $(this).trigger(F.EventCenter.PRE_AD_ERROR))},h.prototype._onAdEnd=function(){return this.adItemIndex==this.adList.length-1?(F.debug("adPlayer _onAdEnd"),void $(this).trigger(F.EventCenter.PRE_AD_END)):void this._playNextAd()},h.prototype._onAdPlay=function(){F.debug("adPlayer _onAdPlay"),$(this).trigger(F.EventCenter.PRE_AD_PLAY)},h.prototype._onAdPause=function(){F.debug("adPlayer _onAdPause"),$(this).trigger(F.EventCenter.PRE_AD_PAUSE)},h.prototype._onAdScreenChange=function(){$(this).trigger(F.EventCenter.PRE_AD_SCREENCHANGE)},h.prototype._playNextAd=function(){this.adItemIndex++,this.adItem.dispose(),this._unListenAdItem(),this._initAd()},h.prototype.play=function(t){this.isPlay=!0,this.videoAutoStart=t,this.adItem&&this.adItem.play(t)},h.prototype.pause=function(){this.adItem&&this.adItem.pause()},h.prototype.dispose=function(){this.adConfigLoaded=!1,this.isPlay=!1,this.videoAutoStart=!1,this.adItem&&(this._unListenAdItem(),this.adItem.dispose(),this.adItem=null),this.xhr&&(this.xhr.abort(),this.xhr=null)},F.namespace("player","adPlayer",h)}(),document.mozEcName=document.mozEcName||[],document.mozEcName.push("532");!function(){function t(t){var e,i,o,n,a,r,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=t.length,i=0,e="";o>i;){if(n=255&t.charCodeAt(i++),i==o){e+=s.charAt(n>>2),e+=s.charAt((3&n)<<4),e+="==";break}if(a=t.charCodeAt(i++),i==o){e+=s.charAt(n>>2),e+=s.charAt((3&n)<<4|(240&a)>>4),e+=s.charAt((15&a)<<2),e+="=";break}r=t.charCodeAt(i++),e+=s.charAt(n>>2),e+=s.charAt((3&n)<<4|(240&a)>>4),e+=s.charAt((15&a)<<2|(192&r)>>6),e+=s.charAt(63&r)}return e}function e(t){for(var e,i,o,n,a=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1),r=0,s=t.length,d="";s>r;){do e=a[255&t.charCodeAt(r++)];while(s>r&&-1==e);if(-1==e)break;do i=a[255&t.charCodeAt(r++)];while(s>r&&-1==i);if(-1==i)break;d+=String.fromCharCode(e<<2|(48&i)>>4);do{if(o=255&t.charCodeAt(r++),61==o)return d;o=a[o]}while(s>r&&-1==o);if(-1==o)break;d+=String.fromCharCode((15&i)<<4|(60&o)>>2);do{if(n=255&t.charCodeAt(r++),61==n)return d;n=a[n]}while(s>r&&-1==n);if(-1==n)break;d+=String.fromCharCode((3&o)<<6|n)}return d}function i(t){var i="",n="",a="";return 28==t.length&&t.lastIndexOf("0")==t.length-1?(i=t.substr(0,27)+"=",n=e(i),a=o(n),r(a)):(i=t.substr(2,t.length-2),n=e(i),o(n))}function o(t){for(var e="",i=0;i<t.length;){var o=t.charCodeAt(i++),r=t.charCodeAt(i++);if(e+=a(n(o,r).z1),e+=a(n(o,r).z2),i==t.length-1){e+=a(t.charCodeAt(i));break}}return e}function n(t,e){var i=document.mozEcName,o=256,n=[0,0,0,0],a=[],r={};$.each(i,function(t,e){r[e]||(r[e]=!0,a.push(e))});for(var s=0,d=a.length;d>s;s++)n[parseInt(a[s].substr(a[s].length-1))]=parseInt(a[s].substr(0,a[s].length-1),16);return{z1:(t*n[0]+e*n[2])%o,z2:(t*n[1]+e*n[3])%o}}function a(t){return String.fromCharCode(t)}function r(t){var e,i,o,n="";for(t+="",e=0,i=t.length;i>e;e++)o=t.charCodeAt(e).toString(16).toLocaleUpperCase(),n+=o.length<2?"0"+o:o;return n}function s(t){for(var e,o,n=0;!e&&2>n;){if(e=i(t.infohash),41==e.length&&/^[0-9a-f]*$/gi.test(e)){for(var a=(e.substr(0,40),0),r=0,s=e.length-1;s>r;r++)a+=parseInt(parseInt(e.substr(r,1),16),10);var d=15&a;d.toString(16).toUpperCase()==e.substr(40)&&(o={hashid:e.substr(0,40),token:i(t.token)})}o||(e=null,t.infohash=t.infohash_prev,t.token=t.token_prev),n++}return o}function d(){try{return window.self!==window.top}catch(t){return!0}}function l(){return"2242"==F.config.malliance}function p(){if(!F.cookie.get("_plIn")&&!_){var t=$("#_plIn");if(!t.length){t=$('<div id="_plIn" class="m-h5v-intercept z-act clearfix" block="playerIntercept"><a id="_plClose" href="javascript:;"><i class="i-close"></i></a><div class="fx"><p class="tit">福利大放送</p><p class="desc">海量性感、热辣美女温暖你！</p></div><div class="fx poster-wrap"><img class="poster" src="/static/img/v12/common/player/img/inter_cf0408349.jpg"></div><div class="fx"><a class="j-install-btn app-btn">立即下载APP</a></div></div>');var e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;$(document.body).append(t),t.css({top:(i-t.height())/2,left:(e-t.width())/2,width:t.width(),height:t.height()});var o=t.find(".j-install-btn");F.app.download.bind(o),o.click(function(){setTimeout(function(){u("intercept","app")},500)}),$("#_plClose").on("click",function(){h(),u("intercept","close")})}t.show(),$.send(F.EventCenter.PLAYER_HIDE),u("intercept","show"),F.cookie.set("_plIn",1,1/1440*5),F.cookie.get("_plIn")||(_=!0)}}function h(){$("#_plIn").hide(),$.send(F.EventCenter.PLAYER_SHOW)}function c(t){var e=String(Math.floor(t%60)),i=parseInt(t/3600),o=String(Math.floor(t-3600*i-Number(e))/60);return 1==e.length&&(e="0"+e),1==o.length&&(o="0"+o),(i>0?String(i)+":":"")+o+":"+e}function u(){var t=[].slice.call(arguments);t.unshift("mplayer_new"),t.unshift("_trackEvent"),window._czc&&window._czc.push(t)}function f(t){t&&(t.stopPropagation(),t.preventDefault(),F.debug("stopEvent"))}function m(t,e){if(T){var i,o,n,a,r;a=function(){$.send(F.EventCenter.PLAYER_SHOW),u("pauseAd","close"+T)},r=function(){$.send(F.EventCenter.PLAYER_HIDE),u("pauseAd","show"+T)},"show"==t?u("pauseAd","triggle"+T):$.send(F.EventCenter.PLAYER_SHOW),T==D?(o=window.bdInsertApi,i="show"==t?"triggleAd":"closeAd",n=I):T==S&&(o=window[k+"_api"],"show"==t?(i="show",n=e):i="hide"),o&&o[i]&&o&&o[i]&&o[i](n,a,r)}}function v(t,e,i){var o,n,a=!0,r=e;void 0===i&&(i=!0),this.pause=function(){a||(window.clearTimeout(o),r-=(new Date).getTime()-n,a=!0)},this.resume=function(){n=(new Date).getTime(),a=!1,window.clearTimeout(o);var s=this;o=window.setTimeout(function(){i&&s.resume(),t()},r),r=e},this.clear=function(){window.clearTimeout(o),r=e,a=!0},this.resume()}var y="1.0.0.0",g="media",C=1,P="h5v_history_watch_v2",b={2:"抱歉，网络错误",3:"抱歉，媒体解码错误",4:"抱歉，视频格式不支持",apiMediaError:"抱歉，视频接口异常",apiVideoError:"抱歉，视频接口异常",apiMediaDataError:"抱歉，视频信息错误",apiVideoDataError:"抱歉，视频信息错误"},A=['<div id="m-h5v-player-#elementID#" class="m-h5v-player">','<video id="m-h5v-video-#elementID#" width="100%" height="100%" preload="meta" x-webkit-airplay="allow" webkit-playsinline="true">','<p class="no-support">抱歉，您的浏览器不支持HTML5 video</p>',"</video>",'<div id="m-h5v-poster-#elementID#" class="m-h5v-poster"></div>','<div id="m-h5v-loading-#elementID#" class="m-h5v-preload hidden"><i class="i1"></i><i class="i2"></i></div>','<div id="m-h5v-title-#elementID#" class="m-h5v-title"></div>','<a id="m-h5v-bigplay-#elementID#" class="big-play-btn" bc="bigPlay"><i></i></a>','<div id="m-h5v-qtpanel-#elementID#"></div>','<div class="m-h5v-control" id="m-h5v-control-#elementID#">','<div class="m-h5v-tip hidden" id="m-h5v-tip-#elementID#"><span class="word"></span><a class="click-btn"></a><a class="close-btn">X</a></div>','<div id="m-h5v-progressbar-#elementID#" class="m-h5v-progressbar">','<div class="bg"></div>','<div id="m-h5v-pro-loaded-#elementID#" class="loaded"></div>','<div id="m-h5v-pro-played-#elementID#" class="played"></div>','<div id="m-h5v-pro-dragBtn-#elementID#"  class="drag-bar"><i></i></div>',"</div>",'<div class="m-h5v-btns f-cb">','<a id="m-h5v-play-#elementID#" class="btn play-btn" bc="play"></a>','<a id="m-h5v-next-#elementID#" class="btn next-btn"></a>','<span id="m-h5v-time-#elementID#" class="curTime">00:00</span>','<a id="m-h5v-full-#elementID#" class="btn full-btn"></a>','<div id="m-h5v-quality-wrap-#elementID#" class="quality-wrap">','<span id="m-h5v-quality-btn-#elementID#" class="quality-btn hidden">流畅</span>','<div id="m-h5v-quality-list-#elementID#" class="quality-list hidden"></div>',"</div>",'<span id="m-h5v-duration-#elementID#" class="duration">00:00</span>',"</div>","</div>",'<div id="m-h5v-dragTip-#elementID#" class="m-h5v-dragTip hidden">00:00</div>','<div id="m-h5v-error-#elementID#" class="m-h5v-error hidden">','<div class="error-tip">','<i class="i-error"></i>','<p>您访问的视频，本站不支持播放<br/>请移步 <a class="fun j-install-btn" href="javascript:;">风行APP</a> 观看</p>',"</div>","</div>","</div>"].join(""),E=function(t){this.options={target:null,loaded:null,played:null,dragBtn:null,timeFormat:null,enabled:!0},this.options=$.extend(this.options,t),this.target=this.options.target,this.played=this.options.played,this.loaded=this.options.loaded,this.dragBtn=this.options.dragBtn,this.dragTime=this.options.dragTime,this.enabled=this.options.enabled,this.timeFormat=this.options.timeFormat,this.doc=$(document),this.updateLoad=function(t){var e=this;e.loaded.css("width",100*Math.max(0,Math.min(t,1))+"%")},this.updatePlay=function(t,e){if((!this.dragState||e)&&this.enabled){var i=this,o=Math.max(0,Math.min(t,1));i.percent=o,i.played.css("width",100*o+"%"),i.dragBtn.css("left",100*o+"%")}},this.dispose=function(){this.updatePlay(0),this.updateLoad(0),this.enabled=this.options.enabled};var e=this,i=function(t){e.timeFormat&&e.dragTime.text(e.timeFormat(t))},o=function(t){f(t);var o=0,n=e.target.offset().left,a=e.target.width();switch(t.type){case"click":e.dragState=!1,o=Math.max(0,Math.min((t.clientX-n)/a,1));break;case"mousemove":if(!e.dragState)return;e.progressState=!0,o=Math.max(0,Math.min((t.clientX-n)/a,1)),i(o);break;case"touchmove":if(!e.dragState||!t.touches||!t.touches.length)return;e.progressState=!0,o=Math.max(0,Math.min((t.touches[0].clientX-n)/a,1)),i(o)}e.updatePlay(o,!0),"click"==t.type&&e.updateHandler&&e.updateHandler(e.percent)},n=function(){e.dragState=!0,e.dragBtn.addClass("current"),e.doc.on("touchmove",o),e.doc.on("mousemove",o),e.doc.on("touchend",a),e.doc.on("touchcancel",a),e.doc.on("mouseup",a),e.timeFormat&&(e.dragTime.removeClass("hidden"),i(parseFloat(e.dragBtn.css("left"))/100))},a=function(){e.doc.off("touchmove",o),e.doc.off("mousemove",o),e.doc.off("touchend",a),e.doc.off("touchcancel",a),e.doc.off("mouseup",a),e.updateHandler&&e.updateHandler(e.percent),e.dragBtn.removeClass("current"),e.dragTime.addClass("hidden"),e.progressState=!1,e.dragState=!1};e.target.on("click",o),e.target.on("mousedown",n),e.target.on("touchstart",n)},w=function(t){var e=this;this.elementID=C++,this.options=$.extend({renderTo:null,type:g,gtype:0,channelid:"",galleryid:"",videoid:"",hashid:"",poster:"",title:"",live:!1,data:"",autoplay:!0,loop:0,next:"",format:"mp4",startAd:1,pauseAd:!0,cls:"",videoAutoStart:F.platform.isWindows||F.platform.isUc&&F.platform.isAndroid||F.platform.isIphone&&F.platform.isWeChat},t),$(this.options.renderTo)[0]&&($(this.options.renderTo).html(A.replace(/#elementID#/gi,this.elementID)),this.root=$("#m-h5v-player-"+this.elementID),this.video=$("#m-h5v-video-"+this.elementID),this.controlPanel=$("#m-h5v-control-"+this.elementID),this.title=$("#m-h5v-title-"+this.elementID),this.poster=$("#m-h5v-poster-"+this.elementID),this.loading=$("#m-h5v-loading-"+this.elementID),this.playBtn=$("#m-h5v-play-"+this.elementID),this.bigPlayBtn=$("#m-h5v-bigplay-"+this.elementID),this.nextBtn=$("#m-h5v-next-"+this.elementID),this.fullBtn=$("#m-h5v-full-"+this.elementID),this.soundBtn=$("#m-h5v-sound-"+this.elementID),this.time=$("#m-h5v-time-"+this.elementID),this.qualityBtn=$("#m-h5v-quality-btn-"+this.elementID),this.qualityList=$("#m-h5v-quality-list-"+this.elementID),this.duration=$("#m-h5v-duration-"+this.elementID),this.tip=$("#m-h5v-tip-"+this.elementID),this.tipWord=$(".word",this.tip),this.tipClickWord=$(".click-btn",this.tip),this.tipCloseBtn=$(".close-btn",this.tip),this.errorTip=$("#m-h5v-error-"+this.elementID),this.durationLong=0,this.progressBar=new E({target:$("#m-h5v-progressbar-"+this.elementID),loaded:$("#m-h5v-pro-loaded-"+this.elementID),played:$("#m-h5v-pro-played-"+this.elementID),dragBtn:$("#m-h5v-pro-dragBtn-"+this.elementID),dragTime:$("#m-h5v-dragTip-"+this.elementID),enabled:!1,timeFormat:function(t){return e.durationLong||(t=0),c(parseInt(t*e.durationLong))}}),this.video[0].autoplay=this.options.autoplay,d()&&(this.video[0].controls=!0),this.updatePoster(this.options.poster),this.root.addClass(this.options.cls),this.videoMetaLoaded=!1,this.lianNum=0,this.adComplete=!0,this.reportParam={target:"",hashid:"",lian:0,platform:0,videolength:"",format:"",playerversion:y,avtype:1,vodtype:1,viptype:""},this.options.videoAutoStart=this.options.videoAutoStart&&this.options.autoplay,this.__bindAutoEvent(),this.__init())};w.prototype.__bindAutoEvent=function(){var t=this;if($(document).on(fullScreenApi.screenChange,function(){fullScreenApi.enabled&&(fullScreenApi.isFullScreen?t.screenFull(1):t.screenNormal(1))}),$(document).click(function(){t.qualityList.addClass("hidden")}),!F.platform.isIpad){var e=0;$(window).on("orientationchange",function(){clearTimeout(e),e=setTimeout(function(){$(window).width()>$(window).height()?t.screenFull():t.screenNormal(1)},500)})}t.playerShowState=!0,$.add(F.EventCenter.PLAYER_SHOW,function(){F.debug("disposed",t.disposed),F.debug("adComplete",t.adComplete);var e=t.previewAd&&t.previewAd.adFormat;t.disposed||"mp4"!=e&&!t.adComplete||(F.platform.isIos||t.video.show(),t.playerShowState=!0)}),$.add(F.EventCenter.PLAYER_HIDE,function(){F.platform.isIos||(t.video.hide(),t.video[0].pause()),t.playerShowState=!1})},w.prototype.__isForbiddenAD=function(){return F.platform.isIpad?!0:!1},w.prototype.__isForbiddenPauseAD=function(){return!this.options.pauseAd||"2242"==F.config.malliance&&25==F.config.pParam.uc},w.prototype.__init=function(){F.debug("html5Video __init"),this.__isForbiddenAD()&&(this.options.startAd=0),this.options.videoAutoStart&&(this.bigPlayBtn.addClass("hidden"),this.showLoading()),this.options.live&&(this.progressBar.target.addClass("hidden"),this.time.addClass("hidden"),this.duration.addClass("hidden")),this.updatePoster(this.options.poster),this.title.html(this.options.title),F.platform.isQQBrowser&&F.platform.isIphone&&this.video.addClass("hidden"),this.bigPlayBtn.off("click").on("click",$.proxy(this._onBigPlayBtnClick,this)),this.options.videoid?this._initPlayInfo():this.options.data?this._play(this.options.data):(this.error(),u("novideo"))},w.prototype._onBigPlayBtnClick=function(t){f(t),this._initFirstPlay(),u("bigPlayBtnPlay")},w.prototype._initFirstPlayEd=!1,w.prototype._initFirstPlay=function(){if(!this._initFirstPlayEd&&!this.options.videoAutoStart){this._initFirstPlayEd=!0,this.bigPlayBtn.off("click").addClass("hidden"),this.showLoading(0),this.options.videoAutoStart=!0;try{this._clickPlay()}catch(t){}}},w.prototype.playRequestParam={},w.prototype.requestNum=0,w.prototype._initPlayInfo=function(){function t(t){if(!t||200!=t.retcode||!t.playlist)return void e(n);if(t.name&&(a.options.title=t.name,a.title.html(t.name)),$.isArray(t.playlist)&&t.playlist.length){var i=t.playlist;if(a.formatPlayData(i),!a.options.hashid)return a.error(),void u("noPlayInfo");a._initAD(),u("apiInfoValid",a.options.type)}else"ts"==a.options.format?(a.options.format="mp4",a._initPlayInfo(),u("apiInfoValid","media")):e("apiMediaDataError")}function e(t){a.requestNum<3?a._initPlayInfo():(u(t,a.requestNum),a.error({msg:b[t]}))}{var i,o,n,a=this;a.video}return a.playRequestParam={},a.disposed=!1,a.requestNum++,window.vplay&&window.vplay.isFeeMedia?(a.error({msg:"抱歉，本节目属于付费节目",nextTip:'请<a class="fun j-install-btn" href="javascript:;"> 下载APP </a>进行观看！'}),u("feeVideo")):(this.options.type==g?(i=F.config.pm+"/v7/media/play/?id="+String(a.options.videoid),n="apiMediaDataError",o="apiMediaError"):(i=F.config.pv+"/v7/video/play/?id="+String(a.options.videoid),n="apiVideoDataError",o="apiVideoError"),void F.request(i,$.param(F.config.pParam),t,{timeout:5e3,error:function(){e(o)}}))},w.prototype._initAD=function(){if(this.adComplete=!1,this.options.startAd){var t=this,e=function(e){t.bigPlayBtn.off("click"),t.adComplete=!0,t.previewAdQuery.off(F.EventCenter.PRE_AD_PAUSE).off(F.EventCenter.PRE_AD_START).off(F.EventCenter.PRE_AD_ERROR).off(F.EventCenter.PRE_AD_END).off(F.EventCenter.PRE_AD_SCREENCHANGE),e.type==F.EventCenter.PRE_AD_END?(t.showLoading(0),t._beginPlayVideo()):(t.options.videoAutoStart?(t.bigPlayBtn.addClass("hidden"),t.showLoading(0)):t.bigPlayBtn.off("click").on("click",$.proxy(t._onVideoBeginBtnClick,t)),t._beginPlayVideo())},i=function(e){f(e),t.isScreenFull()?t.screenNormal():t.screenFull()};this.adOption={vchannel:this.options.channelid,videoid:this.options.videoid},this.options.gtype?this.adOption.mid=this.options.galleryid:this.adOption.plid=this.options.galleryid,this.options.previewAp&&(this.adOption.ap=this.options.previewAp),this.previewAd=new F.player.adPlayer($("#m-h5v-qtpanel-"+this.elementID),this.adOption),this.previewAdQuery=$(this.previewAd),this.previewAdQuery.on(F.EventCenter.PRE_AD_PLAY,function(){t.bigPlayBtn.addClass("hidden"),t.previewAd.adStart||t.showLoading()}),this.previewAdQuery.on(F.EventCenter.PRE_AD_START,function(){t.hideLoading(),t.title.addClass("hidden"),t.poster.addClass("hidden"),t.options.videoAutoStart=!0,t.bigPlayBtn.off("click").on("click",function(e){f(e),t.bigPlayBtn.addClass("hidden"),t.previewAd.resume()}).addClass("hidden")}),this.previewAdQuery.on(F.EventCenter.PRE_AD_PAUSE,function(){F.platform.isIos||t.bigPlayBtn.removeClass("hidden")}),this.previewAdQuery.on(F.EventCenter.PRE_AD_ERROR,e),this.previewAdQuery.on(F.EventCenter.PRE_AD_END,e),this.previewAdQuery.on(F.EventCenter.PRE_AD_SCREENCHANGE,i),this.options.videoAutoStart&&this.previewAd.play(!0),this.bigPlayBtn.off("click").on("click",$.proxy(this._onAdBeginBtnClick,this))}else this.adComplete=!0,this._beginPlayVideo();this._updateNextBtn()},w.prototype._onAdBeginBtnClick=function(t){F.debug("html5Video _onAdBeginBtnClick"),f(t),this._beginPlayAd()},w.prototype._beginPlayAd=function(){F.debug("html5Video _beginPlayAd");var t=this;this.bigPlayBtn.off("click").on("click",function(e){f(e),t.bigPlayBtn.addClass("hidden"),t.previewAd.resume(),t.previewAd.adStart||t.showLoading()}).addClass("hidden"),this.showLoading(),this.previewAd.play(this.options.videoAutoStart),this.options.videoAutoStart=!0},w.prototype._onVideoBeginBtnClick=function(t){F.debug("html5Video _onVideoBeginBtnClick",t),f(t),this.showLoading(0),this.options.videoAutoStart=!0,this.bigPlayBtn.off("click"),this._beginPlayVideo()},w.prototype._beginPlayVideo=function(t){F.debug("html5Video _beginPlayVideo"),this._play(this.options.hashid,t)},w.prototype._bindUserEvent=function(){if(!this.bindUserEd){this.bindUserEd=!0;var t=this,e=t.video,i=0,o={play:function(i){f(i),e[0].paused?(t._clickPlay(),t.options.live||t.showLoading(500),t.showCtlPanel(),t.bigPlayBtn.addClass("hidden"),u("btnPlay")):(e[0].pause(),t.showCtlPanel(),u("btnPause"))},next:function(e){f(e),t.playNext(),t.showCtlPanel(),u("btnNext",t.options.gtype)},fullScreen:function(e){f(e),t.showCtlPanel(),t.isScreenFull()?(t.screenNormal(),u("btnScreenNormal")):(t.screenFull(),u("btnScreenFull"))},changeSound:function(i){f(i),t.showCtlPanel(),e[0].muted=!e[0].muted},seek:function(i){return isNaN(i)||!e[0].duration?void F.debug("pct:"+i):(e[0].currentTime=Math.min(i*e[0].duration,e[0].duration-5),t._clickPlay(),void t.showCtlPanel())}};t.progressBar.updateHandler=o.seek,e.on("dblclick",o.fullScreen),t.fullBtn.on(F.EventCenter.CLICK,o.fullScreen),t.playBtn.on("click",o.play),t.nextBtn.on(F.EventCenter.CLICK,o.next),t.soundBtn.on(F.EventCenter.CLICK,o.changeSound),t.qualityBtn.on(F.EventCenter.CLICK,function(e){return f(e),t.qualityList.toggleClass("hidden"),!1}),t.qualityList.on(F.EventCenter.CLICK,".quality-item",function(e){e.stopPropagation(),!$(this).hasClass("current")&&$(this).data("quality")&&(t.changeQuality($(this).data("quality")),t.qualityList.find(".quality-item").removeClass("current"),$(this).addClass("current"),t.qualityBtn.html(t.currentQuality.name),t.qualityList.addClass("hidden"))}),t.root.on("click",function(){clearTimeout(i),t.ctlShowState?t.hideCtlPanel():t.videoMetaLoaded&&t.showCtlPanel()}),t.tipClickWord.on(F.EventCenter.CLICK,function(e){f(e),t.tipClickHandler()}),t.tipCloseBtn.on(F.EventCenter.CLICK,function(e){f(e),t.tip.addClass("hidden")})}},w.prototype._clickPlay=function(){this.video[0].play()},w.prototype._autoplay=function(){(this.options.autoplay||this.options.videoAutoStart)&&this.video[0].play()},w.prototype.getReportParam=function(){try{return this.reportParam.target=this.options.videoid,this.reportParam.hashid=this.options.hashid,this.reportParam.lian=this.lianNum,this.reportParam.videolength=this.video[0].duration,this.reportParam.format=this.currentQuality.code+"|"+this.playInfo[0].code,this.reportParam}catch(t){return this.reportParam}},w.prototype.ptTimer=null,w.prototype.initPtLog=function(){if(this.options.videoid){var t=this.options.type==g?300:60,e=0,i=this,o=function(){return{target:i.options.videoid,hashid:i.options.hashid,timespan:t,sendstep:e++}};F.log.pt(o()),this.ptTimer=new v(function(){F.log.pt(o())},1e3*t)}},w.prototype.playInfo=[],w.prototype.qualityData=[],w.prototype.vtitle="",w.prototype.formatPlayData=function(t){var e=[];if($.each(t,function(t,i){$.each(i.playinfo,function(t,o){return"h.264"==o.codec?(i.playinfo=o,e.push(i),!1):void 0})}),e.length){e.sort(function(t,e){var i=t.playinfo,o=e.playinfo;return i.filesize=parseInt(i.filesize),o.filesize=parseInt(o.filesize),i.filesize>o.filesize?-1:i.filesize==o.filesize?0:1});var i=this,o={tv:1,dvd:2,hd:3,sdvd:4},n=2242==F.config.malliance,a=n?"hd":"dvd";i.playInfo=e;var r=i.playInfo[i.playInfo.length-1];$.each(i.playInfo,function(t,e){return o[e.code]<=o[a]?(r=e,!1):void 0}),i.setCurrentData(r),i.initQualityTpl(),$(i).trigger(F.EventCenter.PLAYER_INFO_UPDATE)}},w.prototype.changeQuality=function(t){var e=this;t!==e.currentQuality.code&&$.each(e.playInfo,function(i,o){o.code===t&&(e.setCurrentData(o),e.adComplete?e._beginPlayVideo(!0):e._initFirstPlay())})},w.prototype.initQualityTpl=function(){if(this.currentQuality){var t="",e=this.currentQuality.name;this.playInfo&&this.playInfo.length>1&&(this.qualityBtn.html(e),$.each(this.playInfo,function(i,o){t+='<a class="quality-item'+(o.name==e?" current":"")+'" data-quality="'+o.code+'" href="javascript:;">'+o.name+"</a>"}),this.qualityList.html(t),F.app.download.bind($(".j-install-btn",this.qualityList)),this.qualityBtn.removeClass("hidden"))}},w.prototype.setCurrentData=function(e){var i=this,o=e&&e.playinfo;if(i.options.hashid=null,o){var n=s(o);n&&(i.options.hashid=n.hashid,i.playRequestParam.token=t(n.token),i.options.type!=g&&(i.playRequestParam.file=o.filename),i.currentQuality={code:e.code,name:e.name})}},w.prototype._updateNextBtn=function(){window.vplay&&vplay.nextInfo&&this.root.addClass("show-next")},w.prototype.playNext=function(){window.vplay&&vplay.nextInfo&&(F.debug("html5video playNext",vplay.nextInfo),$(this).trigger(F.EventCenter.PLAYER_NEXT))},w.prototype.updatePoster=function(t){t&&(this.poster.css("background-image","url("+t+")"),t!==this.options.poster&&(this.options.poster=t))},w.prototype.playNewVideo=function(t,e){window.playNewVideo=e?"Next":"Click",$.send(F.EventCenter.PLAYER_HIDE),this.options=$.extend(this.options,t),this.lianNum=0,this.dispose(),this.__init()},w.prototype.triggerPlay=function(){if(F.debug("triggerPlay videoAutoStart",this.options.videoAutoStart),this.dispose(),this.showLoading(0),this.options.autoplay){this._initFirstPlay();try{if(window.tryPlayTip&&F.platform.isUc&&this.options.videoAutoStart)return;this._autoplay()}catch(t){}}},w.prototype.historyTimer=0,w.prototype.recordHistory=function(){if(this.options.videoid){var t=this,e=function(){for(var t=F.htmlstore.get(P);t&&t.length>5;)t.pop();return t||[]},i=function(){if(t.options.historytime)return t.options.historytime;for(var i=0,o=e(),n=0,a=o.length;a>n;n++)if(o[n].videoid==t.options.videoid)return o[n].time;return i}();i>5&&i<t.video[0].duration-5&&!window.tryPlayTip&&(t.updatePlay(i),t.updateTip("亲，您已看到"+c(i)+"处，您还可以","从头观看",function(){t.updatePlay(0),t.tip.addClass("hidden")}),t.showCtlPanel());var o=function(){clearTimeout(t.historyTimer),t.historyTimer=setTimeout(o,2e3);try{if(!t.videoMetaLoaded||t.video[0].currentTime<=0)return}catch(i){return}var n=e();$.each(n,function(e,i){var o=n.indexOf(i);(i.videoid==t.options.videoid||t.options.gtype&&i.galleryid==t.options.galleryid)&&n.splice(o,1)}),n.unshift({videoid:t.options.videoid,galleryid:t.options.galleryid,time:parseInt(t.video[0].currentTime)||0,vtitle:t.options.title,pic:t.options.poster,url:t.options.playUrl||location.href,vtype:t.options.type}),F.htmlstore.set(P,n)};o()}},w.prototype.updatePlay=function(t){if(!isNaN(t)){var e=this;e.video[0].currentTime=t,e.progressBar.updatePlay(t/e.video[0].duration),e.time.html(c(e.video[0].currentTime))}},w.prototype.dispose=function(){F.debug("html5video dispose");{var t=this;this.video}t.previewAd&&(t.previewAd.dispose(),t.previewAd=null),t.afterAd&&(t.afterAd.dispose(),t.afterAd=null),t._unBindVideoEvent(),t.ptTimer&&(t.ptTimer.clear(),t.ptTimer=null),clearTimeout(t.historyTimer),t.hideCtlPanel(),t.adComplete=!1,t.playCount=0,t.curTime=0,t.triggerPlayTimer=0,t.durationLong=0,t.triggerPlayTime=0,t.requestNum=0,t.video[0].src="",t.duration.html("00:00"),t.time.html("00:00"),t.title.html(""),t.title.removeClass("hidden"),t.errorTip.addClass("hidden"),t.qualityBtn.addClass("hidden"),t.videoMetaLoaded=!1,t.disposed=!0,t.bindUserEd=!1,t.hidePauseAd(),t.video.off(F.EventCenter.CLICK).off("click"),t.fullBtn.off(F.EventCenter.CLICK).off("click"),t.playBtn.off(F.EventCenter.CLICK).off("click"),t.bigPlayBtn.off(F.EventCenter.CLICK).off("click"),t.nextBtn.off(F.EventCenter.CLICK).off("click"),t.soundBtn.off(F.EventCenter.CLICK).off("click"),t.controlPanel.off(F.EventCenter.CLICK).off("click"),t.root.off(F.EventCenter.CLICK).off("click"),t.root.off("click"),t.tipClickWord.off(F.EventCenter.CLICK).off("click"),t.tipCloseBtn.off(F.EventCenter.CLICK).off("click"),t.qualityBtn.off(F.EventCenter.CLICK).off("click"),t.qualityList.off(F.EventCenter.CLICK).off("click"),t.progressBar.dispose(),t.loading.addClass("hidden"),t.loading.removeClass("m-h5v-loading"),t.root.removeClass("show-next")},w.prototype._play=function(t,e){if(F.debug("html5Video _play",this.options.videoAutoStart),this._bindUserEvent(),F.platform.isQQBrowser&&F.platform.isIphone&&this.video.removeClass("hidden"),e&&(this.seekTime=this.video[0].currentTime),"http://"==String(t).substr(0,7))this.video[0].src=t;else if("ts"==this.options.format)this.video[0].src="http://jobsfe.funshion.com/play/v1/ts/"+t+".m3u8"+(this.playRequestParam.token?"?token="+this.playRequestParam.token:"");else{var i=[];for(var o in this.playRequestParam)i.push(o+"="+this.playRequestParam[o]);this.video[0].src="http://jobsfe.funshion.com/play/v1/mp4/"+t+".mp4"+(i.length?"?"+i.join("&"):"")}this.video[0].muted=!1,this.video[0].load(),this._autoplay(),this._bindVideoEvent()},w.prototype.error=function(t){t=$.extend({msg:"抱歉,本视频暂时无法播放",nextTip:'试试<a href="javascript:location.reload()"> 刷新 </a>，或用<a class="j-install-btn" href="javascript:;"> APP </a>观看',cls:"error-tip"},t),this.dispose(),this.errorTip.html('<div class="'+t.cls+'"> <i class="i-error"></i><p>'+t.msg+"</p><p>"+t.nextTip+"</p></div>"),this.errorTip.removeClass("hidden"),this.screenNormal();try{F.app.download.bind($(".j-install-btn",this.errorTip));var t=this.options;$(".j-install-btn",this.errorTip).data("app-type",t.gtype).data("app-mid",t.galleryid).data("app-vid",t.videoid)}catch(e){}},w.prototype.playCount=0,w.prototype.triggerPlayTimer=0,w.prototype.curTime=0,w.prototype.videoEventHandler=function(t){var e=this,i=this.video;if(e.adComplete)switch(F.debug("html5Video _bindVideoEvent:=="+t.type),t.type){case"loadedmetadata":e.progressBar.enabled=!0,e.seekTime&&(e.video[0].currentTime=e.seekTime,e.seekTime=0),e.videoMetaLoaded||($(e).trigger(F.EventCenter.PLAYER_READY),u("ready",e.options.type,parseInt((new Date).getTime()-e.triggerPlayTime)),e.videoMetaLoaded=!0),$.send(F.EventCenter.PLAYER_SHOW);break;case"durationchange":e.video[0].duration>1&&(e.durationLong=parseInt(e.video[0].duration),e.duration.html(c(e.video[0].duration)));break;case"progress":if(!i[0].buffered.length)return;var o=i[0].buffered.length-1,n=i[0].buffered.end(o)/i[0].duration;e.progressBar.updateLoad(n);break;case"playing":clearTimeout(e.triggerPlayTimer);break;case"play":e.hidePauseAd(),e.playBtn.addClass("pause-btn"),e.bigPlayBtn.addClass("hidden"),$(e).trigger(F.EventCenter.PLAYER_PLAY),e.triggerPlayTime||(e.triggerPlayTime=(new Date).getTime()),e.ptTimer&&e.ptTimer.resume();break;case"pause":e.playBtn.removeClass("pause-btn"),e.bigPlayBtn.removeClass("hidden"),e.poster.removeClass("hidden"),e.showCtlPanel(!0),e.hideLoading(),e.bigPlayBtn.off("click").on("click",function(t){f(t),e._clickPlay()}),e.showPauseAd(),e.ptTimer&&e.ptTimer.pause(),$(e).trigger(F.EventCenter.PLAYER_PAUSE);break;case"volumechange":e.soundBtn.removeClass("sound-low-btn sound-mute-btn"),i[0].muted?e.soundBtn.addClass("sound-mute-btn"):i[0].volume<.5&&e.soundBtn.addClass("sound-low-btn");break;case"canplay":e.playCount<1&&(F.debug("canplay:"+e.playCount),clearTimeout(e.triggerPlayTimer),e.triggerPlayTimer=setTimeout(function(){F.debug("canplay:video[0].pause();"),i[0].pause()},5e3));break;case"timeupdate":if(F.debug("time"+i[0].currentTime),Math.abs(i[0].currentTime-e.curTime)>0||e.options.live){F.debug("startplay",i[0].currentTime,e.curTime),clearTimeout(e.triggerPlayTimer),e.playCount<1&&(e.playCount++,e.lianNum++,e.recordHistory(),e.loading.addClass("m-h5v-loading"),F.log.play(e.getReportParam()),e.initPtLog(),e.options.videoAutoStart&&e.showCtlPanel(),u("startPlay"+(window.playNewVideo?window.playNewVideo:""),e.options.type,parseInt((new Date).getTime()-e.triggerPlayTime)),e.loadPauseAd()),e.options.videoAutoStart=!0;var a=parseInt(i[0].currentTime)/i[0].duration;e.time.html(c(e.video[0].currentTime)),e.progressBar.updatePlay(a),e.hideLoading(),e.poster.addClass("hidden"),window.tryPlayTip&&parseInt(i[0].currentTime)>=900&&(F.debug("try play end"),$.send(F.EventCenter.PLAYER_HIDE),e.error({msg:'试看结束，到 <a class="j-install-btn app-btn"> 风行视频APP </a> 中观看',nextTip:'"<a class="j-install-btn tit">'+e.options.title+'</a>" 完整版',cls:"app-tip"}))}e.curTime=i[0].currentTime;break;case"seeking":case"waiting":F.platform.isIphone||e.showLoading(),e.ptTimer&&e.ptTimer.pause();break;case"seeked":e.ptTimer&&e.ptTimer.resume();break;case"ended":if(F.debug("ended Event playCount",e.playCount),e.playCount<1)return;clearTimeout(e.pauseShowTimer),e.hideLoading(),e.options.next?e.playNext():e.options.loop?e.playNewVideo():(e.playAfterAd(),$(e).trigger(F.EventCenter.PLAYER_END));break;case"error":e.hideLoading();var r=i[0].error&&i[0].error.code;r&&1!=r&&(e.error({msg:b[r]}),u("error",r))}},w.prototype._bindVideoEvent=function(){var t=this.video,e=$.proxy(this.videoEventHandler,this);t.off("loadedmetadata",e).on("loadedmetadata",e),t.off("play",e).on("play",e),t.off("pause",e).on("pause",e),t.off("volumechange",e).on("volumechange",e),t.off("playing",e).on("playing",e),t.off("timeupdate",e).on("timeupdate",e),t.off("progress",e).on("progress",e),t.off("seeking",e).on("seeking",e),t.off("seeked",e).on("seeked",e),t.off("abort",e).on("abort",e),t.off("canplay",e).on("canplay",e),t.off("canplaythrough",e).on("canplaythrough",e),t.off("durationchange",e).on("durationchange",e),t.off("emptied",e).on("emptied",e),t.off("ended",e).on("ended",e),t.off("error",e).on("error",e),t.off("loadeddata",e).on("loadeddata",e),t.off("loadstart",e).on("loadstart",e),t.off("stalled",e).on("stalled",e),t.off("waiting",e).on("waiting",e)},w.prototype._unBindVideoEvent=function(){var t=this.video,e=$.proxy(this.videoEventHandler,this);t.off("loadedmetadata",e),t.off("play",e),t.off("pause",e),t.off("volumechange",e),t.off("playing",e),t.off("timeupdate",e),t.off("progress",e),t.off("seeking",e),t.off("seeked",e),t.off("abort",e),t.off("canplay",e),t.off("canplaythrough",e),t.off("durationchange",e),t.off("emptied",e),t.off("ended",e),t.off("error",e),t.off("loadeddata",e),t.off("loadstart",e),t.off("stalled",e),t.off("waiting",e)},w.prototype.isScreenFull=function(){return this.root.hasClass("m-h5v-fullscreen")},w.prototype.screenFull=function(t){!t&&fullScreenApi.enabled&&fullScreenApi.request(2066!=F.cookie.get("malliance")?this.root[0]:this.video[0]),this.fullBtn.addClass("unfull-btn"),this.root.addClass("m-h5v-fullscreen z-video-mask"),$("body").addClass("player-fullscreen"),$(this).trigger(F.EventCenter.PLAYER_SCREEN_FULL),this.resizePauseAd(),u("screenFull")},w.prototype.screenNormal=function(t){if(!t){fullScreenApi.enabled&&fullScreenApi.exit();try{this.video[0].webkitExitFullscreen()}catch(e){}}this.fullBtn.removeClass("unfull-btn"),this.root.removeClass("m-h5v-fullscreen z-video-mask"),$("body").removeClass("player-fullscreen"),$(this).trigger(F.EventCenter.PLAYER_SCREEN_NORMAL),this.resizePauseAd(),u("screenNormal")},w.prototype.tipTimer=0,w.prototype.updateTip=function(t,e,i){var o=this;o.tipWord.html(t),o.tipClickWord.html(e),o.tipClickHandler=null,e&&i&&(o.tipClickHandler=i),o.tip.removeClass("hidden"),o.tipTimer=setTimeout(function(){o.tip.addClass("hidden")},5e3)},w.prototype.tipClickHandler=null,w.prototype.loadingTimer=0,w.prototype.showLoading=function(t){var e=this;clearTimeout(e.loadingTimer),F.platform.isIphone&&e.loading.hasClass("m-h5v-loading")||("undefined"==typeof t&&(t=200),0===t?e.loading.removeClass("hidden"):e.loadingTimer=setTimeout(function(){e.loading.removeClass("hidden")},t))},w.prototype.hideLoading=function(t){var e=this;t=t||0,clearTimeout(e.loadingTimer),0==t?e.loading.addClass("hidden"):e.loadingTimer=setTimeout(function(){e.loading.addClass("hidden")},t)},w.prototype.ctlShowState=!1,w.prototype.ctlHideTimer=0,w.prototype.showCtlPanel=function(t){var e=this;e.title.removeClass("hidden"),d()||this.adComplete&&(clearTimeout(e.ctlHideTimer),e.controlPanel.css({visibility:"visible",opacity:1}),e.ctlShowState=!0,t||(e.ctlHideTimer=setTimeout(function(){e.hideCtlPanel()},5e3)))},w.prototype.hideCtlPanel=function(){var t=this;clearTimeout(t.ctlHideTimer),t.progressBar.progressState||(t.controlPanel.css({visibility:"hidden",opacity:1}),t.title.addClass("hidden"),t.qualityList.addClass("hidden"),t.ctlShowState=!1)},w.prototype.loadPauseAd=function(){if(!F.platform.isIpad&&!l()&&!T&&~$.inArray(F.config.ctrlname,["vplay_","mplay_"])){var t="";t="http://c3.moogos.com/js/_jssdk.js?aid="+k+"&nameSpace=api&ver=1",T=S;var e=document.createElement("script");e.src=t,document.head.appendChild(e);var i=this;$.add([F.EventCenter.SIDEBAR_SHOW,F.EventCenter.HEARBAR_SHOW].join(" "),function(){i.hidePauseAd()}),u("pauseAd","request"+T)}},w.prototype.playAfterAd=function(){if(!this.options.loop&&!this.options.next){this.adComplete=!1,this.hideCtlPanel(),this.afterAd=new F.player.adPlayer($("#m-h5v-qtpanel-"+this.elementID),$.extend({},this.adOption,{ap:F.platform.isIphone?"m_ipe_lpr_v1":"m_alpr_v1"}));var t=this,e=$(this.afterAd),i=function(){t.adComplete=!0,t.dispose(),t.hideLoading(),e.off(F.EventCenter.PRE_AD_PAUSE).off(F.EventCenter.PRE_AD_START).off(F.EventCenter.PRE_AD_ERROR).off(F.EventCenter.PRE_AD_END).off(F.EventCenter.PRE_AD_SCREENCHANGE),t.bigPlayBtn.off("click").on("click",function(){t.playNewVideo()}).removeClass("hidden"),t.poster.removeClass("hidden"),t.screenNormal()};e.on(F.EventCenter.PRE_AD_START,function(){t.hideLoading(),t.poster.addClass("hidden"),t.bigPlayBtn.off("click").on("click",function(){t.bigPlayBtn.addClass("hidden"),t.afterAd.resume()}).addClass("hidden")}),e.on(F.EventCenter.PRE_AD_PAUSE,function(){F.platform.isIos||t.bigPlayBtn.removeClass("hidden")}),e.on(F.EventCenter.PRE_AD_PLAY,function(){t.bigPlayBtn.addClass("hidden"),t.afterAd.adStart||t.showLoading()}),e.on(F.EventCenter.PRE_AD_SCREENCHANGE,function(){t.isScreenFull()?t.screenNormal():t.screenFull()}),e.on(F.EventCenter.PRE_AD_END,i),e.on(F.EventCenter.PRE_AD_ERROR,i),this.afterAd.play(this.options.videoAutoStart)}},w.prototype.pauseShowTimer=0,w.prototype.showPauseAd=function(){if(!this.__isForbiddenPauseAD()&&(clearTimeout(this.pauseShowTimer),this.playerShowState)){F.debug("player showPauseAd");var t=this;t.pauseShowTimer=setTimeout(function(){return l()?p():(m("show",t.root[0]),void F.debug("trigglePauseAd('show')"))},200)}},w.prototype.hidePauseAd=function(){if(!this.__isForbiddenPauseAD()){if(l())return h();clearTimeout(this.pauseShowTimer),m("close")}},w.prototype.resizePauseAd=function(){if(!this.__isForbiddenPauseAD()&&!l()){var t=window[k+"_api"];t&&t.resize&&t.resize()}},F.namespace("html5video",w);var _=!1,T=0,I="u2398016",k="s39f2158",D="baidu",S="jesgoo"}();