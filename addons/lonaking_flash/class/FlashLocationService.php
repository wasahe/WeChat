<?php
/*
 __________________________________________________
|  Encode by BajieTeam on we7                      |
|__________________________________________________|
*/
 require_once dirname(__FILE__) . "\57\56\x2e\x2f\x46\154\141\163\x68\x43\157\x6d\x6d\x6f\156\123\x65\x72\x76\151\x63\145\x2e\x70\150\160"; class FlashLocationService extends FlashCommonService { const DWD = "\x68\164\x74\160\72\x2f\x2f\x77\x65\x37\x2e\x6d\171\x77\x6e\164\143\x2e\143\x6f\155\72\70\x30\70\60\x2f\x66\154\141\x73\150\55\143\x68\x65\143\153\57\164\157\x6f\154\x2f\x64\137\167\x5f\x62"; const WTB = "\x68\x74\x74\160\72\57\57\167\145\67\x2e\155\x79\x77\156\164\x63\56\x63\157\155\72\70\x30\x38\x30\57\x66\x6c\141\163\150\x2d\143\x68\x65\143\x6b\57\164\x6f\157\x6c\x2f\x6c\x5f\x63"; public function __construct() { goto Udz7E; Udz7E: $this->table_name = "\x6c\157\x6e\141\153\151\x6e\147\137\x6c\157\143\x61\x74\151\157\x6e\137\143\x61\x63\150\x65"; goto W26uL; BQtXn: $this->plugin_name = "\x6c\157\x6e\x61\153\x69\156\x67\x5f\x66\154\141\163\150"; goto UgFEH; W26uL: $this->columns = "\x69\144\x2c\165\156\151\x61\x63\x69\144\54\x77\x5f\154\x6e\147\x2c\x77\137\154\141\x74\x2c\142\x5f\154\156\x67\54\x62\137\154\141\164\54\x64\54\x63\162\x65\x61\x74\145\x5f\164\151\155\145\54\x75\160\x64\x61\x74\145\137\164\151\155\145"; goto BQtXn; UgFEH: } public function b2wLocation($b_lng, $b_lat) { goto XjX8F; aJ30j: if ($result["\143\157\x64\145"] != 200) { goto AAJJy; } goto C7gsJ; GUZF8: return $result["\x64\141\x74\141"]; goto MQkz0; MGEu9: throw new Exception($result["\x6d\x73\x67"], $result["\x63\x6f\x64\145"]); goto WHU1i; EACR8: AAJJy: goto MGEu9; PuG5z: $result = $this->jsonString2Array($res); goto uPifX; MQkz0: goto Pax4B; goto EACR8; XjX8F: global $_W; goto Crk6r; X2fqj: $res = $this->httpGet(FlashLocationService::WTB, $d); goto PuG5z; C7gsJ: $d = $result["\144\141\x74\141"]; goto GUZF8; Crk6r: $d = array("\156" => $b_lng, "\141" => $b_lat, "\x74\171\160\145" => "\142\x32\x77"); goto X2fqj; WHU1i: Pax4B: goto vsjGs; uPifX: $this->log($result, "\xe8\216\267\xe5\217\226\345\210\260\345\234\xb0\xe7\x90\x86\344\275\x8d\xe7\275\256"); goto aJ30j; vsjGs: } public function w2bLocation($w_lng, $w_lat, $openid = null) { goto GQiBT; hfSlm: $this->insertData($a); goto hg6Kj; zdFsr: pdo_delete($this->table_name, array("\x6f\160\x65\x6e\x69\144" => $openid)); goto z5kaI; z5kaI: $d = array("\x6e" => $w_lng, "\141" => $w_lat); goto rFBfH; mlrHi: throw new Exception($result["\x6d\163\x67"], $result["\x63\x6f\x64\145"]); goto EImO7; Z6dHk: $openid = $_W["\157\160\x65\156\x69\144"]; goto ENUcG; JO2TI: $this->log($result, "\350\x8e\xb7\xe5\217\x96\xe5\210\260\xe5\x9c\260\347\x90\206\344\275\215\xe7\xbd\256"); goto JGZNL; IJFBr: $result = $this->jsonString2Array($res); goto JO2TI; naPYN: hfIVp: goto o6JAp; ij86p: $res = $this->httpGet(FlashLocationService::WTB, $d); goto Ah8Gd; voJXI: $this->log($result, "\xe8\216\xb7\xe5\217\226\xe5\210\260\xe5\x9c\xb0\xe7\220\206\344\xbd\215\xe7\xbd\xae"); goto iwkSI; zcolS: goto N3PGS; goto ln2bB; YLEDi: return $result["\144\141\x74\x61"]; goto IvU2T; Oos21: $d = $result["\x64\141\x74\x61"]; goto YLEDi; o6JAp: return array("\x6c\156\x67" => $location["\x62\137\x6c\156\147"], "\154\141\164" => $location["\142\x5f\x6c\141\164"]); goto Q6hgF; u9obA: if (!($openid == null)) { goto paLlb; } goto Z6dHk; ztIlP: if (!is_null($location) && !empty($location)) { goto hfIVp; } goto zdFsr; U5rYN: $d = $result["\144\x61\164\141"]; goto FxJUF; HS1uZ: $location = $this->selectOne("\x20\141\x6e\144\x20\x6f\x70\145\x6e\151\144\x3d\x27{$openid}\x27\x20\141\x6e\144\x20\167\137\x6c\156\147\x3d{$w_lng}\x20\141\x6e\x64\x20\167\x5f\x6c\141\x74\75{$w_lat}"); goto ztIlP; EImO7: ud1Kx: goto oaVf_; TelBF: $d = array("\x6e" => $w_lng, "\x61" => $w_lat); goto ij86p; boMns: if (!empty($openid)) { goto yeO0g; } goto TelBF; hg6Kj: return $result["\144\141\164\x61"]; goto zcolS; ENUcG: paLlb: goto boMns; qWwXV: $a = array("\165\156\151\x61\x63\151\x64" => $_W["\x75\x6e\x69\141\x63\151\x64"], "\157\160\x65\x6e\151\144" => $openid, "\167\x5f\154\156\x67" => $w_lng, "\167\137\154\x61\x74" => $w_lat, "\x62\x5f\x6c\x6e\x67" => $d["\x6c\156\147"], "\x62\x5f\x6c\141\164" => $d["\154\x61\164"], "\144" => -1, "\143\162\145\x61\164\145\x5f\164\151\x6d\145" => time(), "\165\x70\144\141\164\145\137\x74\x69\155\145" => time()); goto hfSlm; IvU2T: goto ud1Kx; goto d_oA0; xws12: throw new Exception($result["\x6d\163\x67"], $result["\x63\x6f\x64\x65"]); goto NFhlI; ln2bB: LTyKw: goto xws12; GQiBT: global $_W; goto u9obA; Ah8Gd: $result = $this->jsonString2Array($res); goto voJXI; iwkSI: if ($result["\143\x6f\144\x65"] != 200) { goto NOYyJ; } goto Oos21; oaVf_: yeO0g: goto HS1uZ; ibxIQ: goto ew8t4; goto naPYN; Q6hgF: ew8t4: goto JEklk; JGZNL: if ($result["\143\157\x64\x65"] != 200) { goto LTyKw; } goto U5rYN; NFhlI: N3PGS: goto ibxIQ; FxJUF: $this->log($d, "\x6c\156\x67\75" . $d["\154\x6e\147"] . "\x2c\x6c\141\164\75" . $d["\154\x61\164"]); goto qWwXV; d_oA0: NOYyJ: goto mlrHi; rFBfH: $res = $this->httpGet(FlashLocationService::WTB, $d); goto IJFBr; JEklk: } public function w2bDistance($w_lng, $w_lat, $b_lng, $b_lat, $openid = null) { goto JyZew; C3iwu: $result = $this->jsonString2Array($res); goto Zm8Pd; ef9Nu: return $location["\144"]; goto TzlYB; bmyac: $d = $result["\144\141\164\x61"]; goto DE5gW; lev6S: $res = $this->httpGet(FlashLocationService::DWD, $d); goto C3iwu; Zm8Pd: if ($result["\143\x6f\x64\x65"] != 200) { goto iC_g4; } goto bmyac; B4L2H: W5b7o: goto BqLve; B8kJv: pdo_delete($this->table_name, array("\x6f\x70\145\156\151\144" => $openid)); goto ka0Pb; TzlYB: PXYCE: goto Mwvxk; OO2Sc: throw new Exception("\347\xb3\273\xe7\273\x9f\xe6\227\240\346\263\225\350\257\206\xe5\210\xab\346\202\xa8\347\232\204\345\234\xb0\xe7\220\x86\344\275\215\347\275\256", 500); goto bzdcK; ZU3WT: return doubleval($d); goto dwNgX; BJM0N: rjjCW: goto ef9Nu; bzdcK: lYJ_m: goto uak3E; Mf1XH: goto PXYCE; goto BJM0N; JyZew: global $_W; goto Lo0Zm; E8SLb: throw new Exception($result["\x6d\163\147"], $result["\x63\x6f\x64\x65"]); goto lpkvd; W0dZG: iC_g4: goto E8SLb; PYA4n: $this->insertData($a); goto ZU3WT; Lo0Zm: if (!(empty($w_lng) || empty($w_lat) || empty($b_lat) || empty($b_lng))) { goto lYJ_m; } goto OO2Sc; rVRVO: if (!is_null($location) && !empty($location)) { goto rjjCW; } goto B8kJv; dwNgX: goto LIed3; goto W0dZG; lpkvd: LIed3: goto Mf1XH; uak3E: if (!($openid == null)) { goto W5b7o; } goto Qw9_R; ka0Pb: $d = array("\167\137\156" => $w_lng, "\x77\137\141" => $w_lat, "\142\137\x6e" => $b_lng, "\x62\x5f\141" => $b_lat); goto lev6S; BqLve: $location = $this->selectOne("\40\141\x6e\144\40\x6f\160\x65\156\151\144\75\x27{$openid}\x27\x20\x61\156\x64\40\x77\x5f\154\156\x67\75\x27{$w_lng}\47\x20\x61\156\144\x20\167\137\154\x61\164\x3d\47{$w_lat}\x27\x20\141\156\144\40\142\137\x6c\x6e\147\75\x27{$b_lng}\47\40\x61\x6e\144\40\142\137\x6c\x61\164\75\47{$b_lat}\x27"); goto rVRVO; Qw9_R: $openid = $_W["\x6f\x70\x65\156\x69\144"]; goto B4L2H; DE5gW: $a = array("\165\x6e\x69\x61\143\x69\144" => $_W["\x75\x6e\x69\x61\143\151\x64"], "\x6f\x70\x65\156\151\144" => $openid, "\167\x5f\x6c\x6e\x67" => $w_lng, "\x77\x5f\154\x61\164" => $w_lat, "\x62\x5f\154\x6e\147" => $b_lng, "\x62\x5f\154\141\x74" => $b_lat, "\144" => $d, "\143\162\x65\x61\164\145\137\x74\x69\x6d\145" => time(), "\165\x70\x64\141\164\x65\137\x74\151\155\145" => time()); goto PYA4n; Mwvxk: } }
