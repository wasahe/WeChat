<?php
/*
 __________________________________________________
|  Encode by BajieTeam on we7                      |
|__________________________________________________|
*/
 class FlashUserService { public function addUserScore($score, $openid, $log = '') { $this->updateUserScore($score, $openid, $log); } public function reduceUserScore($score, $openid, $log = '') { goto KF9aA; KOxq4: hMLWW: goto aW9ZX; sUarD: $this->updateUserScore($score * -1, $openid, $log); goto gfSIW; gfSIW: goto hMLWW; goto vPjaA; KHvdB: $this->updateUserScore($score, $openid, $log); goto KOxq4; KF9aA: if ($score < 0) { goto PctU1; } goto sUarD; vPjaA: PctU1: goto KHvdB; aW9ZX: } public function updateUserScore($score, $openid, $log = '') { $this->updateUserCredit("\x63\162\145\144\x69\x74\x31", $score, $openid, $log); } public function updateUserMoney($money, $openid, $log = '') { $this->updateUserCredit("\143\x72\145\x64\151\x74\62", $money, $openid, $log); } public function addUserMoney($money, $openid, $log = '') { goto LP5c1; PpcgN: $this->updateUserMoney($money, $openid, $log); goto S68Ci; zJC1T: bVhHQ: goto PpcgN; LP5c1: if (!($money < 0)) { goto bVhHQ; } goto rasfL; rasfL: $money = $money * -1; goto zJC1T; S68Ci: } public function reduceUserMoney($money, $openid, $log = '') { goto wtL8V; wtL8V: if ($money < 0) { goto JHXVM; } goto TfA0Z; sgIsS: d23JJ: goto IGtUl; OfAxh: goto d23JJ; goto QpsvU; QpsvU: JHXVM: goto q03qL; q03qL: $this->updateUserMoney($money, $openid, $log); goto sgIsS; TfA0Z: $this->updateUserMoney($money * -1, $openid, $log); goto OfAxh; IGtUl: } private function updateUserCredit($type = "\143\162\145\x64\151\164\61", $value, $openid, $log = '') { goto CoMuR; t831_: mc_credit_update($uid, $type, $value, $log_arr); goto vPsJE; Q3r9F: $uid = mc_openid2uid($openid); goto KpzyL; CoMuR: load()->model("\x6d\x63"); goto Q3r9F; azbit: $log_arr[1] = $log == '' ? "\xe6\234\252\xe8\256\260\345\275\x95" : $log; goto bWOHx; VBnO5: $log_arr[0] = $uid; goto azbit; bWOHx: $log_arr[2] = ''; goto t831_; KpzyL: $log_arr = array(); goto VBnO5; vPsJE: } public function fetchUserScore($openid) { goto R4Bln; Gc5Hc: $credits = mc_credit_fetch($uid, array("\x63\162\145\144\151\x74\x31")); goto C46ox; C46ox: return $credits["\143\162\145\144\151\164\x31"]; goto roQ4T; R4Bln: load()->model("\x6d\x63"); goto vNVrI; vNVrI: $uid = mc_openid2uid($openid); goto Gc5Hc; roQ4T: } public function fetchUserMoney($openid) { goto nzJrj; yzzla: return $credits["\143\162\x65\144\151\x74\62"]; goto IqFov; HNjiB: $uid = mc_openid2uid($openid); goto Tn2G6; Tn2G6: $credits = mc_credit_fetch($uid, array("\x63\162\145\144\x69\x74\62")); goto yzzla; nzJrj: load()->model("\x6d\143"); goto HNjiB; IqFov: } public function fetchUserCredit($openid) { goto CL_mj; CL_mj: load()->model("\x6d\x63"); goto zfJgH; b8jkP: return $credits; goto oc5e5; MDRGv: $credits = mc_credit_fetch($uid); goto b8jkP; zfJgH: $uid = mc_openid2uid($openid); goto MDRGv; oc5e5: } public function fetchFansInfo($openid) { goto uPoki; XcFVy: return $this->fetchFansInfo($openid); goto zuQVJ; W4tC3: $user["\x6d\x6f\x6e\x65\x79"] = $user["\x63\x72\145\144\x69\x74"]["\143\x72\145\144\x69\x74\x32"]; goto wvqOm; WBnDo: if (!empty($user)) { goto HuOwP; } goto qnh3_; r9nWs: load()->model("\155\x63"); goto GtuAP; wvqOm: return $user; goto MBMIT; uPoki: global $_W; goto r9nWs; qnh3_: $this->oauthFansInfo(); goto XcFVy; iUN7_: $user["\x63\162\x65\x64\x69\164"] = $this->fetchUserCredit($openid); goto PAxoN; PAxoN: $user["\x73\x63\x6f\162\145"] = intval($user["\143\162\145\x64\x69\164"]["\x63\162\x65\144\x69\x74\x31"]); goto W4tC3; zuQVJ: HuOwP: goto iUN7_; GtuAP: $user = mc_fansinfo($openid, $_W["\x61\x63\x63\157\165\156\164"]["\141\x63\x69\x64"]); goto WBnDo; MBMIT: } public function authFansInfo() { goto NDOPq; waJ7r: return $user; goto mTVrS; lWFoS: $user = $this->fetchFansInfo($_W["\157\160\145\x6e\x69\x64"]); goto qgusF; OVtwS: eJaft: goto rEutm; NDOPq: global $_W; goto kESPf; kESPf: load()->model("\x6d\143"); goto Vht3m; MVuJr: $user["\x73\143\157\x72\145"] = intval($user["\x63\162\145\144\151\x74"]["\x63\162\145\x64\151\x74\61"]); goto Jgru2; Jgru2: $user["\x6d\157\156\145\171"] = $user["\x63\162\145\144\x69\x74"]["\x63\162\145\x64\x69\164\62"]; goto waJ7r; B3PT0: $tagUserInfo = mc_oauth_userinfo(); goto lWFoS; qgusF: $user["\x74\x61\147"] = $tagUserInfo; goto OVtwS; rEutm: $user["\143\x72\145\x64\x69\164"] = $this->fetchUserCredit($_W["\x6f\160\145\x6e\x69\144"]); goto MVuJr; Vht3m: $user = $this->fetchFansInfo($_W["\x6f\160\x65\156\151\x64"]); goto aDzNr; aDzNr: if (!(is_null($user) || empty($user["\x74\141\x67"]["\156\151\143\153\156\141\155\145"]))) { goto eJaft; } goto B3PT0; mTVrS: } public function oauthFansInfo() { goto NCl74; wEhhw: return $user; goto lE4Xf; M4AHN: $user = mc_oauth_userinfo(); goto wEhhw; NCl74: global $_W; goto j2g2v; j2g2v: load()->model("\x6d\x63"); goto M4AHN; lE4Xf: } public function fetchUid($openid) { goto i9TAG; HQFyk: return $uid; goto YZlfN; i9TAG: load()->model("\155\143"); goto HTlNz; HTlNz: $uid = mc_openid2uid($openid); goto HQFyk; YZlfN: } }
