<?php
/*
 __________________________________________________
|  Encode by BajieTeam on we7                      |
|__________________________________________________|
*/
 require_once dirname(__FILE__) . "\57\x2e\x2e\57\106\154\x61\163\x68\x43\x6f\155\155\x6f\156\x53\145\x72\166\151\143\x65\56\x70\150\x70"; class FlashQrcodeService extends FlashCommonService { const TMP_QRCODE = 1; const FOREVER_QRCODE = 2; public function __construct() { goto EGMig; tFs76: $this->plugin_name = "\154\x6f\156\x61\x6b\151\156\147\x5f\x66\154\141\x73\x68"; goto XjNkF; EGMig: $this->table_name = "\161\x72\x63\x6f\x64\145"; goto RFZTf; RFZTf: $this->columns = "\151\x64\54\x75\x6e\151\x61\143\151\x64\54\x61\x63\151\x64\x2c\161\x72\x63\151\144\x2c\x6e\141\x6d\x65\x2c\153\x65\171\x77\x6f\162\x64\54\155\x6f\144\145\x6c\54\164\x69\x63\x6b\145\x74\54\145\170\160\151\162\145\54\163\165\142\x6e\165\x6d\x2c\143\x72\145\x61\164\145\x74\151\155\145\54\163\x74\141\x74\165\x73\x2c\164\x79\x70\145\54\145\170\164\162\x61\x2c\165\x72\154\54\163\x63\145\x6e\x65\x5f\163\164\x72"; goto tFs76; XjNkF: } public function createTempQrcode($name, $keyword, $expireSeconds = 2592000) { goto m6s7r; WU_oq: goto NaQ4O; goto PJK6f; lkWot: $qrcode = $account->barCodeCreateDisposable($barcode); goto KsFKc; yWQGL: $account = $this->createWexinAccount(); goto lkWot; nFu8U: $acid = intval($_W["\141\143\x69\144"]); goto Auhri; KsFKc: if (is_error($qrcode)) { goto i15q_; } goto G5Dej; PJK6f: i15q_: goto yNpP9; G5Dej: $insert = array("\165\x6e\151\x61\143\x69\x64" => $_W["\x75\x6e\x69\x61\143\x69\144"], "\x61\143\x69\144" => $acid, "\161\162\x63\x69\x64" => $barcode["\x61\143\164\151\157\x6e\137\151\x6e\x66\x6f"]["\x73\143\145\x6e\x65"]["\x73\143\145\x6e\145\x5f\151\144"], "\x73\143\x65\x6e\x65\x5f\163\x74\162" => '', "\x6b\145\x79\167\157\162\144" => $keyword, "\156\141\x6d\x65" => $name, "\155\157\144\x65\x6c" => self::TMP_QRCODE, "\164\151\143\153\x65\x74" => $qrcode["\164\x69\x63\x6b\x65\x74"], "\165\x72\x6c" => $qrcode["\165\162\x6c"], "\145\x78\x70\x69\x72\145" => $expireSeconds, "\x63\x72\x65\x61\164\x65\x74\151\x6d\x65" => time(), "\x73\x74\x61\164\x75\x73" => "\61", "\x74\x79\x70\145" => "\x73\x63\145\156\145"); goto gRvPO; yNpP9: throw new Exception("\xe6\x8a\xb1\xe6\xad\211\xef\274\214\347\224\237\346\x88\x90\344\272\214\347\xbb\264\347\240\x81\345\244\xb1\350\264\xa5\xef\274\214\346\202\250\xe7\232\x84\345\x85\254\xe4\274\x97\345\217\267\345\217\xaf\xe8\x83\xbd\xe4\xb8\215\xe6\224\xaf\346\x8c\x81\345\217\202\xe6\x95\xb0\xe4\xba\x8c\xe7\xbb\264\347\240\201", 9001); goto EGHPR; Auhri: $uniacid = intval($_W["\x75\156\x69\141\x63\x69\144"]); goto TsLTZ; gRvPO: return $this->insertData($insert); goto WU_oq; m6s7r: global $_W; goto nFu8U; TsLTZ: $qrcid = pdo_fetchcolumn("\123\x45\x4c\105\x43\x54\40\161\x72\143\151\x64\x20\106\x52\117\115\40" . tablename("\x71\162\x63\x6f\x64\x65") . "\x20\127\x48\x45\122\105\x20\141\143\151\144\40\x3d\40\72\141\143\151\144\40\x41\116\x44\40\x75\156\151\x61\x63\x69\x64\x3d\72\x75\x6e\x69\141\143\151\144\x20\101\x4e\104\40\155\x6f\x64\x65\x6c\x20\x3d\40\x27\62\x27\x20\117\x52\104\105\122\40\x42\x59\x20\161\x72\143\x69\x64\x20\x44\x45\x53\103\40\114\111\x4d\x49\124\40\61", array("\72\141\143\151\x64" => $acid, "\x3a\165\x6e\x69\x61\143\x69\144" => $uniacid)); goto L6v3J; EGHPR: NaQ4O: goto EtR3Z; L6v3J: $barcode = array("\145\170\x70\151\162\x65\137\x73\145\143\x6f\x6e\144\163" => $expireSeconds, "\141\x63\164\x69\x6f\x6e\x5f\156\141\155\145" => "\x51\x52\x5f\123\x43\105\116\105", "\x61\143\164\x69\157\x6e\137\x69\156\x66\157" => array("\163\143\x65\x6e\145" => array("\163\x63\145\156\x65\x5f\x69\144" => !empty($qrcid) ? $qrcid + 1 : 100001))); goto yWQGL; EtR3Z: } public function createForeverQrcode($name, $keyword) { goto UPq93; r1QIg: $uniacid = intval($_W["\165\x6e\x69\141\143\151\144"]); goto FPoIo; qr0qq: $account = $this->createWexinAccount(); goto Q5BaW; FPoIo: $qrcid = pdo_fetchcolumn("\x53\105\114\x45\x43\124\40\161\x72\143\x69\144\x20\x46\122\117\115\x20" . tablename("\x71\x72\x63\x6f\x64\145") . "\x20\127\x48\105\x52\105\40\141\x63\x69\x64\40\x3d\x20\x3a\x61\x63\x69\x64\x20\x41\116\x44\x20\165\156\151\141\143\x69\x64\x3d\72\165\x6e\x69\141\143\x69\144\x20\x41\116\104\40\x6d\157\x64\x65\x6c\x20\75\40\47\x32\x27\x20\x4f\x52\x44\x45\x52\x20\102\131\40\x71\x72\x63\x69\144\40\104\x45\123\x43\40\114\x49\x4d\111\124\x20\61", array("\72\x61\143\151\x64" => $acid, "\x3a\x75\156\x69\141\143\x69\x64" => $uniacid)); goto PPH48; Q5BaW: $qrcode = $account->barCodeCreateFixed($barcode); goto OPTSs; PPH48: $barcode = array("\x61\x63\164\x69\x6f\x6e\137\x6e\x61\155\145" => "\121\x52\x5f\x4c\111\115\x49\124\x5f\123\x43\x45\116\x45", "\x61\x63\x74\151\157\156\x5f\x69\156\146\x6f" => array("\163\143\145\x6e\145" => array("\163\143\145\156\145\137\151\144" => !empty($qrcid) ? $qrcid + 1 : 100001))); goto qr0qq; UPq93: global $_W; goto LdRPM; aXB1C: return $this->insertData($insert); goto OTVs6; W0pBh: $insert = array("\x75\x6e\151\141\143\x69\144" => $_W["\165\x6e\151\x61\143\151\x64"], "\141\143\151\x64" => $acid, "\161\x72\143\151\144" => $barcode["\x61\x63\x74\x69\x6f\x6e\x5f\151\156\146\x6f"]["\163\x63\x65\x6e\x65"]["\163\143\145\156\145\137\151\144"], "\x73\x63\145\x6e\145\x5f\x73\x74\x72" => '', "\153\145\x79\x77\x6f\162\x64" => $keyword, "\x6e\x61\x6d\145" => $name, "\155\157\x64\x65\154" => self::FOREVER_QRCODE, "\x74\x69\143\153\145\164" => $qrcode["\164\151\x63\153\x65\x74"], "\165\162\x6c" => $qrcode["\x75\x72\154"], "\x65\x78\160\151\x72\145" => 0, "\x63\162\x65\141\x74\145\x74\151\x6d\x65" => time(), "\163\x74\x61\x74\x75\163" => "\61", "\x74\171\x70\x65" => "\163\143\145\156\x65"); goto aXB1C; XZr6d: Iv8YH: goto yVeDh; OPTSs: if (is_error($qrcode)) { goto d_9ET; } goto W0pBh; OTVs6: goto Iv8YH; goto W3KIl; LdRPM: $acid = intval($_W["\141\143\151\x64"]); goto r1QIg; etxXs: throw new Exception("\346\212\xb1\xe6\255\x89\xef\274\214\xe7\224\x9f\346\x88\220\xe4\272\x8c\347\273\xb4\347\xa0\201\xe5\xa4\261\xe8\264\245\357\xbc\214\346\x82\xa8\xe7\232\x84\345\x85\254\344\xbc\227\345\x8f\xb7\xe5\217\257\350\203\xbd\344\270\215\xe6\224\257\xe6\x8c\x81\xe5\217\202\xe6\225\260\xe4\xba\214\xe7\273\xb4\xe7\xa0\x81", 9001); goto XZr6d; W3KIl: d_9ET: goto etxXs; yVeDh: } public function createForeverStrSceneQrcode($name, $keyword, $sceneStr) { goto p0Fde; dKPP3: return $this->insertData($insert); goto B1tXj; rlbc7: if (is_error($qrcode)) { goto iw42v; } goto RkTAc; B1tXj: goto wuZaa; goto ItpEw; RkTAc: $insert = array("\165\156\151\x61\x63\x69\x64" => $uniacid, "\x61\x63\151\x64" => $acid, "\x71\162\143\151\x64" => "\x30", "\x73\x63\x65\156\145\137\x73\164\x72" => $sceneStr, "\x6b\x65\171\x77\157\x72\x64" => $keyword, "\156\x61\155\145" => $name, "\x6d\157\x64\x65\x6c" => self::FOREVER_QRCODE, "\164\151\x63\x6b\145\164" => $qrcode["\164\151\143\x6b\145\164"], "\165\162\154" => $qrcode["\165\162\154"], "\x65\x78\x70\151\162\x65" => 0, "\143\162\x65\141\x74\x65\x74\151\x6d\145" => time(), "\x73\164\x61\164\x75\x73" => "\x31", "\x74\171\160\x65" => "\163\143\x65\156\145"); goto dKPP3; Ct7bi: $acid = intval($_W["\x61\x63\151\144"]); goto yhpgL; ItpEw: iw42v: goto mkXF2; cnoRM: $barcode = array("\141\x63\164\x69\157\156\x5f\156\141\155\145" => "\121\x52\137\x4c\111\115\111\x54\137\x53\124\x52\137\x53\x43\x45\116\105", "\141\143\164\151\x6f\x6e\137\151\x6e\x66\157" => array("\163\143\145\x6e\x65" => array("\163\x63\x65\x6e\x65\x5f\x73\164\x72" => $sceneStr))); goto Y0SNq; UPLl8: $qrcode = $account->barCodeCreateFixed($barcode); goto rlbc7; yhpgL: $uniacid = intval($_W["\165\156\x69\x61\x63\151\x64"]); goto cnoRM; p0Fde: global $_W; goto Ct7bi; G4Oni: wuZaa: goto xGiYb; Y0SNq: $account = $this->createWexinAccount(); goto UPLl8; mkXF2: throw new Exception("\xe6\212\xb1\346\xad\x89\357\xbc\x8c\347\224\x9f\xe6\x88\220\344\xba\x8c\xe7\xbb\264\xe7\240\x81\xe5\244\261\350\264\xa5\357\274\x8c\xe6\202\xa8\xe7\232\204\xe5\x85\xac\xe4\xbc\x97\xe5\217\xb7\345\x8f\xaf\xe8\203\xbd\344\270\x8d\346\x94\257\346\x8c\201\345\x8f\x82\346\225\260\344\xba\214\347\273\264\347\xa0\201", 9001); goto G4Oni; xGiYb: } }
