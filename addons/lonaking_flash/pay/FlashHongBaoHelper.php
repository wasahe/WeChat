<?php
/*
 __________________________________________________
|  Encode by BajieTeam on we7                      |
|__________________________________________________|
*/
 goto eqSmh; Z0mby: include_once "\115\104\x35\x53\151\x67\x6e\x55\164\x69\154\56\160\150\160"; goto T1L0B; eqSmh: include_once "\103\157\x6d\155\x6f\x6e\125\x74\x69\154\56\160\x68\160"; goto RzM7I; L4evN: class FlashHongBaoHelper { var $parameters; var $apiclient_cert; var $apiclient_key; var $rootca; var $passkey; function __construct($cert, $key, $ca, $passkey = '') { goto hFCd3; hHRAj: $this->passkey = $passkey; goto SA2Tg; vbQ9Z: $this->rootca = $ca; goto hHRAj; hFCd3: $this->apiclient_cert = $cert; goto jMqem; jMqem: $this->apiclient_key = $key; goto vbQ9Z; SA2Tg: } function setParameter($parameter, $parameterValue) { $this->parameters[CommonUtil::trimString($parameter)] = CommonUtil::trimString($parameterValue); } function getParameter($parameter) { return $this->parameters[$parameter]; } protected function create_noncestr($length = 16) { goto NRXMg; dZJwn: goto qoH9W; goto IueRc; S7IPw: $str .= substr($chars, mt_rand(0, strlen($chars) - 1), 1); goto ARbQZ; sM76A: if (!($i < $length)) { goto Q999F; } goto S7IPw; NRXMg: $chars = "\141\142\143\x64\145\146\x67\150\x69\x6a\x6b\x6c\155\156\x6f\160\161\162\163\164\165\x76\167\x78\x79\172\x41\x42\103\104\105\x46\x47\x48\111\112\x4b\x4c\x4d\116\117\x50\121\122\x53\x54\x55\126\x57\130\x59\132\60\61\x32\x33\x34\65\66\x37\x38\71"; goto QS75_; QS75_: $str = ''; goto v24dp; wsaHz: return $str; goto LmA6W; v24dp: $i = 0; goto rbns3; ARbQZ: zdqfQ: goto HrkEW; IueRc: Q999F: goto wsaHz; rbns3: qoH9W: goto sM76A; HrkEW: $i++; goto dZJwn; LmA6W: } function check_sign_parameters() { goto sEGZD; mlKlk: return false; goto pEdtQ; xnzO1: return true; goto CWB9e; pEdtQ: YVH7U: goto xnzO1; sEGZD: if (!($this->parameters["\156\x6f\156\143\x65\137\163\x74\x72"] == null || $this->parameters["\155\x63\150\137\x62\151\x6c\x6c\156\x6f"] == null || $this->parameters["\x6d\143\150\137\151\x64"] == null || $this->parameters["\167\170\141\160\160\x69\144"] == null || $this->parameters["\x6e\151\x63\153\137\156\141\155\145"] == null || $this->parameters["\163\x65\156\144\x5f\156\x61\155\x65"] == null || $this->parameters["\162\145\x5f\x6f\x70\x65\x6e\x69\144"] == null || $this->parameters["\x74\157\164\x61\x6c\x5f\141\x6d\x6f\165\156\164"] == null || $this->parameters["\x74\157\x74\x61\x6c\137\x6e\x75\x6d"] == null || $this->parameters["\x77\x69\x73\x68\x69\x6e\x67"] == null || $this->parameters["\143\154\x69\145\156\164\x5f\x69\160"] == null || $this->parameters["\x61\x63\x74\137\156\141\x6d\145"] == null || $this->parameters["\x72\145\x6d\141\x72\x6b"] == null)) { goto YVH7U; } goto mlKlk; CWB9e: } protected function get_sign() { try { goto I37Y5; c6t5w: $sign = $md5SignUtil->sign($unSignParaString, $commonUtil->trimString($this->passkey)); goto gjyh_; MQO9h: sumSy: goto Q9ap0; qTlua: JbXYG: goto LWyxL; hFtf1: throw new SDKRuntimeException("\345\xaf\x86\xe9\x92\245\344\270\215\350\203\xbd\xe4\270\xba\xe7\xa9\272\x21"); goto MQO9h; Q9ap0: if (!($this->check_sign_parameters() == false)) { goto JbXYG; } goto lnHQq; LWyxL: $commonUtil = new CommonUtil(); goto GT6Xe; GT6Xe: ksort($this->parameters); goto zOpR3; gjyh_: return $sign; goto gsnI3; lnHQq: throw new SDKRuntimeException("\347\224\x9f\346\x88\x90\xe7\255\276\345\x90\215\345\217\202\xe6\225\xb0\xe7\274\272\345\xa4\261\41"); goto qTlua; zOpR3: $unSignParaString = $commonUtil->formatQueryParaMap($this->parameters, false); goto ujkf0; I37Y5: if (!(null == $this->passkey || '' == $this->passkey)) { goto sumSy; } goto hFtf1; ujkf0: $md5SignUtil = new MD5SignUtil(); goto c6t5w; gsnI3: } catch (SDKRuntimeException $e) { throw new FlashHongBaoException($e->errorMessage(), 10302); } } function create_hongbao_xml($retcode = 0, $reterrmsg = "\x6f\x6b") { try { goto yqTTZ; yqTTZ: $this->setParameter("\163\151\x67\x6e", $this->get_sign()); goto P5fI2; pA_H9: return $xml; goto KmdNH; P5fI2: $xml = CommonUtil::arrayToXml($this->parameters); goto pA_H9; KmdNH: } catch (SDKRuntimeException $e) { throw new FlashHongBaoException($e->errorMessage(), 10301); } } function curl_post_ssl($url, $vars, $second = 30, $aHeader = array()) { goto SyH9j; U6I3r: curl_setopt($ch, CURLOPT_SSLCERT, ATTACHMENT_ROOT . $this->apiclient_cert); goto AaHHd; H3nE2: curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false); goto U6I3r; QL3SX: xoQ_4: goto xUcYW; P7Ypm: goto BzAqT; goto Bv7Qr; mflTH: curl_setopt($ch, CURLOPT_HTTPHEADER, $aHeader); goto QL3SX; oMVfs: return $data; goto HhYK6; eTjYA: if (!(count($aHeader) >= 1)) { goto xoQ_4; } goto mflTH; xUcYW: curl_setopt($ch, CURLOPT_POST, 1); goto Q19N7; hgmtr: curl_close($ch); goto B3sJ_; hvgdG: curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false); goto H3nE2; LUOcS: curl_setopt($ch, CURLOPT_TIMEOUT, $second); goto dgYPd; BNEo_: $data = curl_exec($ch); goto PEMvy; Q19N7: curl_setopt($ch, CURLOPT_POSTFIELDS, $vars); goto BNEo_; AaHHd: curl_setopt($ch, CURLOPT_SSLKEY, ATTACHMENT_ROOT . $this->apiclient_key); goto YfLLU; PEMvy: if ($data) { goto zmYsZ; } goto zdh3_; daIVZ: curl_close($ch); goto oMVfs; B3sJ_: return false; goto P7Ypm; zdh3_: $error = curl_errno($ch); goto hgmtr; heHQu: curl_setopt($ch, CURLOPT_URL, $url); goto hvgdG; Bv7Qr: zmYsZ: goto daIVZ; HhYK6: BzAqT: goto VtVVH; YfLLU: curl_setopt($ch, CURLOPT_CAINFO, ATTACHMENT_ROOT . $this->rootca); goto eTjYA; dgYPd: curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); goto heHQu; SyH9j: $ch = curl_init(); goto LUOcS; VtVVH: } } goto rLr4a; T1L0B: include_once "\x46\154\141\x73\150\110\157\x6e\x67\102\x61\x6f\105\170\x63\x65\x70\164\151\157\156\56\x70\x68\x70"; goto L4evN; RzM7I: include_once "\123\x44\113\x52\x75\156\x74\x69\x6d\145\105\x78\x63\145\x70\164\x69\x6f\x6e\x2e\x63\154\x61\163\x73\56\x70\150\160"; goto Z0mby; rLr4a: ?>
