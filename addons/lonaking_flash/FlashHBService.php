<?php
/*
 __________________________________________________
|  Encode by BajieTeam on we7                      |
|__________________________________________________|
*/
 goto ZqJXQ; ZqJXQ: require_once "\160\x61\x79\x2f\106\154\x61\163\x68\110\157\x6e\x67\102\x61\x6f\x48\145\x6c\160\x65\x72\x2e\x70\150\x70"; goto Cynsm; Cynsm: require_once "\x70\x61\171\x2f\x46\154\x61\163\x68\x48\157\156\147\102\x61\157\105\170\143\x65\x70\x74\x69\157\x6e\x2e\x70\150\x70"; goto blDLd; blDLd: class FlashHBService { private $DS; private $SIGNTYPE = "\163\x68\141\x31"; private $APPID; private $MCHID; private $PASSKEY; private $NICK_NAME; private $SEND_NAME; private $WISHING; private $ACT_NAME; private $REMARK; private $apiclient_cert; private $apiclient_key; private $rootca; private $money; private $openid; private $client_ip; public function __construct($openid, $money, $config) { goto fovfZ; ZeD6J: $this->money = intval($money * 100); goto Foqpz; jWFtz: $this->apiclient_key = $config["\x61\160\151\x63\154\151\145\x6e\x74\137\153\145\171"]; goto t9oQk; RziVn: $this->NICK_NAME = $config["\156\x69\143\x6b\137\156\141\x6d\145"]; goto MUP6h; UXO7U: $this->client_ip = $config["\143\154\x69\145\156\x74\x5f\x69\160"]; goto ZeD6J; D0Kmm: $this->REMARK = $config["\x72\145\x6d\141\x72\x6b"]; goto elplu; MUP6h: $this->SEND_NAME = $config["\163\x65\156\144\x5f\156\x61\x6d\x65"]; goto i3IzW; elplu: $this->apiclient_cert = $config["\141\x70\x69\143\x6c\151\145\156\x74\137\x63\145\162\x74"]; goto jWFtz; i3IzW: $this->WISHING = $config["\167\151\x73\x68\151\x6e\147"]; goto Uyfs1; Uyfs1: $this->ACT_NAME = $config["\x61\143\x74\137\156\x61\x6d\145"]; goto D0Kmm; hdzAB: $this->MCHID = $config["\x6d\x63\150\151\x64"]; goto nIyFV; fovfZ: $this->DS = DIRECTORY_SEPARATOR; goto d6v_u; t9oQk: $this->rootca = $config["\x72\157\157\x74\x63\x61"]; goto UXO7U; ZS_3v: $this->APPID = $config["\x61\x70\x70\x69\x64"]; goto hdzAB; d6v_u: $this->SIGNTYPE = "\x73\150\141\x31"; goto ZS_3v; Foqpz: $this->openid = $openid; goto nZkNn; nIyFV: $this->PASSKEY = $config["\x70\141\163\163\x6b\145\x79"]; goto RziVn; nZkNn: } public function send() { goto kKCpq; mz270: CQrKa: goto CwGTj; QzlEY: $wxHongBaoHelper->setParameter("\141\x63\x74\137\x6e\141\155\x65", $this->ACT_NAME); goto O_Go8; e7SS4: if ($responseObj->err_code == "\x44\101\131\x5f\x4f\126\x45\x52\x5f\x4c\x49\x4d\111\x54\105\x44") { goto eUTfA; } goto jD3Yw; S0DSL: $recordData["\145\x72\162\x6f\x72\137\x63\157\144\145"] = $responseObjArr["\x65\x72\162\x6f\x72\137\x63\x6f\x64\145"]; goto Mbaea; c2tvO: $responseObjText = json_encode($responseObj); goto Y_HBK; Douly: goto vEYv1; goto CuxFq; t9_hh: throw new FlashHongBaoException("\xe7\xb3\xbb\xe7\xbb\x9f\347\271\x81\xe5\xbf\x99\357\274\214\xe8\xaf\xb7\xe7\xa8\x8d\345\220\216\xe5\206\x8d\xe8\257\x95\x21" . $responseObj->err_code_des, 10403); goto Q70BV; O_Go8: $wxHongBaoHelper->setParameter("\162\145\155\x61\162\153", $this->REMARK); goto NFmjo; UbcPo: throw new FlashHongBaoException("\347\xb3\xbb\xe7\273\237\347\xb9\201\345\277\x99\xef\xbc\x8c\350\257\xb7\347\250\215\xe5\x90\216\xe5\x86\215\350\257\225\x21" . $responseObj->err_code_des, 10403); goto Yok5c; XeWxX: $recordData["\x72\145\163\x70\157\x6e\163\145\x5f\162\145\x74\x75\162\156\137\x6d\163\x67"] = $responseObjArr["\x72\x65\x74\x75\162\x6e\137\x6d\163\147"]; goto yohkE; e3aav: if ($responseObj->err_code == "\124\x49\x4d\x45\137\x4c\x49\115\111\x54\x45\104") { goto IDWLA; } goto V1Pck; SFQ3S: rCWtW: goto x9gg6; j3bkZ: $wxHongBaoHelper->setParameter("\x6d\143\150\x5f\x69\144", $this->MCHID); goto znRp0; CwGTj: goto aGWTz; goto erINL; Yi8hJ: if ($return_code == "\123\125\x43\x43\105\x53\123") { goto K9Xdl; } goto BcAf2; Q70BV: cf899: goto G4uhe; joNMG: $recordData = array("\164\157\x5f\x6f\x70\x65\156\x69\x64" => $this->openid, "\x75\x6e\151\141\x63\x69\x64" => $_W["\165\x6e\x69\x61\143\x69\144"], "\141\x6d\x6f\165\x6e\164" => $this->money, "\163\x74\141\x74\165\163" => 0, "\x6d\143\x68\x5f\142\151\x6c\154\x6e\x6f" => $mch_billno, "\x63\x72\x65\141\164\x65\137\x74\x69\x6d\145" => time(), "\165\x70\x64\x61\x74\145\x5f\164\151\x6d\145" => time()); goto Dkcef; nkvbE: $recordData["\x72\145\163\160\x6f\x6e\x73\x65\137\x65\x72\x72\x5f\143\157\x64\145\137\x64\145\163"] = $responseObjArr["\145\162\162\137\x63\x6f\x64\x65\x5f\x64\145\163"]; goto XeWxX; uSiI1: goto lEThW; goto H_L1N; PXrDQ: $recordData["\x72\x65\163\160\x6f\156\163\145\x5f\x72\145\163\165\154\164\x5f\143\157\144\x65"] = $responseObjArr["\x72\x65\x73\x75\154\x74\137\x63\157\144\145"]; goto Yi8hJ; kiAXw: $recordData["\x73\164\141\x74\x75\163"] = 1; goto c4xRo; zbUvD: NVo2u: goto mwJtJ; znRp0: $wxHongBaoHelper->setParameter("\167\170\x61\x70\160\151\x64", $this->APPID); goto sKnjk; cFcul: if ($responseObj->err_code == "\x53\131\123\124\x45\x4d\105\x52\x52\x4f\122") { goto zar0S; } goto slqNx; Mbaea: pdo_insert("\154\x6f\156\x61\153\151\x6e\147\x5f\x68\x62\x5f\162\145\143\157\162\144", $recordData); goto BfL7H; FyCRc: $return_code = $responseObj->return_code; goto lJDC3; KPgt1: if (!($responseObj->err_code == "\123\x45\103\x4f\x4e\x44\137\117\126\105\122\137\x4c\111\x4d\111\x54\105\x44")) { goto iT51Y; } goto gpxEL; Jk1UJ: throw new FlashHongBaoException("\344\xbb\212\xe6\227\245\347\xba\242\345\x8c\x85\xe5\267\xb2\350\xbe\xbe\xe4\270\x8a\351\x99\x90\xef\274\x8c\xe8\xaf\267\xe6\x98\216\xe6\x97\245\xe5\x86\215\350\xaf\225\x21", 10404); goto mCcYa; ugjl6: goto xV9cS; goto hLo9R; KRHPl: goto eH6nr; goto hA5wX; G_KQN: throw new FlashHongBaoException("\xe7\xba\242\xe5\x8c\205\xe5\x8f\x91\346\224\xbe\xe5\244\xb1\xe8\264\xa5\xef\274\201" . $responseObj->return_msg . "\xef\274\x81\xe8\xaf\xb7\xe7\250\x8d\xe5\x90\216\xe5\x86\215\350\257\225\xef\274\201", 10406); goto ugjl6; H_L1N: eUTfA: goto Jk1UJ; FPRph: vEYv1: goto E0qP3; V1Pck: if ($responseObj->err_code == "\123\131\123\x54\105\x4d\x45\x52\122\x4f\x52") { goto x__Yj; } goto e7SS4; DDe4H: $wxHongBaoHelper->setParameter("\x63\x6c\151\x65\156\164\x5f\151\x70", empty($this->client_ip) ? "\61\x32\67\x2e\x30\x2e\60\56\61" : $this->client_ip); goto QzlEY; erINL: dZjZF: goto FqTVD; fl0o2: $wxHongBaoHelper->setParameter("\162\x65\x5f\x6f\x70\145\156\x69\144", $this->openid); goto wVou3; TLy_q: $wxHongBaoHelper->setParameter("\156\157\156\x63\x65\137\163\x74\x72", $commonUtil->create_noncestr()); goto cjKRN; mCcYa: lEThW: goto OLjOt; OLjOt: goto ucwdo; goto p_lkN; x7a_f: C2ow2: goto XVhdM; yLnlF: $recordData["\162\145\163\160\157\x6e\x73\x65\x5f\x72\145\x74\165\x72\156\137\x6d\163\x67"] = $responseObjArr["\162\145\x74\165\x72\156\137\x6d\x73\147"]; goto S0DSL; x9gg6: throw new FlashHongBaoException("\347\x8e\260\xe5\x9c\250\351\x9d\236\xe7\272\242\345\214\x85\345\217\221\346\224\276\346\227\266\351\x97\xb4\357\xbc\214\350\257\xb7\xe5\x9c\xa8\345\214\227\xe4\xba\xac\xe6\x97\xb6\xe9\x97\264\x30\72\x30\x30\55\x38\x3a\60\60\344\xb9\x8b\xe5\xa4\226\xe7\x9a\204\346\x97\xb6\351\x97\xb4\345\x89\215\xe6\235\245\351\242\x86\345\x8f\226", 10402); goto mz270; jxfQI: $recordData["\x72\x65\x73\160\157\156\x73\x65\x5f\x72\x65\164\x75\x72\156\137\x63\x6f\144\145"] = $responseObjArr["\162\x65\164\165\x72\156\137\x63\x6f\x64\145"]; goto PXrDQ; hLo9R: K9Xdl: goto QByfM; VfR4X: $wxHongBaoHelper->setParameter("\x77\151\x73\x68\151\x6e\x67", $this->WISHING); goto DDe4H; Imu0H: throw new FlashHongBaoException("\xe6\257\217\xe5\x88\206\351\222\237\347\272\xa2\345\x8c\205\xe5\267\xb2\xe8\276\xbe\344\xb8\212\351\x99\220\xef\274\x8c\xe8\257\267\347\xa8\215\345\220\x8e\xe5\206\x8d\xe8\xaf\x95\41", 10405); goto WijV9; c4xRo: pdo_insert("\154\157\156\x61\153\151\156\147\x5f\150\142\x5f\x72\145\x63\157\x72\144", $recordData); goto e_XP0; FRPzJ: aGWTz: goto WlAum; sKnjk: $wxHongBaoHelper->setParameter("\x6e\151\x63\x6b\137\156\x61\x6d\145", $this->NICK_NAME); goto yqi15; tEmbF: $recordData["\x72\145\163\160\x6f\156\x73\145\137\157\142\152\x5f\x74\x65\170\164"] = $responseObjText; goto jxfQI; Yok5c: ucwdo: goto KRHPl; G4uhe: goto CQrKa; goto SFQ3S; Y_HBK: $responseObjArr = json_decode($responseObjText, true); goto tEmbF; wSh0p: $recordData["\x72\145\163\160\157\156\163\x65\x5f\145\162\162\137\143\x6f\144\x65\x5f\x64\145\163"] = $responseObjArr["\145\x72\x72\137\x63\x6f\144\x65\x5f\144\145\163"]; goto yLnlF; Lk_60: if ($responseObj->err_code == "\124\111\115\105\137\114\x49\115\111\x54\x45\104") { goto rCWtW; } goto cFcul; uQ7qw: $url = "\150\x74\x74\160\163\x3a\x2f\57\x61\x70\x69\56\x6d\x63\150\56\x77\x65\x69\170\151\x6e\56\161\161\56\x63\x6f\155\57\x6d\x6d\x70\141\171\155\153\164\x74\162\141\156\163\x66\x65\162\x73\57\x73\x65\156\144\162\x65\x64\160\141\143\x6b"; goto SQmHC; gpxEL: throw new FlashHongBaoException("\346\xaf\x8f\xe5\x88\206\351\x92\x9f\347\272\242\xe5\x8c\x85\xe5\267\xb2\350\xbe\xbe\xe4\270\x8a\xe9\231\x90\357\xbc\214\xe8\xaf\xb7\347\xa8\x8d\xe5\x90\216\xe5\206\x8d\xe8\xaf\x95\x21", 10405); goto HlHJj; nDpWl: global $_W; goto joNMG; Aa31A: $wxHongBaoHelper = new FlashHongBaoHelper($this->apiclient_cert, $this->apiclient_key, $this->rootca, $this->PASSKEY); goto TLy_q; RjNl_: zar0S: goto t9_hh; QByfM: if ($result_code == "\x53\x55\x43\x43\105\123\x53") { goto cr0L4; } goto emqKJ; e_XP0: $total_amount = $responseObj->total_amount * 1.0 / 100; goto N53v2; N53v2: return "\347\272\242\345\214\205\345\217\221\xe6\x94\xbe\xe6\x88\220\345\x8a\x9f\357\xbc\x81\xe9\x87\221\351\242\x9d\xe4\xb8\272\357\274\x9a" . $total_amount . "\xe5\x85\x83\357\xbc\201"; goto FPRph; BSoRH: throw new FlashHongBaoException("\xe4\273\x8a\346\227\xa5\347\272\xa2\xe5\214\205\xe5\267\262\350\276\276\xe4\270\x8a\351\x99\x90\357\274\214\350\xaf\267\346\230\x8e\xe6\x97\245\345\206\x8d\xe8\xaf\225\41", 10404); goto x7a_f; SQmHC: $responseXml = $wxHongBaoHelper->curl_post_ssl($url, $postXml); goto rtuUY; D9QC3: goto C2ow2; goto yxFAi; XVhdM: goto cf899; goto RjNl_; rtuUY: $responseObj = simplexml_load_string($responseXml, "\x53\151\x6d\x70\x6c\x65\x58\x4d\x4c\105\154\x65\155\145\156\x74", LIBXML_NOCDATA); goto FyCRc; FqTVD: throw new FlashHongBaoException("\xe6\202\xa8\xe6\235\xa5\350\277\x9f\344\272\206\357\xbc\214\347\xba\xa2\xe5\x8c\x85\xe5\xb7\262\xe7\xbb\217\345\217\221\345\xae\214\357\274\x81\xef\274\201\xef\xbc\x81", 10401); goto FRPzJ; WijV9: ZKj6j: goto uSiI1; yxFAi: u2G71: goto BSoRH; mwJtJ: throw new FlashHongBaoException("\346\202\xa8\346\235\245\xe8\xbf\x9f\xe4\272\206\xef\274\214\xe7\272\242\345\214\205\xe5\267\xb2\xe7\273\x8f\xe5\217\221\xe5\256\x8c\xef\274\x81\xef\274\x81\357\274\201", 10401); goto RRVh5; NFmjo: $postXml = $wxHongBaoHelper->create_hongbao_xml(); goto uQ7qw; qoU03: goto jWc6k; goto zbUvD; RRVh5: jWc6k: goto G_KQN; E8r9w: $wxHongBaoHelper->setParameter("\x74\157\164\141\154\x5f\x6e\x75\x6d", 1); goto VfR4X; nw0tY: eH6nr: goto qoU03; PKacS: throw new FlashHongBaoException("\xe7\x8e\260\345\x9c\xa8\xe9\235\236\347\272\xa2\345\214\205\345\x8f\221\xe6\x94\xbe\346\227\xb6\351\x97\xb4\xef\xbc\x8c\350\xaf\xb7\xe5\234\xa8\345\x8c\227\xe4\xba\254\346\x97\266\351\x97\264\x30\x3a\x30\60\x2d\x38\x3a\x30\x30\xe4\xb9\x8b\345\xa4\x96\347\232\204\xe6\227\266\xe9\227\264\345\211\215\346\235\245\351\242\206\345\217\226", 10402); goto nw0tY; yqi15: $wxHongBaoHelper->setParameter("\x73\x65\156\144\x5f\156\141\x6d\145", $this->SEND_NAME); goto fl0o2; CuxFq: cr0L4: goto kiAXw; Dkcef: $commonUtil = new CommonUtil(); goto Aa31A; BcAf2: $recordData["\x73\164\x61\x74\x75\163"] = 0; goto sCfpx; J0_Xo: if ($responseObj->err_code == "\116\x4f\x54\x45\116\117\125\x47\x48") { goto dZjZF; } goto Lk_60; E0qP3: xV9cS: goto KNmAO; WlAum: throw new FlashHongBaoException("\347\272\242\xe5\x8c\205\xe5\217\221\xe6\x94\276\xe5\xa4\261\xe8\xb4\245\357\xbc\x81" . $responseObj->return_msg . "\357\xbc\201\xe8\xaf\xb7\347\250\x8d\345\220\x8e\345\206\x8d\350\257\x95\357\274\201", 10406); goto Douly; p_lkN: x__Yj: goto UbcPo; lJDC3: $result_code = $responseObj->result_code; goto y0ZzQ; BfL7H: if ($responseObj->err_code == "\116\117\x54\x45\x4e\x4f\125\107\110") { goto NVo2u; } goto e3aav; sCfpx: $recordData["\x72\145\163\160\157\156\163\145\x5f\x65\162\x72\x5f\143\157\144\145"] = $responseObjArr["\x65\x72\x72\137\143\x6f\144\145"]; goto wSh0p; cjKRN: $wxHongBaoHelper->setParameter("\155\143\x68\x5f\142\151\154\x6c\156\x6f", $mch_billno); goto j3bkZ; y0ZzQ: $recordData["\163\145\156\x64\x5f\144\141\x74\x61"] = $postXml; goto c2tvO; HlHJj: iT51Y: goto D9QC3; emqKJ: $recordData["\x72\145\x73\160\x6f\156\163\x65\137\145\x72\x72\137\x63\x6f\144\145"] = $responseObjArr["\145\162\162\x5f\143\157\x64\145"]; goto nkvbE; slqNx: if ($responseObj->err_code == "\104\101\x59\137\117\x56\105\122\x5f\x4c\111\x4d\x49\x54\105\x44") { goto u2G71; } goto KPgt1; yohkE: pdo_insert("\154\157\x6e\141\153\x69\x6e\147\x5f\150\x62\137\x72\x65\143\157\162\144", $recordData); goto J0_Xo; kKCpq: $mch_billno = date("\131\x6d\144\x48\151\x73") . rand(10, 9999); goto nDpWl; jD3Yw: if (!($responseObj->err_code == "\123\105\x43\x4f\x4e\104\x5f\117\126\x45\122\x5f\114\111\x4d\111\124\x45\104")) { goto ZKj6j; } goto Imu0H; hA5wX: IDWLA: goto PKacS; wVou3: $wxHongBaoHelper->setParameter("\164\157\164\x61\154\x5f\x61\155\157\x75\156\164", $this->money); goto E8r9w; KNmAO: } }
